<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M1 知识库 V4.0 - UI Demo</title>
    <style>
        /* ============================================
           M1 知识库 V4.0 - Apple Design System
           UI Demo - 完整界面演示 (深色/浅色模式)
           ============================================ */

        /* === 色彩系统 (苹果官网) === */
        :root {
            /* 品牌色 */
            --apple-blue: rgb(0, 102, 204);
            --apple-blue-hover: rgb(41, 151, 255);
            --apple-blue-active: rgb(0, 82, 164);
            --apple-blue-disabled: rgb(0, 102, 204, 0.3);
            --apple-blue-gradient: linear-gradient(135deg, var(--apple-blue), var(--apple-teal));

            /* 语义颜色 */
            --apple-green: rgb(0, 217, 89);
            --apple-green-hover: rgb(41, 227, 119);
            --apple-red: rgb(175, 30, 45);
            --apple-red-hover: rgb(195, 50, 65);
            --apple-orange: rgb(255, 149, 0);
            --apple-orange-hover: rgb(255, 169, 30);
            --apple-yellow: rgb(255, 204, 0);
            --apple-yellow-hover: rgb(255, 214, 30);
            --apple-purple: rgb(175, 82, 222);
            --apple-purple-hover: rgb(195, 102, 232);
            --apple-pink: rgb(255, 45, 85);
            --apple-pink-hover: rgb(255, 65, 105);
            --apple-teal: rgb(85, 190, 240);
            --apple-teal-hover: rgb(105, 200, 250);
            --apple-indigo: rgb(94, 92, 230);
            --apple-indigo-hover: rgb(114, 112, 250);

            /* 渐变颜色 */
            --gradient-blue: linear-gradient(135deg, var(--apple-blue), var(--apple-teal));
            --gradient-green: linear-gradient(135deg, var(--apple-green), var(--apple-teal));
            --gradient-orange: linear-gradient(135deg, var(--apple-orange), var(--apple-yellow));
            --gradient-purple: linear-gradient(135deg, var(--apple-purple), var(--apple-pink));
            --gradient-red: linear-gradient(135deg, var(--apple-red), var(--apple-orange));
            --gradient-indigo: linear-gradient(135deg, var(--apple-indigo), var(--apple-purple));

            /* 中性色 - 明亮模式 */
            --apple-black: rgb(0, 0, 0);
            --apple-dark-gray: rgb(29, 29, 31);
            --apple-gray: rgb(51, 51, 54);
            --apple-medium-gray: rgb(88, 88, 92);
            --apple-light-gray: rgb(134, 134, 139);
            --apple-lighter-gray: rgb(174, 174, 178);
            --apple-border-gray: rgb(232, 232, 237);
            --apple-fill-gray: rgb(245, 245, 247);

            /* 背景色 - 明亮模式 */
            --bg-primary: rgb(255, 255, 255);
            --bg-secondary: rgb(245, 245, 247);
            --bg-tertiary: rgb(250, 250, 252);
            --bg-elevated: rgb(255, 255, 255);
            --bg-glass: rgba(255, 255, 255, 0.8);
            --bg-glass-heavy: rgba(255, 255, 255, 0.95);
            --bg-overlay: rgba(0, 0, 0, 0.4);
            --bg-modal: rgba(255, 255, 255, 0.95);

            /* 文字色 - 明亮模式 */
            --text-primary: rgb(0, 0, 0);
            --text-primary-opacity: rgba(0, 0, 0, 0.85);
            --text-secondary: rgba(0, 0, 0, 0.7);
            --text-tertiary: rgba(0, 0, 0, 0.5);
            --text-quaternary: rgba(0, 0, 0, 0.3);
            --text-disabled: rgba(0, 0, 0, 0.25);

            /* 分隔线 - 明亮模式 */
            --separator-opaque: rgb(232, 232, 237);
            --separator-transparent: rgba(60, 60, 67, 0.12);
            --separator-heavy: rgba(60, 60, 67, 0.18);

            /* 填充色 - 明亮模式 */
            --fill-primary: rgb(255, 255, 255);
            --fill-secondary: rgb(245, 245, 247);
            --fill-tertiary: rgb(235, 235, 237);
            --fill-quaternary: rgb(224, 224, 229);

            /* 阴影 - 明亮模式 */
            --shadow-color: rgba(0, 0, 0, 0.08);
            --shadow-color-light: rgba(0, 0, 0, 0.04);

            /* === 字体系统 (SF Pro) === */
            --font-family: "SF Pro Text", "SF Pro Icons", "Helvetica Neue", Helvetica, Arial, sans-serif;
            --font-family-display: "SF Pro Display", "SF Pro Text", "Helvetica Neue", Helvetica, Arial, sans-serif;
            --font-family-mono: "SF Mono", "Menlo", "Monaco", "Courier New", monospace;

            /* 字号系统 */
            --font-size-hero: 56px;
            --font-size-large-title: 48px;
            --font-size-title1: 40px;
            --font-size-title2: 32px;
            --font-size-title3: 28px;
            --font-size-headline: 22px;
            --font-size-body: 17px;
            --font-size-body2: 17px;
            --font-size-callout: 16px;
            --font-size-subheadline: 15px;
            --font-size-footnote: 13px;
            --font-size-caption1: 12px;
            --font-size-caption2: 11px;

            /* 字重 */
            --font-weight-ultralight: 100;
            --font-weight-thin: 200;
            --font-weight-light: 300;
            --font-weight-regular: 400;
            --font-weight-medium: 500;
            --font-weight-semibold: 600;
            --font-weight-bold: 700;
            --font-weight-heavy: 800;
            --font-weight-black: 900;

            /* 字间距 */
            --letter-spacing-tight: -0.015em;
            --letter-spacing-default: -0.022em;
            --letter-spacing-wide: 0em;

            /* 行高 */
            --line-height-tight: 1.2;
            --line-height-default: 1.4;
            --line-height-relaxed: 1.6;
            --line-height-loose: 1.8;

            /* === 间距系统 (8点网格) === */
            --spacing-0: 0;
            --spacing-px: 1px;
            --spacing-0_5: 2px;
            --spacing-xs: 4px;
            --spacing-sm: 8px;
            --spacing-md: 12px;
            --spacing-lg: 16px;
            --spacing-xl: 24px;
            --spacing-2xl: 32px;
            --spacing-3xl: 48px;
            --spacing-4xl: 64px;
            --spacing-5xl: 80px;
            --spacing-6xl: 96px;

            /* === 圆角系统 === */
            --radius-xs: 4px;
            --radius-sm: 6px;
            --radius-md: 8px;
            --radius-lg: 12px;
            --radius-xl: 16px;
            --radius-2xl: 20px;
            --radius-3xl: 24px;
            --radius-full: 9999px;

            /* === 阴影系统 === */
            --shadow-xs: 0 1px 3px rgba(0, 0, 0, 0.04), 0 1px 2px rgba(0, 0, 0, 0.06);
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.04), 0 1px 3px rgba(0, 0, 0, 0.08);
            --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.08), 0 2px 4px rgba(0, 0, 0, 0.12);
            --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.12), 0 4px 8px rgba(0, 0, 0, 0.16);
            --shadow-xl: 0 12px 48px rgba(0, 0, 0, 0.15), 0 6px 16px rgba(0, 0, 0, 0.2);
            --shadow-2xl: 0 24px 64px rgba(0, 0, 0, 0.2), 0 12px 24px rgba(0, 0, 0, 0.25);
            --shadow-inner: inset 0 2px 4px rgba(0, 0, 0, 0.04), inset 0 1px 2px rgba(0, 0, 0, 0.06);
            --shadow-glow: 0 0 20px rgba(0, 102, 204, 0.2);
            --shadow-glow-green: 0 0 20px rgba(0, 217, 89, 0.2);
            --shadow-glow-orange: 0 0 20px rgba(255, 149, 0, 0.2);
            --shadow-glow-purple: 0 0 20px rgba(175, 82, 222, 0.2);

            /* === 动画系统 === */
            --ease-linear: linear;
            --ease-default: cubic-bezier(0.4, 0, 0.2, 1);
            --ease-in: cubic-bezier(0.4, 0, 1, 1);
            --ease-out: cubic-bezier(0, 0, 0.2, 1);
            --ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);
            --ease-spring: cubic-bezier(0.175, 0.885, 0.32, 1.275);
            --ease-bounce: cubic-bezier(0.68, -0.55, 0.265, 1.55);

            --duration-instant: 0ms;
            --duration-fast: 150ms;
            --duration-default: 200ms;
            --duration-medium: 300ms;
            --duration-slow: 400ms;
            --duration-slower: 600ms;
            --duration-slowest: 1000ms;

            /* === Z-Index 层级 === */
            --z-base: 0;
            --z-raised: 10;
            --z-dropdown: 100;
            --z-sticky: 200;
            --z-fixed: 300;
            --z-modal-backdrop: 400;
            --z-modal: 500;
            --z-popover: 600;
            --z-tooltip: 700;
        }

        /* === 深色模式 === */
        [data-theme="dark"] {
            /* 中性色 - 深色模式 */
            --apple-black: rgb(0, 0, 0);
            --apple-dark-gray: rgb(28, 28, 30);
            --apple-gray: rgb(44, 44, 46);
            --apple-medium-gray: rgb(58, 58, 60);
            --apple-light-gray: rgb(99, 99, 102);
            --apple-lighter-gray: rgb(152, 152, 157);
            --apple-border-gray: rgb(58, 58, 60);
            --apple-fill-gray: rgb(44, 44, 46);

            /* 背景色 - 深色模式 */
            --bg-primary: rgb(0, 0, 0);
            --bg-secondary: rgb(22, 22, 23);
            --bg-tertiary: rgb(28, 28, 30);
            --bg-elevated: rgb(28, 28, 30);
            --bg-glass: rgba(28, 28, 30, 0.8);
            --bg-glass-heavy: rgba(28, 28, 30, 0.95);
            --bg-overlay: rgba(0, 0, 0, 0.6);
            --bg-modal: rgba(28, 28, 30, 0.95);

            /* 文字色 - 深色模式 */
            --text-primary: rgb(255, 255, 255);
            --text-primary-opacity: rgba(255, 255, 255, 0.85);
            --text-secondary: rgba(255, 255, 255, 0.75);
            --text-tertiary: rgba(255, 255, 255, 0.5);
            --text-quaternary: rgba(255, 255, 255, 0.3);
            --text-disabled: rgba(255, 255, 255, 0.2);

            /* 分隔线 - 深色模式 */
            --separator-opaque: rgb(58, 58, 60);
            --separator-transparent: rgba(255, 255, 255, 0.08);
            --separator-heavy: rgba(255, 255, 255, 0.12);

            /* 填充色 - 深色模式 */
            --fill-primary: rgb(44, 44, 46);
            --fill-secondary: rgb(58, 58, 60);
            --fill-tertiary: rgb(72, 72, 74);
            --fill-quaternary: rgb(86, 86, 88);

            /* 阴影 - 深色模式 */
            --shadow-color: rgba(0, 0, 0, 0.3);
            --shadow-color-light: rgba(0, 0, 0, 0.15);
        }

        /* === 全局样式 === */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            font-size: 16px;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            text-rendering: optimizeLegibility;
            scroll-behavior: smooth;
        }

        body {
            font-family: var(--font-family);
            font-size: var(--font-size-body);
            line-height: var(--line-height-default);
            letter-spacing: var(--letter-spacing-default);
            color: var(--text-primary);
            background-color: var(--bg-primary);
            overflow: hidden;
            transition: background-color var(--duration-medium) var(--ease-default),
                        color var(--duration-medium) var(--ease-default);
        }

        /* === 动画效果 === */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes scaleIn {
            from {
                opacity: 0;
                transform: scale(0.95);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-8px);
            }
        }

        @keyframes bounce {
            0%, 20%, 53%, 80%, 100% {
                animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
                transform: translate3d(0,0,0);
            }
            40%, 43% {
                animation-timing-function: cubic-bezier(0.755, 0.050, 0.855, 0.060);
                transform: translate3d(0, -8px, 0);
            }
            70% {
                animation-timing-function: cubic-bezier(0.755, 0.050, 0.855, 0.060);
                transform: translate3d(0, -4px, 0);
            }
            90% {
                transform: translate3d(0,-2px,0);
            }
        }

        @keyframes glow {
            0%, 100% {
                box-shadow: var(--shadow-lg), var(--shadow-glow);
            }
            50% {
                box-shadow: var(--shadow-xl), var(--shadow-glow);
            }
        }

        @keyframes rotate {
            from {
                transform: rotate(0deg);
            }
            to {
                transform: rotate(360deg);
            }
        }

        @keyframes typing {
            from {
                width: 0;
            }
            to {
                width: 100%;
            }
        }

        @keyframes blink {
            from, to {
                border-color: transparent;
            }
            50% {
                border-color: var(--text-primary);
            }
        }

        /* === 滚动条样式 === */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--apple-lighter-gray);
            border-radius: var(--radius-full);
            border: 2px solid transparent;
            background-clip: padding-box;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--apple-light-gray);
            border: 2px solid transparent;
            background-clip: padding-box;
        }

        [data-theme="dark"] ::-webkit-scrollbar-thumb {
            background: var(--apple-medium-gray);
            border: 2px solid transparent;
            background-clip: padding-box;
        }

        [data-theme="dark"] ::-webkit-scrollbar-thumb:hover {
            background: var(--apple-light-gray);
            border: 2px solid transparent;
            background-clip: padding-box;
        }

        /* === 应用容器 === */
        .app-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            background: var(--bg-primary);
        }

        /* === macOS 风格标题栏 === */
        .titlebar {
            height: 52px;
            background: var(--bg-glass);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border-bottom: 1px solid var(--separator-transparent);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 var(--spacing-lg);
            position: relative;
            z-index: var(--z-sticky);
            flex-shrink: 0;
            transition: background-color var(--duration-medium) var(--ease-default),
                        border-color var(--duration-medium) var(--ease-default);
        }

        .titlebar-left {
            display: flex;
            align-items: center;
            gap: var(--spacing-lg);
        }

        .window-controls {
            display: flex;
            gap: var(--spacing-sm);
        }

        .window-control {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            cursor: pointer;
            transition: transform var(--duration-fast) var(--ease-default);
            position: relative;
        }

        .window-control::before {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: 50%;
            opacity: 0;
            transition: opacity var(--duration-fast) var(--ease-default);
        }

        .window-control:hover::before {
            opacity: 1;
        }

        .window-control.close { background: var(--apple-red); }
        .window-control.close::before { background: var(--apple-red-hover); }
        .window-control.minimize { background: var(--apple-yellow); }
        .window-control.minimize::before { background: var(--apple-yellow-hover); }
        .window-control.maximize { background: var(--apple-green); }
        .window-control.maximize::before { background: var(--apple-green-hover); }

        .titlebar-title {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            font-size: var(--font-size-caption1);
            font-weight: var(--font-weight-medium);
            color: var(--text-secondary);
            letter-spacing: var(--letter-spacing-default);
        }

        /* === 标题栏搜索框 === */
        .titlebar-search {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            width: 400px;
            max-width: calc(100% - 200px);
        }

        .titlebar-search-input {
            width: 100%;
            height: 32px;
            padding: 0 var(--spacing-md);
            border: none;
            border-radius: var(--radius-sm);
            background: var(--fill-secondary);
            font-size: var(--font-size-subheadline);
            font-family: var(--font-family);
            color: var(--text-primary);
            transition: all var(--duration-fast) var(--ease-default);
        }

        .titlebar-search-input:focus {
            outline: none;
            background: var(--bg-primary);
            box-shadow: 0 0 0 2px var(--apple-blue);
        }

        .titlebar-search-input::placeholder {
            color: var(--text-tertiary);
        }

        /* === 数据库下拉选择器 === */
        .database-selector {
            min-width: 120px;
            height: 32px;
            padding: 0 var(--spacing-md);
            border: none;
            border-radius: var(--radius-sm);
            background: var(--fill-secondary);
            font-size: var(--font-size-subheadline);
            font-family: var(--font-family);
            font-weight: var(--font-weight-medium);
            color: var(--text-primary);
            cursor: pointer;
            transition: all var(--duration-fast) var(--ease-default);
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23747478' d='M2 4l4 4 4-4'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right var(--spacing-md) center;
            padding-right: var(--spacing-2xl);
        }

        .database-selector:hover {
            background: var(--fill-tertiary);
        }

        .database-selector:focus {
            outline: none;
            background: var(--bg-primary);
            box-shadow: 0 0 0 2px var(--apple-blue);
        }

        .database-selector option {
            padding: var(--spacing-sm);
            background: var(--bg-primary);
            color: var(--text-primary);
        }

        .titlebar-right {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
        }

        /* === 数据库切换器 (分段控制器) === */
        .database-switcher {
            display: flex;
            background: var(--fill-secondary);
            border-radius: var(--radius-md);
            padding: var(--spacing-xs);
            gap: var(--spacing-xs);
            transition: background-color var(--duration-medium) var(--ease-default);
        }

        .database-option {
            padding: var(--spacing-xs) var(--spacing-md);
            border-radius: var(--radius-sm);
            font-size: var(--font-size-caption1);
            font-weight: var(--font-weight-medium);
            color: var(--text-secondary);
            cursor: pointer;
            transition: all var(--duration-fast) var(--ease-default);
            white-space: nowrap;
            position: relative;
            overflow: hidden;
        }

        .database-option::before {
            content: '';
            position: absolute;
            inset: 0;
            background: currentColor;
            opacity: 0;
            transition: opacity var(--duration-fast) var(--ease-default);
        }

        .database-option:hover {
            color: var(--text-primary);
        }

        .database-option:hover::before {
            opacity: 0.05;
        }

        .database-option.active {
            background: var(--bg-primary);
            color: var(--text-primary);
            box-shadow: var(--shadow-sm);
        }

        /* === 主题切换按钮 === */
        .theme-toggle {
            width: 36px;
            height: 36px;
            border-radius: var(--radius-sm);
            border: none;
            background: transparent;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
            transition: all var(--duration-fast) var(--ease-default);
        }

        .theme-toggle:hover {
            background: var(--fill-secondary);
            color: var(--text-primary);
        }

        .theme-toggle svg {
            width: 20px;
            height: 20px;
        }

        /* === 设置按钮 === */
        .settings-btn {
            width: 32px;
            height: 32px;
            border-radius: var(--radius-sm);
            border: none;
            background: transparent;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
            transition: all var(--duration-fast) var(--ease-default);
        }

        .settings-btn:hover {
            background: var(--fill-secondary);
            color: var(--text-primary);
        }

        /* === 主布局 === */
        .main-layout {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        /* === 左侧边栏 === */
        .sidebar {
            width: 280px;
            background: var(--bg-secondary);
            border-right: 1px solid var(--separator-transparent);
            display: flex;
            flex-direction: column;
            transition: width var(--duration-medium) var(--ease-default),
                        background-color var(--duration-medium) var(--ease-default),
                        border-color var(--duration-medium) var(--ease-default);
        }

        .sidebar.collapsed {
            width: 0;
            overflow: hidden;
        }

        .sidebar-header {
            padding: var(--spacing-lg);
            border-bottom: 1px solid var(--separator-transparent);
        }

        .search-input {
            width: 100%;
            height: 36px;
            padding: 0 var(--spacing-md);
            border: 1px solid var(--separator-transparent);
            border-radius: var(--radius-md);
            background: var(--fill-primary);
            font-size: var(--font-size-subheadline);
            color: var(--text-primary);
            transition: all var(--duration-fast) var(--ease-default);
            position: relative;
            overflow: hidden;
        }

        .search-input::before {
            content: '';
            position: absolute;
            top: 50%;
            left: -100%;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--apple-blue), transparent);
            transform: translateY(-50%);
            transition: left var(--duration-medium) var(--ease-default);
            z-index: 1;
        }

        .search-input:focus {
            outline: none;
            background: var(--bg-primary);
            border-color: var(--apple-blue);
            box-shadow: 0 0 0 4px rgba(0, 102, 204, 0.15);
            transform: scale(1.02);
        }

        .search-input:focus::before {
            left: 100%;
        }

        .search-input::placeholder {
            color: var(--text-tertiary);
            transition: color var(--duration-fast) var(--ease-default);
        }

        .search-input:focus::placeholder {
            color: var(--text-quaternary);
        }

        /* === 侧边栏导航 === */
        .sidebar-nav {
            flex: 1;
            overflow-y: auto;
            overflow-x: hidden;
            padding: var(--spacing-sm) 0;
        }

        .nav-section {
            margin-bottom: var(--spacing-md);
        }

        .nav-section-header {
            padding: 0 var(--spacing-lg);
            margin-bottom: var(--spacing-xs);
            font-size: var(--font-size-caption1);
            font-weight: var(--font-weight-semibold);
            color: var(--text-tertiary);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            padding: var(--spacing-xs) var(--spacing-lg);
            margin: 0 var(--spacing-sm);
            border-radius: var(--radius-md);
            font-size: var(--font-size-callout);
            color: var(--text-primary);
            text-decoration: none;
            cursor: pointer;
            transition: all var(--duration-fast) var(--ease-default);
            position: relative;
            overflow: hidden;
            transform: translateX(0);
        }

        .nav-item::before {
            content: '';
            position: absolute;
            inset: 0;
            background: currentColor;
            opacity: 0;
            border-radius: var(--radius-md);
            transition: opacity var(--duration-fast) var(--ease-default);
        }

        .nav-item:hover {
            color: var(--text-primary);
            transform: translateX(4px);
        }

        .nav-item:hover::before {
            opacity: 0.05;
        }

        .nav-item.active {
            background: var(--apple-blue);
            color: white;
            transform: translateX(4px);
        }

        .nav-item.active::before {
            opacity: 0;
        }

        .nav-item:active {
            transform: translateX(4px) scale(0.98);
            transition: all var(--duration-fast) var(--ease-default);
        }

        .nav-item-icon {
            width: 18px;
            height: 18px;
            flex-shrink: 0;
            position: relative;
            z-index: 1;
            transition: transform var(--duration-fast) var(--ease-default);
        }

        .nav-item:hover .nav-item-icon {
            transform: scale(1.1) rotate(5deg);
        }

        .nav-item-label {
            flex: 1;
            position: relative;
            z-index: 1;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .nav-item-badge {
            margin-left: var(--spacing-sm);
            padding: 2px var(--spacing-xs);
            background: var(--apple-blue);
            color: white;
            font-size: 10px;
            font-weight: var(--font-weight-semibold);
            border-radius: var(--radius-full);
            min-width: 18px;
            text-align: center;
            position: relative;
            z-index: 1;
            transition: all var(--duration-fast) var(--ease-default);
        }

        .nav-item:hover .nav-item-badge {
            background: var(--apple-blue-hover);
            transform: scale(1.1);
        }

        .nav-item.active .nav-item-badge {
            background: rgba(255, 255, 255, 0.25);
        }

        /* === 侧边栏底部 === */
        .sidebar-footer {
            padding: var(--spacing-lg);
            border-top: 1px solid var(--separator-transparent);
        }

        .sidebar-toggle {
            width: 100%;
            height: 36px;
            padding: 0 var(--spacing-md);
            border: none;
            border-radius: var(--radius-md);
            background: transparent;
            font-size: var(--font-size-subheadline);
            font-family: var(--font-family);
            color: var(--text-secondary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--spacing-sm);
            transition: all var(--duration-fast) var(--ease-default);
        }

        .sidebar-toggle:hover {
            background: var(--fill-secondary);
            color: var(--text-primary);
        }

        .sidebar-toggle svg {
            width: 16px;
            height: 16px;
        }

        /* === 主内容区 === */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            background: var(--bg-primary);
            transition: background-color var(--duration-medium) var(--ease-default);
        }

        /* === 标签页栏 === */
        .tabbar {
            height: 44px;
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--separator-transparent);
            display: flex;
            align-items: flex-end;
            padding: 0 var(--spacing-sm);
            gap: var(--spacing-xs);
            flex-shrink: 0;
            transition: background-color var(--duration-medium) var(--ease-default),
                        border-color var(--duration-medium) var(--ease-default);
        }

        .tab {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            padding: var(--spacing-sm) var(--spacing-md);
            background: var(--bg-tertiary);
            border: 1px solid var(--separator-transparent);
            border-bottom: none;
            border-radius: var(--radius-md) var(--radius-md) 0 0;
            font-size: var(--font-size-subheadline);
            color: var(--text-secondary);
            cursor: pointer;
            transition: all var(--duration-fast) var(--ease-default);
            max-width: 200px;
            position: relative;
        }

        .tab::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            right: 0;
            height: 1px;
            background: transparent;
            transition: background var(--duration-fast) var(--ease-default);
        }

        .tab:hover {
            background: var(--bg-elevated);
        }

        .tab.active {
            background: var(--bg-primary);
            color: var(--text-primary);
        }

        .tab.active::after {
            background: var(--bg-primary);
        }

        .tab-icon {
            width: 14px;
            height: 14px;
            flex-shrink: 0;
        }

        .tab-title {
            flex: 1;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .tab-close {
            width: 18px;
            height: 18px;
            border-radius: var(--radius-xs);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: all var(--duration-fast) var(--ease-default);
            flex-shrink: 0;
        }

        .tab:hover .tab-close {
            opacity: 0.5;
        }

        .tab-close:hover {
            opacity: 1 !important;
            background: var(--fill-secondary);
        }

        .tab.pinned .tab-close {
            opacity: 0;
        }

        .tab-new {
            width: 32px;
            height: 32px;
            border-radius: var(--radius-sm);
            border: none;
            background: transparent;
            color: var(--text-tertiary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all var(--duration-fast) var(--ease-default);
            flex-shrink: 0;
        }

        .tab-new:hover {
            background: var(--fill-secondary);
            color: var(--text-primary);
        }

        .tab-new svg {
            width: 16px;
            height: 16px;
        }

        /* === 内容区域 === */
        .content-area {
            flex: 1;
            overflow-y: auto;
            overflow-x: hidden;
        }

        /* === 搜索页面 === */
        .search-page {
            max-width: 980px;
            margin: 0 auto;
            padding: var(--spacing-3xl) var(--spacing-xl);
        }

        .search-hero {
            text-align: center;
            padding: var(--spacing-3xl) 0 var(--spacing-4xl);
        }

        .search-hero-icon {
            width: 64px;
            height: 64px;
            margin: 0 auto var(--spacing-lg);
            background: var(--gradient-blue);
            border-radius: var(--radius-xl);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 32px;
            box-shadow: var(--shadow-lg), var(--shadow-glow);
            animation: pulse 2s ease-in-out infinite;
        }

        /* === 英雄区域 === */
        .hero-section {
            text-align: center;
            padding: var(--spacing-4xl) 0;
            background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
            border-radius: var(--radius-2xl);
            margin: var(--spacing-2xl) 0;
            position: relative;
            overflow: hidden;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(0, 102, 204, 0.05) 0%, transparent 70%);
            animation: float 6s ease-in-out infinite;
        }

        .hero-content {
            position: relative;
            z-index: 1;
        }

        .hero-greeting {
            font-size: var(--font-size-large-title);
            font-weight: var(--font-weight-semibold);
            color: var(--text-primary);
            margin-bottom: var(--spacing-md);
            letter-spacing: var(--letter-spacing-tight);
            animation: fadeInUp 0.6s ease-out;
        }

        .hero-tagline {
            font-size: var(--font-size-title2);
            font-weight: var(--font-weight-semibold);
            color: var(--apple-blue);
            margin-bottom: var(--spacing-lg);
            letter-spacing: var(--letter-spacing-tight);
            animation: fadeInUp 0.8s ease-out;
        }

        .hero-subtitle {
            font-size: var(--font-size-headline);
            font-weight: var(--font-weight-regular);
            color: var(--text-secondary);
            margin-bottom: var(--spacing-2xl);
            animation: fadeInUp 1s ease-out;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* === 模块化系统 === */
        .modules-section {
            margin: var(--spacing-3xl) 0;
        }

        .modules-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: var(--spacing-lg);
            margin-top: var(--spacing-xl);
        }

        .module {
            background: var(--bg-secondary);
            border-radius: var(--radius-xl);
            padding: var(--spacing-xl);
            cursor: pointer;
            transition: all var(--duration-medium) var(--ease-default);
            border: 1px solid var(--separator-transparent);
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .module::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, transparent 0%, rgba(0, 102, 204, 0.03) 100%);
            opacity: 0;
            transition: opacity var(--duration-fast) var(--ease-default);
        }

        .module:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
            border-color: var(--separator-heavy);
        }

        .module:hover::before {
            opacity: 1;
        }

        .module:active {
            transform: translateY(-2px);
        }

        /* 模块尺寸 */
        .module-standard {
            grid-column: span 1;
            min-height: 200px;
        }

        .module-double {
            grid-column: span 2;
            min-height: 200px;
        }

        .module-full {
            grid-column: span 4;
            min-height: 150px;
        }

        .module-icon {
            width: 64px;
            height: 64px;
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            margin-bottom: var(--spacing-lg);
            position: relative;
            z-index: 1;
            transition: all var(--duration-medium) var(--ease-default);
        }

        .module:hover .module-icon {
            transform: scale(1.1);
        }

        /* 模块图标颜色 */
        .module-icon-blue { background: var(--gradient-blue); color: white; }
        .module-icon-green { background: var(--gradient-green); color: white; }
        .module-icon-orange { background: var(--gradient-orange); color: white; }
        .module-icon-purple { background: var(--gradient-purple); color: white; }
        .module-icon-red { background: var(--gradient-red); color: white; }
        .module-icon-indigo { background: var(--gradient-indigo); color: white; }
        .module-icon-teal { background: var(--gradient-blue); color: white; }

        .module-title {
            font-size: var(--font-size-headline);
            font-weight: var(--font-weight-semibold);
            color: var(--text-primary);
            margin-bottom: var(--spacing-xs);
            position: relative;
            z-index: 1;
        }

        .module-description {
            font-size: var(--font-size-subheadline);
            color: var(--text-secondary);
            position: relative;
            z-index: 1;
            line-height: var(--line-height-relaxed);
        }

        /* === 模块控制元素 === */
        .module-controls {
            position: absolute;
            top: var(--spacing-sm);
            right: var(--spacing-sm);
            display: flex;
            gap: var(--spacing-xs);
            opacity: 0;
            transition: opacity var(--duration-fast) var(--ease-default);
            z-index: 2;
        }

        .module:hover .module-controls {
            opacity: 1;
        }

        .module-drag-handle {
            width: 24px;
            height: 24px;
            border-radius: var(--radius-sm);
            background: rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
            cursor: grab;
            transition: all var(--duration-fast) var(--ease-default);
            user-select: none;
        }

        .module-drag-handle:hover {
            background: rgba(0, 0, 0, 0.15);
            transform: scale(1.05);
        }

        .module-drag-handle:active {
            cursor: grabbing;
            transform: scale(0.95);
        }

        .module-resize {
            width: 24px;
            height: 24px;
            border-radius: var(--radius-sm);
            background: rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            cursor: pointer;
            transition: all var(--duration-fast) var(--ease-default);
            -webkit-user-select: none;
            user-select: none;
        }

        .module-resize:hover {
            background: rgba(0, 0, 0, 0.15);
            transform: scale(1.05);
        }

        [data-theme="dark"] .module-drag-handle,
        [data-theme="dark"] .module-resize {
            background: rgba(255, 255, 255, 0.1);
        }

        [data-theme="dark"] .module-drag-handle:hover,
        [data-theme="dark"] .module-resize:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        /* === 智能推荐模块 === */
        .recommendations-section {
            margin: var(--spacing-3xl) 0;
        }

        .recommendations-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--spacing-lg);
            margin-top: var(--spacing-xl);
        }

        .recommendation-card {
            background: var(--bg-secondary);
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
            cursor: pointer;
            transition: all var(--duration-medium) var(--ease-default);
            border: 1px solid var(--separator-transparent);
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .recommendation-card::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, transparent 0%, rgba(0, 102, 204, 0.05) 100%);
            opacity: 0;
            transition: opacity var(--duration-fast) var(--ease-default);
        }

        .recommendation-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
            border-color: var(--apple-blue);
        }

        .recommendation-card:hover::before {
            opacity: 1;
        }

        .recommendation-icon {
            width: 48px;
            height: 48px;
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            margin-bottom: var(--spacing-md);
            position: relative;
            z-index: 1;
        }

        .recommendation-title {
            font-size: var(--font-size-callout);
            font-weight: var(--font-weight-semibold);
            color: var(--text-primary);
            margin-bottom: var(--spacing-xs);
            position: relative;
            z-index: 1;
        }

        .recommendation-subtitle {
            font-size: var(--font-size-footnote);
            color: var(--text-secondary);
            position: relative;
            z-index: 1;
        }

        /* 推荐理由标签 */
        .recommendation-reason {
            position: absolute;
            top: var(--spacing-xs);
            left: var(--spacing-xs);
            padding: 2px var(--spacing-xs);
            background: var(--apple-blue);
            color: white;
            font-size: 10px;
            font-weight: var(--font-weight-medium);
            border-radius: var(--radius-xs);
            z-index: 2;
        }

        /* === 数据可视化模块 === */
        .visualization-section {
            margin: var(--spacing-3xl) 0;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: var(--spacing-xl);
        }

        .visualization-card {
            background: var(--bg-secondary);
            border-radius: var(--radius-xl);
            padding: var(--spacing-xl);
            border: 1px solid var(--separator-transparent);
            transition: all var(--duration-medium) var(--ease-default);
            position: relative;
            overflow: hidden;
        }

        .visualization-card::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, transparent 0%, rgba(0, 102, 204, 0.03) 100%);
            opacity: 0;
            transition: opacity var(--duration-fast) var(--ease-default);
        }

        .visualization-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
            border-color: var(--separator-heavy);
        }

        .visualization-card:hover::before {
            opacity: 1;
        }

        .visualization-card .section-header {
            margin-bottom: var(--spacing-xl);
        }

        .visualization-card .section-subtitle {
            font-size: var(--font-size-caption1);
            color: var(--text-tertiary);
            margin-top: var(--spacing-xs);
        }

        .chart-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--spacing-xl);
            flex-wrap: wrap;
        }

        /* 图表样式 */
        .pie-chart,
        .line-chart,
        .bar-chart,
        .graph-chart,
        .doughnut-chart {
            transition: all var(--duration-medium) var(--ease-default);
        }

        .pie-chart:hover,
        .line-chart:hover,
        .bar-chart:hover,
        .graph-chart:hover,
        .doughnut-chart:hover {
            transform: scale(1.02);
        }

        /* 图例样式 */
        .chart-legend {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-sm);
            min-width: 150px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            font-size: var(--font-size-caption1);
            color: var(--text-secondary);
        }

        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: var(--radius-xs);
            flex-shrink: 0;
        }

        /* 网格线样式 */
        .grid line {
            stroke-dasharray: 3, 3;
        }

        /* 响应式设计 */
        @media (max-width: 1200px) {
            .visualization-section {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .visualization-card {
                padding: var(--spacing-lg);
            }
            
            .chart-container {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .pie-chart,
            .line-chart,
            .bar-chart,
            .graph-chart,
            .doughnut-chart {
                width: 100%;
                max-width: 100%;
            }
            
            .chart-legend {
                width: 100%;
                flex-direction: row;
                flex-wrap: wrap;
                gap: var(--spacing-md);
            }
        }

        /* 响应式设计 */
        @media (max-width: 1200px) {
            .search-page {
                padding: var(--spacing-2xl) var(--spacing-lg);
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 1024px) {
            .titlebar-search {
                max-width: calc(100% - 150px);
            }
            
            .titlebar-search-input {
                width: 100%;
            }
            
            .hero-section {
                padding: var(--spacing-3xl) 0;
            }
            
            .hero-greeting {
                font-size: var(--font-size-title1);
            }
            
            .hero-tagline {
                font-size: var(--font-size-title3);
            }
            
            .modules-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .module-standard {
                grid-column: span 1;
            }
            
            .module-double {
                grid-column: span 1;
            }
            
            .module-full {
                grid-column: span 2;
            }
            
            .recommendations-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .titlebar {
                padding: 0 var(--spacing-md);
            }
            
            .titlebar-search {
                display: none;
            }
            
            .titlebar-right {
                gap: var(--spacing-sm);
            }
            
            .database-switcher {
                display: none;
            }
            
            .sidebar {
                width: 240px;
            }
            
            .hero-section {
                padding: var(--spacing-2xl) 0;
                margin: var(--spacing-xl) 0;
            }
            
            .hero-greeting {
                font-size: var(--font-size-title2);
            }
            
            .hero-tagline {
                font-size: var(--font-size-headline);
            }
            
            .hero-subtitle {
                font-size: var(--font-size-body);
            }
            
            .search-box-large {
                max-width: 90%;
            }
            
            .search-input-large {
                height: 48px;
                font-size: var(--font-size-body);
            }
            
            .modules-grid {
                grid-template-columns: 1fr;
                gap: var(--spacing-md);
            }
            
            .module-standard,
            .module-double,
            .module-full {
                grid-column: span 1;
            }
            
            .recommendations-grid {
                grid-template-columns: 1fr;
                gap: var(--spacing-md);
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: var(--spacing-md);
            }
            
            .stat-card {
                padding: var(--spacing-lg);
            }
            
            .stat-value {
                font-size: var(--font-size-title1);
            }
            
            .section-header {
                flex-direction: column;
                align-items: flex-start;
                gap: var(--spacing-sm);
            }
            
            .section-action {
                font-size: var(--font-size-subheadline);
            }
        }

        @media (max-width: 480px) {
            .titlebar {
                height: 48px;
            }
            
            .window-controls {
                gap: var(--spacing-xs);
            }
            
            .window-control {
                width: 10px;
                height: 10px;
            }
            
            .titlebar-title {
                font-size: 11px;
            }
            
            .theme-toggle {
                width: 32px;
                height: 32px;
            }
            
            .theme-toggle svg {
                width: 16px;
                height: 16px;
            }
            
            .sidebar {
                width: 200px;
            }
            
            .hero-section {
                padding: var(--spacing-xl) 0;
                margin: var(--spacing-lg) 0;
            }
            
            .hero-greeting {
                font-size: var(--font-size-title3);
                margin-bottom: var(--spacing-sm);
            }
            
            .hero-tagline {
                font-size: var(--font-size-body);
                margin-bottom: var(--spacing-md);
            }
            
            .hero-subtitle {
                font-size: var(--font-size-subheadline);
                margin-bottom: var(--spacing-xl);
            }
            
            .search-box-large {
                max-width: 95%;
            }
            
            .search-input-large {
                height: 44px;
                padding: 0 var(--spacing-lg);
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .stat-card {
                padding: var(--spacing-md);
            }
            
            .stat-value {
                font-size: var(--font-size-title2);
            }
            
            .module {
                padding: var(--spacing-lg);
                min-height: 180px;
            }
            
            .module-icon {
                width: 56px;
                height: 56px;
                font-size: 24px;
            }
            
            .module-title {
                font-size: var(--font-size-body);
            }
            
            .module-description {
                font-size: var(--font-size-footnote);
            }
        }

        @keyframes pulse {
            0% {
                box-shadow: var(--shadow-lg), var(--shadow-glow);
            }
            50% {
                box-shadow: var(--shadow-xl), var(--shadow-glow);
            }
            100% {
                box-shadow: var(--shadow-lg), var(--shadow-glow);
            }
        }

        .search-hero-title {
            font-size: var(--font-size-title2);
            font-weight: var(--font-weight-semibold);
            letter-spacing: var(--letter-spacing-tight);
            margin-bottom: var(--spacing-md);
            color: var(--text-primary);
        }

        .search-hero-subtitle {
            font-size: var(--font-size-title3);
            font-weight: var(--font-weight-regular);
            color: var(--text-secondary);
            margin-bottom: var(--spacing-2xl);
        }

        .search-box-large {
            position: relative;
            max-width: 680px;
            margin: 0 auto;
        }

        .search-input-large {
            width: 100%;
            height: 56px;
            padding: 0 var(--spacing-xl) 0 var(--spacing-lg);
            border: none;
            border-radius: var(--radius-xl);
            background: var(--bg-secondary);
            font-size: var(--font-size-headline);
            font-family: var(--font-family);
            color: var(--text-primary);
            box-shadow: var(--shadow-md);
            transition: all var(--duration-fast) var(--ease-default);
        }

        .search-input-large:focus {
            outline: none;
            background: var(--bg-primary);
            box-shadow: 0 0 0 4px rgba(0, 102, 204, 0.15), var(--shadow-lg);
        }

        .search-input-large::placeholder {
            color: var(--text-tertiary);
        }

        /* === 下拉选择框样式 === */
        select {
            height: 44px;
            padding: 0 var(--spacing-lg);
            border: none;
            border-radius: var(--radius-md);
            background: var(--bg-secondary);
            font-size: var(--font-size-body);
            font-family: var(--font-family);
            color: var(--text-primary);
            box-shadow: var(--shadow-sm);
            transition: all var(--duration-fast) var(--ease-default);
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16' fill='none' stroke='currentColor' stroke-width='1.5'%3E%3Cpath d='M4 6l4 4 4-4'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right var(--spacing-md) center;
        }

        select:focus {
            outline: none;
            background: var(--bg-primary);
            box-shadow: 0 0 0 4px rgba(0, 102, 204, 0.15), var(--shadow-md);
        }

        /* 搜索范围选择框特殊样式 */
        #searchScope {
            height: 56px;
            border-radius: 0 var(--radius-xl) var(--radius-xl) 0;
            border-left: 1px solid var(--separator-transparent);
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16' fill='none' stroke='currentColor' stroke-width='1.5'%3E%3Cpath d='M4 6l4 4 4-4'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right var(--spacing-lg) center;
        }

        .search-suggestions {
            position: absolute;
            top: calc(100% + var(--spacing-sm));
            left: 0;
            right: 0;
            background: var(--bg-glass-heavy);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-xl);
            overflow: hidden;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-8px);
            transition: all var(--duration-fast) var(--ease-out);
            border: 1px solid var(--separator-transparent);
        }

        .search-suggestions.visible {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .suggestion-section {
            padding: var(--spacing-sm) 0;
            border-bottom: 1px solid var(--separator-transparent);
        }

        .suggestion-section:last-child {
            border-bottom: none;
        }

        .suggestion-section-title {
            padding: 0 var(--spacing-lg);
            font-size: var(--font-size-caption1);
            font-weight: var(--font-weight-semibold);
            color: var(--text-tertiary);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .suggestion-item {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            padding: var(--spacing-sm) var(--spacing-lg);
            cursor: pointer;
            transition: background var(--duration-fast) var(--ease-default);
        }

        .suggestion-item:hover {
            background: var(--fill-secondary);
        }

        .suggestion-item-icon {
            width: 36px;
            height: 36px;
            border-radius: var(--radius-md);
            background: var(--apple-blue);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
            flex-shrink: 0;
        }

        .suggestion-item-content {
            flex: 1;
            min-width: 0;
        }

        .suggestion-item-title {
            font-size: var(--font-size-callout);
            font-weight: var(--font-weight-medium);
            color: var(--text-primary);
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .suggestion-item-meta {
            font-size: var(--font-size-footnote);
            color: var(--text-tertiary);
        }

        .suggestion-item-shortcut {
            padding: var(--spacing-xs) var(--spacing-sm);
            background: var(--fill-tertiary);
            border-radius: var(--radius-xs);
            font-size: var(--font-size-caption2);
            font-weight: var(--font-weight-medium);
            color: var(--text-secondary);
        }

        /* === 统计卡片 === */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: var(--spacing-lg);
            margin-bottom: var(--spacing-3xl);
        }

        .stat-card {
            background: var(--bg-secondary);
            border-radius: var(--radius-lg);
            padding: var(--spacing-xl);
            text-align: center;
            border: 1px solid var(--separator-transparent);
            transition: all var(--duration-fast) var(--ease-default);
        }

        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .stat-icon {
            width: 48px;
            height: 48px;
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto var(--spacing-md);
            font-size: 24px;
        }

        .stat-icon.blue { background: rgba(0, 102, 204, 0.1); }
        .stat-icon.green { background: rgba(0, 217, 89, 0.1); }
        .stat-icon.orange { background: rgba(255, 149, 0, 0.1); }
        .stat-icon.purple { background: rgba(175, 82, 222, 0.1); }

        [data-theme="dark"] .stat-icon.blue { background: rgba(0, 102, 204, 0.2); }
        [data-theme="dark"] .stat-icon.green { background: rgba(0, 217, 89, 0.2); }
        [data-theme="dark"] .stat-icon.orange { background: rgba(255, 149, 0, 0.2); }
        [data-theme="dark"] .stat-icon.purple { background: rgba(175, 82, 222, 0.2); }

        .stat-value {
            font-size: var(--font-size-large-title);
            font-weight: var(--font-weight-bold);
            color: var(--text-primary);
            margin-bottom: var(--spacing-xs);
            line-height: var(--line-height-tight);
        }

        .stat-label {
            font-size: var(--font-size-subheadline);
            color: var(--text-secondary);
        }

        /* === 快速访问 === */
        .quick-access {
            margin-bottom: var(--spacing-3xl);
        }

        .section-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: var(--spacing-lg);
        }

        .section-title {
            font-size: var(--font-size-title3);
            font-weight: var(--font-weight-semibold);
            color: var(--text-primary);
        }

        .section-action {
            font-size: var(--font-size-callout);
            font-weight: var(--font-weight-medium);
            color: var(--apple-blue);
            text-decoration: none;
            transition: color var(--duration-fast) var(--ease-default);
        }

        .section-action:hover {
            color: var(--apple-blue-hover);
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
            gap: var(--spacing-lg);
        }

        .card {
            background: var(--bg-secondary);
            border-radius: var(--radius-lg);
            padding: var(--spacing-xl);
            cursor: pointer;
            transition: all var(--duration-fast) var(--ease-default);
            border: 1px solid var(--separator-transparent);
            position: relative;
            overflow: hidden;
            transform: translateY(0);
        }

        .card::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, transparent 0%, rgba(0, 102, 204, 0.03) 100%);
            opacity: 0;
            transition: opacity var(--duration-fast) var(--ease-default);
        }

        .card:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: var(--shadow-lg);
            border-color: var(--separator-heavy);
        }

        .card:hover::before {
            opacity: 1;
        }

        .card:active {
            transform: scale(0.98);
        }

        .card {
            animation: cardSlideIn 0.3s ease-out forwards;
            opacity: 0;
        }

        .card:nth-child(1) { animation-delay: 0.05s; }
        .card:nth-child(2) { animation-delay: 0.1s; }
        .card:nth-child(3) { animation-delay: 0.15s; }
        .card:nth-child(4) { animation-delay: 0.2s; }
        .card:nth-child(5) { animation-delay: 0.25s; }
        .card:nth-child(6) { animation-delay: 0.3s; }

        @keyframes cardSlideIn {
            from {
                opacity: 0;
                transform: translateY(20px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .card-icon {
            width: 56px;
            height: 56px;
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: var(--spacing-md);
            font-size: 28px;
            position: relative;
            z-index: 1;
        }

        .card-icon.blue { background: var(--gradient-blue); box-shadow: var(--shadow-glow); }
        .card-icon.green { background: var(--gradient-green); box-shadow: var(--shadow-glow-green); }
        .card-icon.orange { background: var(--gradient-orange); box-shadow: var(--shadow-glow-orange); }
        .card-icon.purple { background: var(--gradient-purple); box-shadow: var(--shadow-glow-purple); }
        .card-icon.red { background: var(--gradient-red); }
        .card-icon.indigo { background: var(--gradient-indigo); }

        .card-icon {
            transition: all var(--duration-medium) var(--ease-default);
        }

        .card:hover .card-icon {
            transform: scale(1.1);
            box-shadow: var(--shadow-lg), var(--shadow-glow);
        }

        .card-title {
            font-size: var(--font-size-headline);
            font-weight: var(--font-weight-semibold);
            color: var(--text-primary);
            margin-bottom: var(--spacing-xs);
            position: relative;
            z-index: 1;
        }

        .card-subtitle {
            font-size: var(--font-size-subheadline);
            color: var(--text-secondary);
            position: relative;
            z-index: 1;
        }

        .card-badge {
            position: absolute;
            top: var(--spacing-md);
            right: var(--spacing-md);
            padding: 4px var(--spacing-sm);
            background: var(--apple-blue);
            color: white;
            font-size: var(--font-size-caption2);
            font-weight: var(--font-weight-semibold);
            border-radius: var(--radius-full);
        }

        /* === 文档列表 === */
        .document-list {
            background: var(--bg-secondary);
            border-radius: var(--radius-lg);
            overflow: hidden;
            border: 1px solid var(--separator-transparent);
        }

        .document-item {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            padding: var(--spacing-md) var(--spacing-lg);
            border-bottom: 1px solid var(--separator-transparent);
            cursor: pointer;
            transition: all var(--duration-fast) var(--ease-default);
            transform: translateX(0);
            opacity: 1;
        }

        .document-item:last-child {
            border-bottom: none;
        }

        .document-item:hover {
            background: var(--fill-secondary);
            transform: translateX(8px);
            border-left: 3px solid var(--apple-blue);
        }

        .document-item {
            animation: documentSlideIn 0.3s ease-out forwards;
            opacity: 0;
        }

        .document-item:nth-child(1) { animation-delay: 0.05s; }
        .document-item:nth-child(2) { animation-delay: 0.1s; }
        .document-item:nth-child(3) { animation-delay: 0.15s; }
        .document-item:nth-child(4) { animation-delay: 0.2s; }
        .document-item:nth-child(5) { animation-delay: 0.25s; }

        @keyframes documentSlideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .document-icon {
            width: 44px;
            height: 44px;
            border-radius: var(--radius-md);
            background: var(--apple-blue);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 20px;
            flex-shrink: 0;
        }

        .document-icon.green { background: var(--apple-green); }
        .document-icon.orange { background: var(--apple-orange); }
        .document-icon.purple { background: var(--apple-purple); }
        .document-icon.red { background: var(--apple-red); }
        .document-icon.blue { background: var(--apple-blue); }

        .document-content {
            flex: 1;
            min-width: 0;
        }

        .document-title {
            font-size: var(--font-size-callout);
            font-weight: var(--font-weight-medium);
            color: var(--text-primary);
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            margin-bottom: 4px;
        }

        .document-meta {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            font-size: var(--font-size-footnote);
            color: var(--text-tertiary);
        }

        .document-menu {
            width: 32px;
            height: 32px;
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-tertiary);
            opacity: 0;
            transition: all var(--duration-fast) var(--ease-default);
            flex-shrink: 0;
        }

        .document-item:hover .document-menu {
            opacity: 0.5;
        }

        .document-menu:hover {
            opacity: 1 !important;
            background: var(--fill-tertiary);
        }

        /* === 标签 === */
        .tag {
            display: inline-flex;
            align-items: center;
            gap: var(--spacing-xs);
            padding: var(--spacing-xs) var(--spacing-sm);
            border-radius: var(--radius-full);
            font-size: var(--font-size-caption1);
            font-weight: var(--font-weight-medium);
        }

        .tag-blue { background: rgba(0, 102, 204, 0.1); color: var(--apple-blue); }
        .tag-green { background: rgba(0, 217, 89, 0.1); color: var(--apple-green); }
        .tag-red { background: rgba(175, 30, 45, 0.1); color: var(--apple-red); }
        .tag-orange { background: rgba(255, 149, 0, 0.1); color: var(--apple-orange); }
        .tag-yellow { background: rgba(255, 204, 0, 0.1); color: var(--apple-yellow); }
        .tag-purple { background: rgba(175, 82, 222, 0.1); color: var(--apple-purple); }
        .tag-pink { background: rgba(255, 45, 85, 0.1); color: var(--apple-pink); }
        .tag-teal { background: rgba(85, 190, 240, 0.1); color: var(--apple-teal); }
        .tag-indigo { background: rgba(94, 92, 230, 0.1); color: var(--apple-indigo); }

        [data-theme="dark"] .tag-blue { background: rgba(0, 102, 204, 0.2); }
        [data-theme="dark"] .tag-green { background: rgba(0, 217, 89, 0.2); }
        [data-theme="dark"] .tag-red { background: rgba(175, 30, 45, 0.2); }
        [data-theme="dark"] .tag-orange { background: rgba(255, 149, 0, 0.2); }
        [data-theme="dark"] .tag-yellow { background: rgba(255, 204, 0, 0.2); }
        [data-theme="dark"] .tag-purple { background: rgba(175, 82, 222, 0.2); }
        [data-theme="dark"] .tag-pink { background: rgba(255, 45, 85, 0.2); }
        [data-theme="dark"] .tag-teal { background: rgba(85, 190, 240, 0.2); }
        [data-theme="dark"] .tag-indigo { background: rgba(94, 92, 230, 0.2); }

        .tag-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: currentColor;
        }

        /* === 命令面板 (模态框) === */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: var(--bg-overlay);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            display: flex;
            align-items: flex-start;
            justify-content: center;
            padding-top: 15vh;
            z-index: var(--z-modal);
            opacity: 0;
            visibility: hidden;
            transition: all var(--duration-fast) var(--ease-default);
        }

        .modal-overlay.visible {
            opacity: 1;
            visibility: visible;
        }

        .command-palette {
            width: 600px;
            max-height: 480px;
            background: var(--bg-modal);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-2xl);
            overflow: hidden;
            transform: scale(0.95) translateY(-16px);
            transition: all var(--duration-fast) var(--ease-out);
            border: 1px solid var(--separator-transparent);
        }

        .modal-overlay.visible .command-palette {
            transform: scale(1) translateY(0);
        }

        .command-input-wrapper {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            padding: var(--spacing-md) var(--spacing-lg);
            border-bottom: 1px solid var(--separator-transparent);
        }

        .command-icon {
            width: 22px;
            height: 22px;
            color: var(--text-tertiary);
        }

        .command-input {
            flex: 1;
            height: 36px;
            border: none;
            background: transparent;
            font-size: var(--font-size-callout);
            font-family: var(--font-family);
            color: var(--text-primary);
        }

        .command-input:focus {
            outline: none;
        }

        .command-shortcut {
            padding: var(--spacing-xs) var(--spacing-sm);
            background: var(--fill-secondary);
            border-radius: var(--radius-sm);
            font-size: var(--font-size-caption1);
            font-weight: var(--font-weight-medium);
            color: var(--text-secondary);
        }

        .command-list {
            max-height: 380px;
            overflow-y: auto;
            padding: var(--spacing-sm) 0;
        }

        .command-section {
            padding: 0 var(--spacing-lg);
            margin-bottom: var(--spacing-sm);
        }

        .command-section-title {
            font-size: var(--font-size-caption1);
            font-weight: var(--font-weight-semibold);
            color: var(--text-tertiary);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            padding: var(--spacing-sm) 0;
        }

        .command-item {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            padding: var(--spacing-sm) var(--spacing-md);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: background var(--duration-fast) var(--ease-default);
        }

        .command-item:hover {
            background: var(--fill-secondary);
        }

        .command-item-icon {
            width: 36px;
            height: 36px;
            border-radius: var(--radius-md);
            background: var(--apple-blue);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
            flex-shrink: 0;
        }

        .command-item-content {
            flex: 1;
            min-width: 0;
        }

        .command-item-title {
            font-size: var(--font-size-callout);
            font-weight: var(--font-weight-medium);
            color: var(--text-primary);
        }

        .command-item-subtitle {
            font-size: var(--font-size-footnote);
            color: var(--text-tertiary);
        }

        /* === 设置面板 === */
        .settings-panel {
            max-width: 880px;
            margin: 0 auto;
            padding: var(--spacing-3xl) var(--spacing-xl);
        }

        .settings-header {
            margin-bottom: var(--spacing-3xl);
            text-align: center;
        }

        .settings-title {
            font-size: var(--font-size-title2);
            font-weight: var(--font-weight-semibold);
            color: var(--text-primary);
            margin-bottom: var(--spacing-sm);
        }

        .settings-subtitle {
            font-size: var(--font-size-callout);
            color: var(--text-secondary);
        }

        .settings-group {
            margin-bottom: var(--spacing-3xl);
        }

        .settings-group-title {
            font-size: var(--font-size-headline);
            font-weight: var(--font-weight-semibold);
            color: var(--text-primary);
            margin-bottom: var(--spacing-lg);
            padding-bottom: var(--spacing-md);
            border-bottom: 1px solid var(--separator-opaque);
        }

        .settings-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: var(--spacing-lg) 0;
            border-bottom: 1px solid var(--separator-transparent);
        }

        .settings-item:last-child {
            border-bottom: none;
        }

        .settings-item-label {
            flex: 1;
        }

        .settings-item-title {
            font-size: var(--font-size-callout);
            font-weight: var(--font-weight-medium);
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .settings-item-description {
            font-size: var(--font-size-footnote);
            color: var(--text-secondary);
        }

        /* === 开关控件 === */
        .toggle {
            width: 51px;
            height: 31px;
            background: var(--fill-tertiary);
            border-radius: var(--radius-full);
            padding: 2px;
            cursor: pointer;
            transition: background var(--duration-fast) var(--ease-default);
            position: relative;
            flex-shrink: 0;
        }

        .toggle.active {
            background: var(--apple-green);
        }

        .toggle-knob {
            width: 27px;
            height: 27px;
            background: white;
            border-radius: 50%;
            box-shadow: var(--shadow-sm);
            transition: transform var(--duration-fast) var(--ease-spring);
            position: relative;
        }

        .toggle.active .toggle-knob {
            transform: translateX(20px);
        }

        /* === 选择器 === */
        .select {
            min-width: 200px;
            height: 36px;
            padding: 0 var(--spacing-md);
            border: 1px solid var(--separator-transparent);
            border-radius: var(--radius-md);
            background: var(--fill-primary);
            font-size: var(--font-size-subheadline);
            font-family: var(--font-family);
            color: var(--text-primary);
            cursor: pointer;
            transition: all var(--duration-fast) var(--ease-default);
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23747478' d='M2 4l4 4 4-4'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right var(--spacing-md) center;
            padding-right: var(--spacing-2xl);
        }

        .select:focus {
            outline: none;
            border-color: var(--apple-blue);
            box-shadow: 0 0 0 4px rgba(0, 102, 204, 0.15);
        }

        /* === 滑块 === */
        .slider-container {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            min-width: 200px;
        }

        .slider {
            flex: 1;
            height: 4px;
            -webkit-appearance: none;
            appearance: none;
            background: var(--fill-tertiary);
            border-radius: var(--radius-full);
            outline: none;
            cursor: pointer;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: white;
            box-shadow: var(--shadow-sm);
            cursor: pointer;
            transition: transform var(--duration-fast) var(--ease-default);
        }

        .slider::-webkit-slider-thumb:hover {
            transform: scale(1.1);
        }

        .slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border: none;
            border-radius: 50%;
            background: white;
            box-shadow: var(--shadow-sm);
            cursor: pointer;
            transition: transform var(--duration-fast) var(--ease-default);
        }

        .slider::-moz-range-thumb:hover {
            transform: scale(1.1);
        }

        .slider-value {
            min-width: 40px;
            text-align: right;
            font-size: var(--font-size-subheadline);
            font-weight: var(--font-weight-medium);
            color: var(--text-primary);
        }

        /* === 颜色选择器 === */
        .color-options {
            display: flex;
            gap: var(--spacing-sm);
        }

        .color-option {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all var(--duration-fast) var(--ease-default);
            position: relative;
        }

        .color-option:hover {
            transform: scale(1.1);
        }

        .color-option.active {
            border-color: var(--bg-primary);
            box-shadow: 0 0 0 2px var(--apple-blue);
        }

        .color-option-blue { background: var(--apple-blue); }
        .color-option-green { background: var(--apple-green); }
        .color-option-orange { background: var(--apple-orange); }
        .color-option-purple { background: var(--apple-purple); }
        .color-option-red { background: var(--apple-red); }
        .color-option-pink { background: var(--apple-pink); }
        .color-option-teal { background: var(--apple-teal); }
        .color-option-indigo { background: var(--apple-indigo); }

        /* === 按钮样式 === */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: var(--spacing-sm);
            padding: var(--spacing-sm) var(--spacing-lg);
            border: none;
            border-radius: var(--radius-md);
            font-size: var(--font-size-callout);
            font-weight: var(--font-weight-medium);
            font-family: var(--font-family);
            cursor: pointer;
            transition: all var(--duration-fast) var(--ease-default);
            white-space: nowrap;
            text-decoration: none;
            transform: translateY(0) scale(1);
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left var(--duration-medium) var(--ease-default);
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:hover {
            transform: translateY(-2px) scale(1.05);
        }

        .btn:active {
            transform: translateY(0) scale(0.95);
            transition: all var(--duration-fast) var(--ease-default);
        }

        .btn-primary:hover {
            box-shadow: 0 4px 12px rgba(0, 102, 204, 0.3);
            animation: glow 2s ease-in-out infinite;
        }

        .btn-secondary:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .btn-danger:hover {
            box-shadow: 0 4px 12px rgba(175, 30, 45, 0.3);
            animation: glow 2s ease-in-out infinite;
        }

        .btn-sm {
            padding: var(--spacing-xs) var(--spacing-md);
            font-size: var(--font-size-subheadline);
        }

        .btn-lg {
            padding: var(--spacing-md) var(--spacing-xl);
            font-size: var(--font-size-headline);
        }

        .btn-primary {
            background: var(--apple-blue);
            color: white;
        }

        .btn-primary:hover {
            background: var(--apple-blue-hover);
        }

        .btn-secondary {
            background: var(--fill-secondary);
            color: var(--text-primary);
        }

        .btn-secondary:hover {
            background: var(--fill-tertiary);
        }

        .btn-danger {
            background: var(--apple-red);
            color: white;
        }

        .btn-danger:hover {
            background: var(--apple-red-hover);
        }

        /* === 响应式 === */
        @media (max-width: 1024px) {
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            /* 编辑器页面响应式 */
            #editorPage {
                flex-direction: column;
            }

            #editorPage .editor-content {
                flex-direction: column;
            }

            #editorPage .editor-content > div:last-child {
                width: 100%;
                border-left: none;
                border-top: 1px solid var(--separator-transparent);
                max-height: 300px;
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                position: absolute;
                left: 0;
                top: 0;
                bottom: 0;
                z-index: var(--z-fixed);
                transform: translateX(-100%);
            }

            .sidebar.open {
                transform: translateX(0);
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .grid {
                grid-template-columns: 1fr;
            }

            .search-page {
                padding: var(--spacing-xl) var(--spacing-lg);
            }

            .search-hero-title {
                font-size: var(--font-size-title3);
            }

            .search-hero-subtitle {
                font-size: var(--font-size-headline);
            }

            /* 标题栏响应式 */
            .titlebar-search {
                max-width: calc(100% - 150px);
            }

            .titlebar-right {
                gap: var(--spacing-sm);
            }

            /* 编辑器页面响应式 */
            #editorPage {
                flex-direction: column;
            }

            #editorPage .editor-content {
                flex-direction: column;
            }

            #editorPage .editor-content > div:first-child {
                padding: var(--spacing-lg);
            }

            #editorPage .editor-content > div:last-child {
                width: 100%;
                border-left: none;
                border-top: 1px solid var(--separator-transparent);
                max-height: 250px;
            }

            /* 命令面板响应式 */
            .command-palette {
                width: 90%;
                max-width: 500px;
            }

            /* 标签页响应式 */
            .tabbar {
                overflow-x: auto;
                white-space: nowrap;
                padding-bottom: var(--spacing-sm);
            }

            .tab {
                max-width: 150px;
            }
        }

        @media (max-width: 480px) {
            .titlebar-search {
                display: none;
            }

            .titlebar-title {
                display: block;
            }

            .search-hero {
                padding: var(--spacing-xl) 0;
            }

            .search-input-large {
                font-size: var(--font-size-body);
                height: 48px;
            }

            .stat-value {
                font-size: var(--font-size-title2);
            }

            /* 编辑器页面响应式 */
            #editorPage .editor-content > div:first-child {
                padding: var(--spacing-md);
            }

            #editorPage input[type="text"] {
                font-size: var(--font-size-title2);
            }

            /* 命令面板响应式 */
            .command-palette {
                width: 95%;
                max-height: 400px;
            }

            /* 侧边栏响应式 */
            .sidebar {
                position: fixed;
                left: 0;
                top: 0;
                bottom: 0;
                z-index: var(--z-fixed);
                transform: translateX(-100%);
                transition: transform var(--duration-medium) var(--ease-default);
            }

            .sidebar.open {
                transform: translateX(0);
            }

            /* 导航项响应式 */
            .nav-item {
                padding: var(--spacing-sm) var(--spacing-md);
            }

            /* 统计卡片响应式 */
            .stats-grid {
                gap: var(--spacing-md);
            }

            /* 卡片响应式 */
            .card {
                padding: var(--spacing-lg);
            }

            /* 命令面板响应式 */
            .modal-overlay {
                padding-top: 10vh;
            }

            /* 编辑器预览区响应式 */
            #editorPage .editor-content > div:last-child {
                display: none;
            }

            /* 数据库选择器响应式 */
            .database-selector {
                min-width: 100px;
                font-size: var(--font-size-caption2);
            }

            /* 标题栏响应式 */
            .titlebar-right {
                gap: var(--spacing-xs);
            }

            .theme-toggle,
            .settings-btn {
                width: 28px;
                height: 28px;
            }

            /* 窗口控制按钮响应式 */
            .window-control {
                width: 10px;
                height: 10px;
            }

            .window-controls {
                gap: var(--spacing-xs);
            }
        }

        /* === 工具类 === */
        .text-center { text-align: center; }
        .text-left { text-align: left; }
        .text-right { text-align: right; }

        .text-primary { color: var(--text-primary); }
        .text-secondary { color: var(--text-secondary); }
        .text-tertiary { color: var(--text-tertiary); }

        .font-light { font-weight: var(--font-weight-light); }
        .font-regular { font-weight: var(--font-weight-regular); }
        .font-medium { font-weight: var(--font-weight-medium); }
        .font-semibold { font-weight: var(--font-weight-semibold); }
        .font-bold { font-weight: var(--font-weight-bold); }

        .mt-xs { margin-top: var(--spacing-xs); }
        .mt-sm { margin-top: var(--spacing-sm); }
        .mt-md { margin-top: var(--spacing-md); }
        .mt-lg { margin-top: var(--spacing-lg); }
        .mt-xl { margin-top: var(--spacing-xl); }
        .mt-2xl { margin-top: var(--spacing-2xl); }

        .mb-xs { margin-bottom: var(--spacing-xs); }
        .mb-sm { margin-bottom: var(--spacing-sm); }
        .mb-md { margin-bottom: var(--spacing-md); }
        .mb-lg { margin-bottom: var(--spacing-lg); }
        .mb-xl { margin-bottom: var(--spacing-xl); }
        .mb-2xl { margin-bottom: var(--spacing-2xl); }

        .ml-xs { margin-left: var(--spacing-xs); }
        .ml-sm { margin-left: var(--spacing-sm); }
        .ml-md { margin-left: var(--spacing-md); }
        .ml-lg { margin-left: var(--spacing-lg); }

        .mr-xs { margin-right: var(--spacing-xs); }
        .mr-sm { margin-right: var(--spacing-sm); }
        .mr-md { margin-right: var(--spacing-md); }
        .mr-lg { margin-right: var(--spacing-lg); }

        .p-sm { padding: var(--spacing-sm); }
        .p-md { padding: var(--spacing-md); }
        .p-lg { padding: var(--spacing-lg); }
        .p-xl { padding: var(--spacing-xl); }

        .flex { display: flex; }
        .flex-col { flex-direction: column; }
        .items-center { align-items: center; }
        .justify-center { justify-content: center; }
        .justify-between { justify-content: space-between; }
        .gap-sm { gap: var(--spacing-sm); }
        .gap-md { gap: var(--spacing-md); }
        .gap-lg { gap: var(--spacing-lg); }

        /* === 分类分析样式 === */
        .categories-section {
            margin: var(--spacing-3xl) 0;
        }

        .categories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: var(--spacing-lg);
            margin-top: var(--spacing-xl);
        }

        .category-card {
            display: flex;
            align-items: center;
            gap: var(--spacing-lg);
            padding: var(--spacing-xl);
            background: var(--bg-secondary);
            border-radius: var(--radius-lg);
            border: 1px solid var(--separator-transparent);
            cursor: pointer;
            transition: all var(--duration-fast) var(--ease-default);
            position: relative;
            overflow: hidden;
        }

        .category-card::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, transparent 0%, rgba(0, 102, 204, 0.03) 100%);
            opacity: 0;
            transition: opacity var(--duration-fast) var(--ease-default);
        }

        .category-card:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: var(--shadow-lg);
            border-color: var(--separator-heavy);
        }

        .category-card:hover::before {
            opacity: 1;
        }

        .category-icon {
            width: 48px;
            height: 48px;
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            flex-shrink: 0;
            position: relative;
            z-index: 1;
        }

        .category-icon.blue { background: rgba(0, 102, 204, 0.1); }
        .category-icon.green { background: rgba(0, 217, 89, 0.1); }
        .category-icon.orange { background: rgba(255, 149, 0, 0.1); }
        .category-icon.purple { background: rgba(175, 82, 222, 0.1); }
        .category-icon.red { background: rgba(175, 30, 45, 0.1); }
        .category-icon.indigo { background: rgba(94, 92, 230, 0.1); }
        .category-icon.teal { background: rgba(85, 190, 240, 0.1); }

        [data-theme="dark"] .category-icon.blue { background: rgba(0, 102, 204, 0.2); }
        [data-theme="dark"] .category-icon.green { background: rgba(0, 217, 89, 0.2); }
        [data-theme="dark"] .category-icon.orange { background: rgba(255, 149, 0, 0.2); }
        [data-theme="dark"] .category-icon.purple { background: rgba(175, 82, 222, 0.2); }
        [data-theme="dark"] .category-icon.red { background: rgba(175, 30, 45, 0.2); }
        [data-theme="dark"] .category-icon.indigo { background: rgba(94, 92, 230, 0.2); }
        [data-theme="dark"] .category-icon.teal { background: rgba(85, 190, 240, 0.2); }

        .category-content {
            flex: 1;
            min-width: 0;
            position: relative;
            z-index: 1;
        }

        .category-content h3 {
            font-size: var(--font-size-headline);
            font-weight: var(--font-weight-semibold);
            color: var(--text-primary);
            margin-bottom: var(--spacing-xs);
        }

        .category-count {
            font-size: var(--font-size-subheadline);
            color: var(--text-secondary);
        }

        .category-action {
            width: 32px;
            height: 32px;
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-tertiary);
            transition: all var(--duration-fast) var(--ease-default);
            flex-shrink: 0;
            position: relative;
            z-index: 1;
        }

        .category-card:hover .category-action {
            background: var(--fill-secondary);
            color: var(--text-primary);
            transform: translateX(4px);
        }

        /* 响应式设计 - 分类分析 */
        @media (max-width: 1024px) {
            .categories-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .categories-grid {
                grid-template-columns: 1fr;
            }

            .category-card {
                padding: var(--spacing-lg);
            }

            .category-icon {
                width: 40px;
                height: 40px;
                font-size: 20px;
            }

            .category-content h3 {
                font-size: var(--font-size-body);
            }
        }

        /* === 统计页面样式 === */
        .stats-controls {
            background: var(--bg-secondary);
            border-radius: var(--radius-lg);
            padding: var(--spacing-xl);
            margin-bottom: var(--spacing-3xl);
            border: 1px solid var(--separator-transparent);
        }

        .control-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: var(--spacing-lg);
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-sm);
        }

        .control-group label {
            font-size: var(--font-size-caption1);
            font-weight: var(--font-weight-medium);
            color: var(--text-secondary);
        }

        .control-select {
            min-width: 200px;
            height: 36px;
            padding: 0 var(--spacing-md);
            border: 1px solid var(--separator-transparent);
            border-radius: var(--radius-md);
            background: var(--fill-primary);
            font-size: var(--font-size-subheadline);
            font-family: var(--font-family);
            color: var(--text-primary);
            cursor: pointer;
            transition: all var(--duration-fast) var(--ease-default);
        }

        .control-select:focus {
            outline: none;
            border-color: var(--apple-blue);
            box-shadow: 0 0 0 4px rgba(0, 102, 204, 0.15);
        }

        .control-actions {
            display: flex;
            gap: var(--spacing-md);
        }

        .core-metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--spacing-lg);
            margin-bottom: var(--spacing-3xl);
        }

        .metric-card {
            background: var(--bg-secondary);
            border-radius: var(--radius-lg);
            padding: var(--spacing-xl);
            border: 1px solid var(--separator-transparent);
            transition: all var(--duration-fast) var(--ease-default);
        }

        .metric-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .metric-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: var(--spacing-lg);
        }

        .metric-title {
            font-size: var(--font-size-subheadline);
            font-weight: var(--font-weight-medium);
            color: var(--text-secondary);
        }

        .metric-change {
            font-size: var(--font-size-caption1);
            font-weight: var(--font-weight-medium);
            padding: 2px var(--spacing-sm);
            border-radius: var(--radius-sm);
        }

        .metric-change.positive {
            background: rgba(0, 217, 89, 0.1);
            color: var(--apple-green);
        }

        .metric-change.negative {
            background: rgba(175, 30, 45, 0.1);
            color: var(--apple-red);
        }

        .metric-content {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-xs);
        }

        .metric-value {
            font-size: var(--font-size-large-title);
            font-weight: var(--font-weight-bold);
            color: var(--text-primary);
            line-height: var(--line-height-tight);
        }

        .metric-desc {
            font-size: var(--font-size-caption1);
            color: var(--text-tertiary);
        }

        .data-visualization {
            margin-bottom: var(--spacing-3xl);
        }

        .viz-section {
            margin-bottom: var(--spacing-3xl);
        }

        .viz-card {
            background: var(--bg-secondary);
            border-radius: var(--radius-lg);
            padding: var(--spacing-xl);
            border: 1px solid var(--separator-transparent);
            margin-top: var(--spacing-lg);
        }

        .trend-chart {
            width: 100%;
            height: 200px;
        }

        .structure-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--spacing-lg);
            margin-top: var(--spacing-lg);
        }

        .structure-card {
            background: var(--bg-secondary);
            border-radius: var(--radius-lg);
            padding: var(--spacing-xl);
            border: 1px solid var(--separator-transparent);
        }

        .structure-card h3 {
            font-size: var(--font-size-headline);
            font-weight: var(--font-weight-semibold);
            color: var(--text-primary);
            margin-bottom: var(--spacing-lg);
        }

        .distribution-chart {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-md);
        }

        .distribution-item {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
        }

        .distribution-bar {
            flex: 1;
            height: 8px;
            border-radius: var(--radius-full);
            transition: width var(--duration-medium) var(--ease-default);
        }

        .distribution-item span {
            font-size: var(--font-size-subheadline);
            color: var(--text-secondary);
            min-width: 120px;
        }

        .tag-cloud {
            display: flex;
            flex-wrap: wrap;
            gap: var(--spacing-sm);
        }

        .tag-large {
            font-size: var(--font-size-body);
            padding: var(--spacing-sm) var(--spacing-md);
        }

        .tag-medium {
            font-size: var(--font-size-subheadline);
            padding: var(--spacing-xs) var(--spacing-sm);
        }

        .tag-small {
            font-size: var(--font-size-caption1);
            padding: 2px var(--spacing-xs);
        }

        .insights-section {
            margin-bottom: var(--spacing-3xl);
        }

        .insights-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--spacing-lg);
            margin-top: var(--spacing-lg);
        }

        .insight-card {
            display: flex;
            align-items: flex-start;
            gap: var(--spacing-lg);
            background: var(--bg-secondary);
            border-radius: var(--radius-lg);
            padding: var(--spacing-xl);
            border: 1px solid var(--separator-transparent);
            transition: all var(--duration-fast) var(--ease-default);
        }

        .insight-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .insight-icon {
            width: 40px;
            height: 40px;
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            flex-shrink: 0;
        }

        .insight-icon.positive {
            background: rgba(0, 217, 89, 0.1);
            color: var(--apple-green);
        }

        .insight-icon.neutral {
            background: rgba(255, 149, 0, 0.1);
            color: var(--apple-orange);
        }

        .insight-icon.negative {
            background: rgba(175, 30, 45, 0.1);
            color: var(--apple-red);
        }

        .insight-content {
            flex: 1;
        }

        .insight-content h3 {
            font-size: var(--font-size-headline);
            font-weight: var(--font-weight-semibold);
            color: var(--text-primary);
            margin-bottom: var(--spacing-sm);
        }

        .insight-content p {
            font-size: var(--font-size-subheadline);
            color: var(--text-secondary);
            line-height: var(--line-height-relaxed);
        }

        .recommendation-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--spacing-lg);
            margin-top: var(--spacing-lg);
        }

        .recommendation-card {
            background: var(--bg-secondary);
            border-radius: var(--radius-lg);
            padding: var(--spacing-xl);
            border: 1px solid var(--separator-transparent);
            transition: all var(--duration-fast) var(--ease-default);
        }

        .recommendation-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .recommendation-icon {
            width: 48px;
            height: 48px;
            border-radius: var(--radius-md);
            background: var(--apple-blue);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            margin-bottom: var(--spacing-lg);
        }

        .recommendation-card h3 {
            font-size: var(--font-size-headline);
            font-weight: var(--font-weight-semibold);
            color: var(--text-primary);
            margin-bottom: var(--spacing-sm);
        }

        .recommendation-card p {
            font-size: var(--font-size-subheadline);
            color: var(--text-secondary);
            margin-bottom: var(--spacing-xl);
            line-height: var(--line-height-relaxed);
        }

        /* 响应式设计 - 统计页面 */
        @media (max-width: 1024px) {
            .control-row {
                flex-direction: column;
                align-items: flex-start;
            }

            .control-actions {
                width: 100%;
                justify-content: space-between;
            }

            .core-metrics {
                grid-template-columns: repeat(2, 1fr);
            }

            .structure-grid {
                grid-template-columns: 1fr;
            }

            .insights-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .recommendation-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .stats-controls {
                padding: var(--spacing-lg);
            }

            .control-group {
                width: 100%;
            }

            .control-select {
                width: 100%;
            }

            .control-actions {
                flex-direction: column;
                gap: var(--spacing-sm);
            }

            .control-actions .btn {
                width: 100%;
                justify-content: center;
            }

            .core-metrics {
                grid-template-columns: 1fr;
            }

            .metric-card {
                padding: var(--spacing-lg);
            }

            .viz-card {
                padding: var(--spacing-lg);
            }

            .trend-chart {
                height: 150px;
            }

            .structure-card {
                padding: var(--spacing-lg);
            }

            .insights-grid {
                grid-template-columns: 1fr;
            }

            .insight-card {
                padding: var(--spacing-lg);
                flex-direction: column;
                align-items: flex-start;
            }

            .recommendation-grid {
                grid-template-columns: 1fr;
            }

            .recommendation-card {
                padding: var(--spacing-lg);
            }
        }
    </style>
</head>
<body data-theme="light">
    <div class="app-container">
        <!-- macOS 风格标题栏 -->
        <div class="titlebar">
            <div class="titlebar-left">
                <div class="window-controls">
                    <div class="window-control close"></div>
                    <div class="window-control minimize"></div>
                    <div class="window-control maximize"></div>
                </div>
            </div>
            <div class="titlebar-search">
                <input type="text" class="titlebar-search-input" placeholder="搜索文档、标签、网站..." id="titlebarSearchInput">
            </div>
            <div class="titlebar-right">
                <!-- 数据库切换器 -->
                <select class="database-selector" id="databaseSelector" title="选择数据库">
                    <option value="all">全部数据库</option>
                    <option value="work">工作资料</option>
                    <option value="personal">个人笔记</option>
                    <option value="study">学习资料</option>
                </select>

                <!-- 主题切换 -->
                <button class="theme-toggle" title="切换主题" id="themeToggle">
                    <svg class="sun-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                        <circle cx="12" cy="12" r="5"/>
                        <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
                    </svg>
                    <svg class="moon-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="display: none;">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                    </svg>
                </button>
            </div>
        </div>

        <div class="main-layout">
            <!-- 左侧边栏 -->
            <div class="sidebar" id="sidebar">
                <div class="sidebar-nav">
                    <!-- 功能菜单 -->
                    <div class="nav-section">
                        <div class="nav-item active" onclick="showPage('home')">
                            <svg class="nav-item-icon" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
                                <path d="M3 9l9-7 9 7v4a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"/>
                                <polyline points="9 22 9 12 15 12 15 22"/>
                            </svg>
                            <span class="nav-item-label">主页</span>
                        </div>
                        <div class="nav-item" onclick="showPage('search')">
                            <svg class="nav-item-icon" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
                                <circle cx="7" cy="7" r="4"/>
                                <path d="M11 11l3 3"/>
                            </svg>
                            <span class="nav-item-label">搜索</span>
                        </div>
                        <div class="nav-item" onclick="showPage('history')">
                            <svg class="nav-item-icon" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
                                <circle cx="8" cy="8" r="5"/>
                                <polyline points="8 4 8 8 11 8"/>
                                <path d="M3 8a5 5 0 015-5"/>
                            </svg>
                            <span class="nav-item-label">历史</span>
                        </div>
                        <div class="nav-item" onclick="showPage('import')">
                            <svg class="nav-item-icon" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
                                <path d="M4 4h8a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6a2 2 0 012-2z"/>
                                <path d="M8 2v6"/>
                                <path d="M5.5 5.5L8 8l2.5-2.5"/>
                                <path d="M2 6h2"/>
                            </svg>
                            <span class="nav-item-label">导入</span>
                        </div>
                        <div class="nav-item" onclick="showPage('templates')">
                            <svg class="nav-item-icon" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
                                <rect x="3" y="2" width="10" height="12" rx="1"/>
                                <path d="M6 6h4M6 9h4"/>
                                <path d="M7 2v2M9 2v2"/>
                                <path d="M6 2h4"/>
                            </svg>
                            <span class="nav-item-label">模板</span>
                        </div>
                        <div class="nav-item" onclick="showPage('documents')">
                            <svg class="nav-item-icon" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
                                <path d="M4 4h8v8H4z"/>
                                <path d="M4 4l4 4M8 4l-4 4"/>
                            </svg>
                            <span class="nav-item-label">文档</span>
                            <span class="nav-item-badge">156</span>
                        </div>
                        <div class="nav-item" onclick="showPage('tags')">
                            <svg class="nav-item-icon" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
                                <path d="M2 6l5-5 5 5-5 5z"/>
                            </svg>
                            <span class="nav-item-label">标签</span>
                            <span class="nav-item-badge">28</span>
                        </div>
                        <div class="nav-item" onclick="showPage('websites')">
                            <svg class="nav-item-icon" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
                                <circle cx="8" cy="8" r="5"/>
                                <path d="M8 3v5l3 3"/>
                            </svg>
                            <span class="nav-item-label">网站</span>
                        </div>
                        <div class="nav-item" onclick="showPage('apps')">
                            <svg class="nav-item-icon" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
                                <rect x="3" y="3" width="10" height="10" rx="2"/>
                            </svg>
                            <span class="nav-item-label">应用</span>
                        </div>
                        <div class="nav-item" onclick="showPage('graph')">
                            <svg class="nav-item-icon" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
                                <circle cx="4" cy="8" r="2"/>
                                <circle cx="12" cy="5" r="2"/>
                                <circle cx="12" cy="11" r="2"/>
                                <path d="M5.5 7L10 5.5M5.5 9L10 10.5"/>
                            </svg>
                            <span class="nav-item-label">知识图谱</span>
                        </div>
                        <div class="nav-item" onclick="showPage('workflow')">
                            <svg class="nav-item-icon" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
                                <rect x="2" y="3" width="5" height="5" rx="1"/>
                                <rect x="9" y="3" width="5" height="5" rx="1"/>
                                <rect x="2" y="9" width="5" height="5" rx="1"/>
                                <rect x="9" y="9" width="5" height="5" rx="1"/>
                                <path d="M7 5.5h2M7 11.5h2M4.5 7v2M11.5 7v2"/>
                            </svg>
                            <span class="nav-item-label">工作流</span>
                            <span class="nav-item-badge">8</span>
                        </div>
                        <div class="nav-item" onclick="showPage('favorites')">
                            <svg class="nav-item-icon" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
                                <polygon points="8 2 10 6 14 6 11 9 12 14 8 11 4 14 5 9 2 6 6 6"/>
                            </svg>
                            <span class="nav-item-label">收藏夹</span>
                        </div>
                        <div class="nav-item" onclick="showPage('trash')">
                            <svg class="nav-item-icon" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
                                <polyline points="3 6 5 6 14 6"/>
                                <path d="M5 6v10a2 2 0 002 2h6a2 2 0 002-2V6"/>
                                <path d="M8 6V4a2 2 0 00-2-2H8a2 2 0 00-2 2v2"/>
                                <line x1="10" y1="11" x2="10" y2="15"/>
                                <line x1="6" y1="11" x2="6" y2="15"/>
                            </svg>
                            <span class="nav-item-label">回收站</span>
                        </div>
                        <div class="nav-item" onclick="showPage('statistics')">
                            <svg class="nav-item-icon" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
                                <rect x="2" y="3" width="12" height="9" rx="2"/>
                                <path d="M5 10h1M5 6h6M5 13h2M10 13h2"/>
                            </svg>
                            <span class="nav-item-label">统计</span>
                        </div>
                        <div class="nav-item" onclick="showPage('backup')">
                            <svg class="nav-item-icon" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
                                <path d="M4 4a2 2 0 012-2h8a2 2 0 012 2v4"/>
                                <path d="M4 8v6a2 2 0 002 2h8a2 2 0 002-2V8"/>
                                <path d="M8 2v6"/>
                                <path d="M3 6h2"/>
                                <path d="M3 10h10"/>
                            </svg>
                            <span class="nav-item-label">备份</span>
                        </div>
                        <div class="nav-item" onclick="showPage('settings')">
                            <svg class="nav-item-icon" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
                                <circle cx="8" cy="8" r="2.5"/>
                                <path d="M8 2v1.5M8 12.5v1.5M2 8h1.5M12.5 8h1.5"/>
                                <path d="M3.6 3.6l1.05 1.05M11.35 11.35l1.05 1.05"/>
                                <path d="M3.6 12.4l1.05-1.05M11.35 4.65l1.05-1.05"/>
                                <circle cx="8" cy="3.5" r="1"/>
                                <circle cx="12.5" cy="8" r="1"/>
                                <circle cx="8" cy="12.5" r="1"/>
                                <circle cx="3.5" cy="8" r="1"/>
                                <circle cx="4.65" cy="4.65" r="1"/>
                                <circle cx="11.35" cy="11.35" r="1"/>
                                <circle cx="11.35" cy="4.65" r="1"/>
                                <circle cx="4.65" cy="11.35" r="1"/>
                            </svg>
                            <span class="nav-item-label">设置</span>
                        </div>
                    </div>
                </div>
                <div class="sidebar-footer">
                    <button class="sidebar-toggle" id="sidebarToggle">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
                            <rect x="3" y="3" width="10" height="10" rx="2"/>
                            <path d="M3 8h10"/>
                        </svg>
                        收起侧边栏
                    </button>
                </div>
            </div>

            <!-- 主内容区 -->
            <div class="main-content">
                <!-- 标签页栏 -->
                <div class="tabbar">
                    <div class="tab pinned active" data-page="search">
                        <svg class="tab-icon" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
                            <circle cx="6" cy="6" r="4"/>
                            <path d="M11 11l3 3"/>
                        </svg>
                        <span class="tab-title">搜索</span>
                    </div>
                    <div class="tab" data-page="editor">
                        <svg class="tab-icon" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M4 4h8v8H4z"/>
                            <path d="M4 4l4 4M8 4l-4 4"/>
                        </svg>
                        <span class="tab-title">项目开发计划.md</span>
                        <div class="tab-close">
                            <svg width="12" height="12" viewBox="0 0 12 12" fill="none" stroke="currentColor" stroke-width="1.5">
                                <path d="M2 2l8 8M10 2l-8 8"/>
                            </svg>
                        </div>
                    </div>
                    <div class="tab" data-page="editor">
                        <svg class="tab-icon" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M2 5l3-3h6l3 5v6a2 2 0 01-2 2H4a2 2 0 01-2-2V5z"/>
                            <path d="M8 3v6M6 6h4"/>
                        </svg>
                        <span class="tab-title">会议记录 - 产品评审</span>
                        <div class="tab-close">
                            <svg width="12" height="12" viewBox="0 0 12 12" fill="none" stroke="currentColor" stroke-width="1.5">
                                <path d="M2 2l8 8M10 2l-8 8"/>
                            </svg>
                        </div>
                    </div>
                    <div class="tab" data-page="editor">
                        <svg class="tab-icon" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
                            <rect x="3" y="3" width="10" height="10" rx="2"/>
                            <path d="M3 8h10"/>
                        </svg>
                        <span class="tab-title">技术方案 - React 组件优化</span>
                        <div class="tab-close">
                            <svg width="12" height="12" viewBox="0 0 12 12" fill="none" stroke="currentColor" stroke-width="1.5">
                                <path d="M2 2l8 8M10 2l-8 8"/>
                            </svg>
                        </div>
                    </div>
                    <button class="tab-new" id="newTabBtn" title="新建标签页">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M8 3v10M3 8h10"/>
                        </svg>
                    </button>
                </div>

                <!-- 内容区域 -->
                <div class="content-area">

                    <!-- 搜索页面 -->
                    <div class="search-page" id="searchPage" style="display: none;">


                        <!-- 搜索主区域 -->
                        <div class="search-hero">
                            <div class="search-hero-icon">🔍</div>
                            <h1 class="search-hero-title">今天想找什么？</h1>
                            <p class="search-hero-subtitle">搜索文档、标签、文件夹或网站</p>
                            <div class="search-box-large" style="position: relative;">
                                <div style="display: flex; align-items: center;">
                                    <input type="text" class="search-input-large" placeholder="输入关键词搜索..." id="mainSearchInput" style="border-radius: var(--radius-xl) 0 0 var(--radius-xl); flex: 1;">
                                    <select id="searchScope" style="width: 120px;">
                                        <option value="all">全部</option>
                                        <option value="documents">文档</option>
                                        <option value="websites">网站</option>
                                        <option value="apps">应用</option>
                                    </select>
                                </div>
                                <div class="search-suggestions" id="searchSuggestions">
                                    <div class="suggestion-section">
                                        <div class="suggestion-section-title">最近搜索</div>
                                        <div class="suggestion-item">
                                            <div class="suggestion-item-icon">📄</div>
                                            <div class="suggestion-item-content">
                                                <div class="suggestion-item-title">产品需求文档</div>
                                                <div class="suggestion-item-meta">文档 · 工作项目</div>
                                            </div>
                                            <span class="suggestion-item-shortcut">↵</span>
                                        </div>
                                        <div class="suggestion-item">
                                            <div class="suggestion-item-icon">🏷️</div>
                                            <div class="suggestion-item-content">
                                                <div class="suggestion-item-title">重要</div>
                                                <div class="suggestion-item-meta">标签 · 23 个文档</div>
                                            </div>
                                            <span class="suggestion-item-shortcut">↵</span>
                                        </div>
                                    </div>
                                    <div class="suggestion-section">
                                        <div class="suggestion-section-title">快捷操作</div>
                                        <div class="suggestion-item">
                                            <div class="suggestion-item-icon">⌨️</div>
                                            <div class="suggestion-item-content">
                                                <div class="suggestion-item-title">打开命令面板</div>
                                                <div class="suggestion-item-meta">执行快速命令</div>
                                            </div>
                                            <span class="suggestion-item-shortcut">⌘K</span>
                                        </div>
                                        <div class="suggestion-item">
                                            <div class="suggestion-item-icon">➕</div>
                                            <div class="suggestion-item-content">
                                                <div class="suggestion-item-title">新建文档</div>
                                                <div class="suggestion-item-meta">创建 Markdown 文档</div>
                                            </div>
                                            <span class="suggestion-item-shortcut">⌘N</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 快速访问 -->
                        <div class="quick-access">
                            <div class="section-header">
                                <h2 class="section-title">快速访问</h2>
                                <a href="#" class="section-action">查看全部 →</a>
                            </div>
                            <div class="grid">
                                <div class="card">
                                    <div class="card-icon blue">📁</div>
                                    <div class="card-title">工作项目</div>
                                    <div class="card-subtitle">12 个文档</div>
                                </div>
                                <div class="card">
                                    <div class="card-icon green">📚</div>
                                    <div class="card-title">学习资料</div>
                                    <div class="card-subtitle">8 个文档</div>
                                    <span class="card-badge">3</span>
                                </div>
                                <div class="card">
                                    <div class="card-icon orange">⭐</div>
                                    <div class="card-title">收藏夹</div>
                                    <div class="card-subtitle">5 个项目</div>
                                </div>
                                <div class="card">
                                    <div class="card-icon purple">🔗</div>
                                    <div class="card-title">知识图谱</div>
                                    <div class="card-subtitle">查看关联</div>
                                </div>
                                <div class="card">
                                    <div class="card-icon red">📋</div>
                                    <div class="card-title">任务列表</div>
                                    <div class="card-subtitle">8 个待办</div>
                                    <span class="card-badge">8</span>
                                </div>
                                <div class="card">
                                    <div class="card-icon indigo">📊</div>
                                    <div class="card-title">数据统计</div>
                                    <div class="card-subtitle">查看分析</div>
                                </div>
                            </div>
                        </div>

                        <!-- 最近文档 -->
                        <div class="quick-access">
                            <div class="section-header">
                                <h2 class="section-title">最近文档</h2>
                                <a href="#" class="section-action">查看全部 →</a>
                            </div>
                            <div class="document-list">
                                <div class="document-item">
                                    <div class="document-icon">📄</div>
                                    <div class="document-content">
                                        <div class="document-title">产品需求文档 V2.0</div>
                                        <div class="document-meta">
                                            <span>工作项目</span>
                                            <span>·</span>
                                            <span>2 小时前</span>
                                            <span class="tag tag-blue ml-sm">重要</span>
                                        </div>
                                    </div>
                                    <div class="document-menu">
                                        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                            <circle cx="8" cy="3" r="1.5"/>
                                            <circle cx="8" cy="8" r="1.5"/>
                                            <circle cx="8" cy="13" r="1.5"/>
                                        </svg>
                                    </div>
                                </div>
                                <div class="document-item">
                                    <div class="document-icon green">📝</div>
                                    <div class="document-content">
                                        <div class="document-title">会议记录 - 产品评审</div>
                                        <div class="document-meta">
                                            <span>会议记录</span>
                                            <span>·</span>
                                            <span>昨天</span>
                                            <span class="tag tag-green ml-sm">已完成</span>
                                        </div>
                                    </div>
                                    <div class="document-menu">
                                        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                            <circle cx="8" cy="3" r="1.5"/>
                                            <circle cx="8" cy="8" r="1.5"/>
                                            <circle cx="8" cy="13" r="1.5"/>
                                        </svg>
                                    </div>
                                </div>
                                <div class="document-item">
                                    <div class="document-icon orange">📋</div>
                                    <div class="document-content">
                                        <div class="document-title">技术方案 - React 组件优化</div>
                                        <div class="document-meta">
                                            <span>技术方案</span>
                                            <span>·</span>
                                            <span>3 天前</span>
                                            <span class="tag tag-orange ml-sm">待处理</span>
                                        </div>
                                    </div>
                                    <div class="document-menu">
                                        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                            <circle cx="8" cy="3" r="1.5"/>
                                            <circle cx="8" cy="8" r="1.5"/>
                                            <circle cx="8" cy="13" r="1.5"/>
                                        </svg>
                                    </div>
                                </div>
                                <div class="document-item">
                                    <div class="document-icon purple">📊</div>
                                    <div class="document-content">
                                        <div class="document-title">数据分析报告 - Q4</div>
                                        <div class="document-meta">
                                            <span>数据分析</span>
                                            <span>·</span>
                                            <span>1 周前</span>
                                        </div>
                                    </div>
                                    <div class="document-menu">
                                        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                            <circle cx="8" cy="3" r="1.5"/>
                                            <circle cx="8" cy="8" r="1.5"/>
                                            <circle cx="8" cy="13" r="1.5"/>
                                        </svg>
                                    </div>
                                </div>
                                <div class="document-item">
                                    <div class="document-icon red">🔐</div>
                                    <div class="document-content">
                                        <div class="document-title">安全审计报告</div>
                                        <div class="document-meta">
                                            <span>安全</span>
                                            <span>·</span>
                                            <span>2 周前</span>
                                            <span class="tag tag-red ml-sm">机密</span>
                                        </div>
                                    </div>
                                    <div class="document-menu">
                                        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                            <circle cx="8" cy="3" r="1.5"/>
                                            <circle cx="8" cy="8" r="1.5"/>
                                            <circle cx="8" cy="13" r="1.5"/>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 设置页面 -->
                    <div class="settings-panel" id="settingsPage" style="display: none;">
                        <div class="settings-header">
                            <h1 class="settings-title">设置</h1>
                            <p class="settings-subtitle">自定义您的知识库体验</p>
                        </div>

                        <!-- 外观设置 -->
                        <div class="settings-group">
                            <h2 class="settings-group-title">外观</h2>
                            <div class="settings-item">
                                <div class="settings-item-label">
                                    <div class="settings-item-title">深色模式</div>
                                    <div class="settings-item-description">切换浅色和深色主题</div>
                                </div>
                                <div class="toggle active" id="darkModeToggle" onclick="toggleTheme()"></div>
                            </div>
                            <div class="settings-item">
                                <div class="settings-item-label">
                                    <div class="settings-item-title">主题色</div>
                                    <div class="settings-item-description">选择您喜欢的主题颜色</div>
                                </div>
                                <div class="color-options">
                                    <div class="color-option color-option-blue active"></div>
                                    <div class="color-option color-option-green"></div>
                                    <div class="color-option color-option-orange"></div>
                                    <div class="color-option color-option-purple"></div>
                                    <div class="color-option color-option-red"></div>
                                    <div class="color-option color-option-pink"></div>
                                    <div class="color-option color-option-teal"></div>
                                    <div class="color-option color-option-indigo"></div>
                                </div>
                            </div>
                            <div class="settings-item">
                                <div class="settings-item-label">
                                    <div class="settings-item-title">侧边栏宽度</div>
                                    <div class="settings-item-description">调整侧边栏的宽度</div>
                                </div>
                                <div class="slider-container">
                                    <input type="range" class="slider" min="200" max="400" value="280" id="sidebarWidthSlider">
                                    <span class="slider-value" id="sidebarWidthValue">280px</span>
                                </div>
                            </div>
                            <div class="settings-item">
                                <div class="settings-item-label">
                                    <div class="settings-item-title">字体大小</div>
                                    <div class="settings-item-description">调整界面文字大小</div>
                                </div>
                                <div class="slider-container">
                                    <input type="range" class="slider" min="12" max="20" value="17" id="fontSizeSlider">
                                    <span class="slider-value" id="fontSizeValue">17px</span>
                                </div>
                            </div>
                        </div>

                        <!-- 搜索设置 -->
                        <div class="settings-group">
                            <h2 class="settings-group-title">搜索</h2>
                            <div class="settings-item">
                                <div class="settings-item-label">
                                    <div class="settings-item-title">默认搜索范围</div>
                                    <div class="settings-item-description">选择默认的搜索范围</div>
                                </div>
                                <select class="select">
                                    <option>当前数据库</option>
                                    <option>全部数据库</option>
                                    <option>指定数据库</option>
                                </select>
                            </div>
                            <div class="settings-item">
                                <div class="settings-item-label">
                                    <div class="settings-item-title">拼音搜索</div>
                                    <div class="settings-item-description">支持通过拼音搜索中文内容</div>
                                </div>
                                <div class="toggle active"></div>
                            </div>
                            <div class="settings-item">
                                <div class="settings-item-label">
                                    <div class="settings-item-title">模糊匹配</div>
                                    <div class="settings-item-description">启用模糊搜索建议</div>
                                </div>
                                <div class="toggle active"></div>
                            </div>
                            <div class="settings-item">
                                <div class="settings-item-label">
                                    <div class="settings-item-title">搜索历史</div>
                                    <div class="settings-item-description">保存搜索历史记录</div>
                                </div>
                                <div class="toggle active"></div>
                            </div>
                        </div>

                        <!-- 编辑器设置 -->
                        <div class="settings-group">
                            <h2 class="settings-group-title">编辑器</h2>
                            <div class="settings-item">
                                <div class="settings-item-label">
                                    <div class="settings-item-title">自动保存</div>
                                    <div class="settings-item-description">编辑时自动保存文档</div>
                                </div>
                                <div class="toggle active"></div>
                            </div>
                            <div class="settings-item">
                                <div class="settings-item-label">
                                    <div class="settings-item-title">拼写检查</div>
                                    <div class="settings-item-description">启用拼写检查功能</div>
                                </div>
                                <div class="toggle"></div>
                            </div>
                            <div class="settings-item">
                                <div class="settings-item-label">
                                    <div class="settings-item-title">行号显示</div>
                                    <div class="settings-item-description">在编辑器中显示行号</div>
                                </div>
                                <div class="toggle active"></div>
                            </div>
                        </div>

                        <!-- 数据管理 -->
                        <div class="settings-group">
                            <h2 class="settings-group-title">数据管理</h2>
                            <div class="settings-item">
                                <div class="settings-item-label">
                                    <div class="settings-item-title">自动备份</div>
                                    <div class="settings-item-description">定期自动备份数据</div>
                                </div>
                                <div class="toggle active"></div>
                            </div>
                            <div class="settings-item">
                                <div class="settings-item-label">
                                    <div class="settings-item-title">备份频率</div>
                                    <div class="settings-item-description">选择自动备份的频率</div>
                                </div>
                                <select class="select">
                                    <option>每天</option>
                                    <option>每周</option>
                                    <option>每月</option>
                                </select>
                            </div>
                            <div class="settings-item">
                                <div class="settings-item-label">
                                    <div class="settings-item-title">导出数据</div>
                                    <div class="settings-item-description">导出所有数据为 ZIP 文件</div>
                                </div>
                                <button class="btn btn-secondary">导出数据</button>
                            </div>
                            <div class="settings-item">
                                <div class="settings-item-label">
                                    <div class="settings-item-title">导入数据</div>
                                    <div class="settings-item-description">从备份文件导入数据</div>
                                </div>
                                <button class="btn btn-secondary">导入数据</button>
                            </div>
                        </div>

                        <!-- 关于 -->
                        <div class="settings-group">
                            <h2 class="settings-group-title">关于</h2>
                            <div class="settings-item">
                                <div class="settings-item-label">
                                    <div class="settings-item-title">M1 知识库 V4.0</div>
                                    <div class="settings-item-description">版本 4.0.0 · 构建时间 2026-02-02</div>
                                </div>
                            </div>
                            <div class="settings-item">
                                <div class="settings-item-label">
                                    <div class="settings-item-title">检查更新</div>
                                    <div class="settings-item-description">获取最新版本</div>
                                </div>
                                <button class="btn btn-secondary btn-sm">检查更新</button>
                            </div>
                            <div class="settings-item">
                                <div class="settings-item-label">
                                    <div class="settings-item-title">许可证</div>
                                    <div class="settings-item-description">MIT License</div>
                                </div>
                                <button class="btn btn-secondary btn-sm">查看</button>
                            </div>
                        </div>
                    </div>

                    <!-- 主页 -->
                    <div class="search-page" id="homePage">


                        <div class="hero-section">
                            <div class="hero-content">
                                <h1 class="hero-greeting" id="heroGreeting">早上好</h1>
                                <h2 class="hero-tagline">知识，触手可及</h2>
                                <p class="hero-subtitle">您的个人知识管理中心</p>
                                <div class="search-box-large">
                                    <input type="text" class="search-input-large" placeholder="搜索或创建新文档...">
                                </div>
                            </div>
                        </div>

                        <!-- 智能推荐模块 -->
                        <div class="recommendations-section">
                            <div class="section-header">
                                <h2 class="section-title">为您推荐</h2>
                                <a href="#" class="section-action">刷新推荐 →</a>
                            </div>
                            <div class="recommendations-grid" id="recommendationsGrid">
                                <!-- 推荐模块将通过 JavaScript 动态生成 -->
                            </div>
                        </div>

                        <div class="modules-section">
                            <div class="section-header">
                                <h2 class="section-title">我的模块</h2>
                                <a href="#" class="section-action">管理模块 →</a>
                            </div>
                            <div class="modules-grid">
                                <!-- 标准模块 -->
                                <div class="module module-standard" draggable="true" data-module-id="1">
                                    <div class="module-controls">
                                        <div class="module-drag-handle" title="拖动排序">⋮⋮</div>
                                        <div class="module-resize" title="调整大小">⊞</div>
                                    </div>
                                    <div class="module-icon module-icon-blue">📄</div>
                                    <div class="module-title">最近文档</div>
                                    <div class="module-description">快速访问最近编辑的文档</div>
                                </div>
                                
                                <div class="module module-standard" draggable="true" data-module-id="2">
                                    <div class="module-controls">
                                        <div class="module-drag-handle" title="拖动排序">⋮⋮</div>
                                        <div class="module-resize" title="调整大小">⊞</div>
                                    </div>
                                    <div class="module-icon module-icon-green">🔄</div>
                                    <div class="module-title">工作流</div>
                                    <div class="module-description">自动化工作流程</div>
                                </div>
                                
                                <div class="module module-standard" draggable="true" data-module-id="3">
                                    <div class="module-controls">
                                        <div class="module-drag-handle" title="拖动排序">⋮⋮</div>
                                        <div class="module-resize" title="调整大小">⊞</div>
                                    </div>
                                    <div class="module-icon module-icon-orange">🌐</div>
                                    <div class="module-title">常用网站</div>
                                    <div class="module-description">快速访问收藏的网站</div>
                                </div>
                                
                                <div class="module module-standard" draggable="true" data-module-id="4">
                                    <div class="module-controls">
                                        <div class="module-drag-handle" title="拖动排序">⋮⋮</div>
                                        <div class="module-resize" title="调整大小">⊞</div>
                                    </div>
                                    <div class="module-icon module-icon-purple">📱</div>
                                    <div class="module-title">应用</div>
                                    <div class="module-description">集成第三方应用</div>
                                </div>
                                
                                <!-- 双宽模块 -->
                                <div class="module module-double" draggable="true" data-module-id="5">
                                    <div class="module-controls">
                                        <div class="module-drag-handle" title="拖动排序">⋮⋮</div>
                                        <div class="module-resize" title="调整大小">⊞</div>
                                    </div>
                                    <div class="module-icon module-icon-indigo">📊</div>
                                    <div class="module-title">知识统计</div>
                                    <div class="module-description">知识库使用情况分析</div>
                                </div>
                                
                                <div class="module module-double" draggable="true" data-module-id="6">
                                    <div class="module-controls">
                                        <div class="module-drag-handle" title="拖动排序">⋮⋮</div>
                                        <div class="module-resize" title="调整大小">⊞</div>
                                    </div>
                                    <div class="module-icon module-icon-red">📅</div>
                                    <div class="module-title">日历</div>
                                    <div class="module-description">查看和管理日程</div>
                                </div>
                                
                                <!-- 全宽模块 -->
                                <div class="module module-full" draggable="true" data-module-id="7">
                                    <div class="module-controls">
                                        <div class="module-drag-handle" title="拖动排序">⋮⋮</div>
                                        <div class="module-resize" title="调整大小">⊞</div>
                                    </div>
                                    <div class="module-icon module-icon-teal">📋</div>
                                    <div class="module-title">待办事项</div>
                                    <div class="module-description">管理您的任务和待办事项</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 历史页面 -->
                    <div class="search-page" id="historyPage" style="display: none;">
                        <div class="search-hero">
                            <div class="search-hero-icon">🕒</div>
                            <h1 class="search-hero-title">浏览历史</h1>
                            <p class="search-hero-subtitle">查看您最近访问的文档</p>
                        </div>

                        <div class="quick-access">
                            <div class="section-header">
                                <h2 class="section-title">最近访问</h2>
                                <button class="btn btn-secondary btn-sm">清空历史</button>
                            </div>
                            <div class="document-list">
                                <div class="document-item">
                                    <div class="document-icon">📄</div>
                                    <div class="document-content">
                                        <div class="document-title">产品需求文档 V2.0</div>
                                        <div class="document-meta">
                                            <span>2 小时前</span>
                                            <span>·</span>
                                            <span>工作项目</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="document-item">
                                    <div class="document-icon green">📝</div>
                                    <div class="document-content">
                                        <div class="document-title">会议记录 - 产品评审</div>
                                        <div class="document-meta">
                                            <span>昨天</span>
                                            <span>·</span>
                                            <span>会议记录</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="document-item">
                                    <div class="document-icon orange">📋</div>
                                    <div class="document-content">
                                        <div class="document-title">技术方案 - React 组件优化</div>
                                        <div class="document-meta">
                                            <span>3 天前</span>
                                            <span>·</span>
                                            <span>技术方案</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 导入页面 -->
                    <div class="search-page" id="importPage" style="display: none;">
                        <div class="search-hero">
                            <div class="search-hero-icon">📤</div>
                            <h1 class="search-hero-title">导入内容</h1>
                            <p class="search-hero-subtitle">从其他应用导入文档和数据</p>
                        </div>

                        <div class="quick-access">
                            <div class="grid">
                                <div class="card">
                                    <div class="card-icon blue">📄</div>
                                    <div class="card-title">导入文档</div>
                                    <div class="card-subtitle">支持 PDF、Word、Markdown 等格式</div>
                                </div>
                                <div class="card">
                                    <div class="card-icon green">🔗</div>
                                    <div class="card-title">导入链接</div>
                                    <div class="card-subtitle">从浏览器导入书签和链接</div>
                                </div>
                                <div class="card">
                                    <div class="card-icon orange">📊</div>
                                    <div class="card-title">导入数据</div>
                                    <div class="card-subtitle">从 CSV、Excel 导入表格数据</div>
                                </div>
                                <div class="card">
                                    <div class="card-icon purple">📁</div>
                                    <div class="card-title">导入文件夹</div>
                                    <div class="card-subtitle">批量导入整个文件夹</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 模板页面 -->
                    <div class="search-page" id="templatesPage" style="display: none;">
                        <div class="search-hero">
                            <div class="search-hero-icon">📋</div>
                            <h1 class="search-hero-title">文档模板</h1>
                            <p class="search-hero-subtitle">使用预设模板快速创建文档</p>
                        </div>

                        <div class="quick-access">
                            <div class="grid">
                                <div class="card">
                                    <div class="card-icon blue">📄</div>
                                    <div class="card-title">产品需求文档</div>
                                    <div class="card-subtitle">PRD 模板</div>
                                </div>
                                <div class="card">
                                    <div class="card-icon green">📝</div>
                                    <div class="card-title">会议记录</div>
                                    <div class="card-subtitle">会议纪要模板</div>
                                </div>
                                <div class="card">
                                    <div class="card-icon orange">📋</div>
                                    <div class="card-title">技术方案</div>
                                    <div class="card-subtitle">技术文档模板</div>
                                </div>
                                <div class="card">
                                    <div class="card-icon purple">📊</div>
                                    <div class="card-title">数据分析</div>
                                    <div class="card-subtitle">数据分析报告模板</div>
                                </div>
                                <div class="card">
                                    <div class="card-icon red">🎯</div>
                                    <div class="card-title">项目计划</div>
                                    <div class="card-subtitle">项目规划模板</div>
                                </div>
                                <div class="card">
                                    <div class="card-icon indigo">📚</div>
                                    <div class="card-title">学习笔记</div>
                                    <div class="card-subtitle">读书笔记模板</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 文档页面 -->
                    <div class="search-page" id="documentsPage" style="display: none;">
                        <div class="search-hero">
                            <div class="search-hero-icon">📄</div>
                            <h1 class="search-hero-title">所有文档</h1>
                            <p class="search-hero-subtitle">管理您的文档库</p>
                        </div>

                        <div class="quick-access">
                            <div class="section-header">
                                <h2 class="section-title">文档列表</h2>
                                <button class="btn btn-primary">新建文档</button>
                            </div>
                            <div class="document-list">
                                <div class="document-item">
                                    <div class="document-icon">📄</div>
                                    <div class="document-content">
                                        <div class="document-title">产品需求文档 V2.0</div>
                                        <div class="document-meta">
                                            <span>2026-02-01</span>
                                            <span>·</span>
                                            <span class="tag tag-blue">重要</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="document-item">
                                    <div class="document-icon green">📝</div>
                                    <div class="document-content">
                                        <div class="document-title">会议记录 - 产品评审</div>
                                        <div class="document-meta">
                                            <span>2026-01-31</span>
                                            <span>·</span>
                                            <span class="tag tag-green">已完成</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="document-item">
                                    <div class="document-icon orange">📋</div>
                                    <div class="document-content">
                                        <div class="document-title">技术方案 - React 组件优化</div>
                                        <div class="document-meta">
                                            <span>2026-01-30</span>
                                            <span>·</span>
                                            <span class="tag tag-orange">待处理</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 标签页面 -->
                    <div class="search-page" id="tagsPage" style="display: none;">
                        <div class="search-hero">
                            <div class="search-hero-icon">🏷️</div>
                            <h1 class="search-hero-title">标签管理</h1>
                            <p class="search-hero-subtitle">组织和管理您的标签</p>
                        </div>

                        <div class="quick-access">
                            <div class="grid">
                                <div class="card">
                                    <div class="card-icon blue">🏷️</div>
                                    <div class="card-title">重要</div>
                                    <div class="card-subtitle">23 个文档</div>
                                </div>
                                <div class="card">
                                    <div class="card-icon green">🏷️</div>
                                    <div class="card-title">已完成</div>
                                    <div class="card-subtitle">15 个文档</div>
                                </div>
                                <div class="card">
                                    <div class="card-icon orange">🏷️</div>
                                    <div class="card-title">待处理</div>
                                    <div class="card-subtitle">8 个文档</div>
                                </div>
                                <div class="card">
                                    <div class="card-icon purple">🏷️</div>
                                    <div class="card-title">技术</div>
                                    <div class="card-subtitle">12 个文档</div>
                                </div>
                                <div class="card">
                                    <div class="card-icon red">🏷️</div>
                                    <div class="card-title">机密</div>
                                    <div class="card-subtitle">5 个文档</div>
                                </div>
                                <div class="card">
                                    <div class="card-icon indigo">🏷️</div>
                                    <div class="card-title">学习</div>
                                    <div class="card-subtitle">18 个文档</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 网站页面 -->
                    <div class="search-page" id="websitesPage" style="display: none;">
                        <div class="search-hero">
                            <div class="search-hero-icon">🌐</div>
                            <h1 class="search-hero-title">网站收藏</h1>
                            <p class="search-hero-subtitle">管理您的书签和常用网站</p>
                        </div>

                        <div class="quick-access">
                            <div class="section-header">
                                <h2 class="section-title">收藏的网站</h2>
                                <button class="btn btn-primary">添加网站</button>
                            </div>
                            <div class="grid">
                                <div class="card">
                                    <div class="card-icon blue">🌐</div>
                                    <div class="card-title">Google</div>
                                    <div class="card-subtitle">www.google.com</div>
                                </div>
                                <div class="card">
                                    <div class="card-icon green">🌐</div>
                                    <div class="card-title">GitHub</div>
                                    <div class="card-subtitle">www.github.com</div>
                                </div>
                                <div class="card">
                                    <div class="card-icon orange">🌐</div>
                                    <div class="card-title">Stack Overflow</div>
                                    <div class="card-subtitle">stackoverflow.com</div>
                                </div>
                                <div class="card">
                                    <div class="card-icon purple">🌐</div>
                                    <div class="card-title">MDN Web Docs</div>
                                    <div class="card-subtitle">developer.mozilla.org</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 应用页面 -->
                    <div class="search-page" id="appsPage" style="display: none;">
                        <div class="search-hero">
                            <div class="search-hero-icon">📱</div>
                            <h1 class="search-hero-title">集成应用</h1>
                            <p class="search-hero-subtitle">连接第三方服务</p>
                        </div>

                        <div class="quick-access">
                            <div class="grid">
                                <div class="card">
                                    <div class="card-icon blue">📧</div>
                                    <div class="card-title">邮件</div>
                                    <div class="card-subtitle">集成邮件服务</div>
                                </div>
                                <div class="card">
                                    <div class="card-icon green">📅</div>
                                    <div class="card-title">日历</div>
                                    <div class="card-subtitle">集成日历服务</div>
                                </div>
                                <div class="card">
                                    <div class="card-icon orange">📋</div>
                                    <div class="card-title">任务</div>
                                    <div class="card-subtitle">集成任务管理</div>
                                </div>
                                <div class="card">
                                    <div class="card-icon purple">☁️</div>
                                    <div class="card-title">云存储</div>
                                    <div class="card-subtitle">集成云存储服务</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 知识图谱页面 -->
                    <div class="search-page" id="graphPage" style="display: none;">
                        <div class="search-hero">
                            <div class="search-hero-icon">🔗</div>
                            <h1 class="search-hero-title">知识图谱</h1>
                            <p class="search-hero-subtitle">可视化您的知识网络</p>
                        </div>

                        <div class="quick-access">
                            <div class="section-header">
                                <h2 class="section-title">知识连接</h2>
                                <div class="flex gap-sm">
                                    <button class="btn btn-secondary btn-sm">放大</button>
                                    <button class="btn btn-secondary btn-sm">缩小</button>
                                    <button class="btn btn-secondary btn-sm">重置视图</button>
                                    <button class="btn btn-secondary btn-sm">导出图谱</button>
                                </div>
                            </div>
                            <div style="background: var(--bg-secondary); border-radius: var(--radius-lg); padding: var(--spacing-3xl); text-align: center; border: 1px solid var(--separator-transparent); position: relative; overflow: hidden;">
                                <div style="position: absolute; inset: 0; background: radial-gradient(circle at 50% 50%, rgba(0, 102, 204, 0.05) 0%, transparent 70%); z-index: 0;"></div>
                                <div style="position: relative; z-index: 1;">
                                    <div style="font-size: 120px; margin-bottom: var(--spacing-xl); filter: drop-shadow(0 4px 12px rgba(0, 102, 204, 0.2));">🔗</div>
                                    <h3 style="font-size: var(--font-size-headline); margin-bottom: var(--spacing-md); color: var(--text-primary);">知识图谱可视化</h3>
                                    <p style="color: var(--text-secondary); max-width: 600px; margin: 0 auto 24px; line-height: 1.6;">这里将显示您文档之间的关联关系，帮助您发现知识的连接点。</p>
                                    
                                    <div class="flex flex-col gap-md max-w-md mx-auto">
                                        <div class="flex items-center justify-between p-lg rounded-lg" style="background: var(--bg-secondary);">
                                            <div>
                                                <div class="font-medium">文档关联</div>
                                                <div class="text-sm text-tertiary">1,247 个连接</div>
                                            </div>
                                            <div class="tag tag-blue">活跃</div>
                                        </div>
                                        <div class="flex items-center justify-between p-lg rounded-lg" style="background: var(--bg-secondary);">
                                            <div>
                                                <div class="font-medium">知识中心</div>
                                                <div class="text-sm text-tertiary">48 个核心概念</div>
                                            </div>
                                            <div class="tag tag-green">已识别</div>
                                        </div>
                                        <div class="flex items-center justify-between p-lg rounded-lg" style="background: var(--bg-secondary);">
                                            <div>
                                                <div class="font-medium">关联强度</div>
                                                <div class="text-sm text-tertiary">平均相似度: 78%</div>
                                            </div>
                                            <div class="tag tag-orange">分析中</div>
                                        </div>
                                    </div>
                                    
                                    <div class="mt-2xl">
                                        <button class="btn btn-primary">生成图谱</button>
                                        <button class="btn btn-secondary ml-lg">调整布局</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="quick-access">
                            <div class="section-header">
                                <h2 class="section-title">图谱分析</h2>
                                <a href="#" class="section-action">详细报告 →</a>
                            </div>
                            <div class="grid">
                                <div class="card">
                                    <div class="card-icon blue">📈</div>
                                    <div class="card-title">连接密度</div>
                                    <div class="card-subtitle">文档之间的关联密度分析</div>
                                </div>
                                <div class="card">
                                    <div class="card-icon green">🎯</div>
                                    <div class="card-title">知识中心</div>
                                    <div class="card-subtitle">识别核心概念和主题</div>
                                </div>
                                <div class="card">
                                    <div class="card-icon orange">🔍</div>
                                    <div class="card-title">关联强度</div>
                                    <div class="card-subtitle">分析文档间的关联强度</div>
                                </div>
                                <div class="card">
                                    <div class="card-icon purple">📊</div>
                                    <div class="card-title">趋势分析</div>
                                    <div class="card-subtitle">知识网络的发展趋势</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 工作流页面 -->
                    <div class="search-page" id="workflowPage" style="display: none;">
                        <div class="search-hero">
                            <div class="search-hero-icon">⚙️</div>
                            <h1 class="search-hero-title">工作流</h1>
                            <p class="search-hero-subtitle">自动化您的知识管理流程</p>
                        </div>

                        <div class="quick-access">
                            <div class="section-header">
                                <h2 class="section-title">自动化工作流</h2>
                                <div class="flex gap-sm">
                                    <button class="btn btn-primary">创建工作流</button>
                                    <button class="btn btn-secondary">导入工作流</button>
                                </div>
                            </div>
                            <div class="document-list">
                                <div class="document-item">
                                    <div class="document-icon blue">🏷️</div>
                                    <div class="document-content">
                                        <div class="document-title">自动标签</div>
                                        <div class="document-meta">
                                            <span>根据内容自动添加相关标签</span>
                                            <span>·</span>
                                            <span class="tag tag-green">启用</span>
                                            <span>·</span>
                                            <span>每天运行</span>
                                        </div>
                                    </div>
                                    <div class="document-menu">
                                        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                            <circle cx="8" cy="3" r="1.5"/>
                                            <circle cx="8" cy="8" r="1.5"/>
                                            <circle cx="8" cy="13" r="1.5"/>
                                        </svg>
                                    </div>
                                </div>
                                <div class="document-item">
                                    <div class="document-icon green">💾</div>
                                    <div class="document-content">
                                        <div class="document-title">定期备份</div>
                                        <div class="document-meta">
                                            <span>每天自动备份数据到云存储</span>
                                            <span>·</span>
                                            <span class="tag tag-green">启用</span>
                                            <span>·</span>
                                            <span>每天 08:00</span>
                                        </div>
                                    </div>
                                    <div class="document-menu">
                                        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                            <circle cx="8" cy="3" r="1.5"/>
                                            <circle cx="8" cy="8" r="1.5"/>
                                            <circle cx="8" cy="13" r="1.5"/>
                                        </svg>
                                    </div>
                                </div>
                                <div class="document-item">
                                    <div class="document-icon orange">☁️</div>
                                    <div class="document-content">
                                        <div class="document-title">内容同步</div>
                                        <div class="document-meta">
                                            <span>同步到 Google Drive</span>
                                            <span>·</span>
                                            <span class="tag tag-green">启用</span>
                                            <span>·</span>
                                            <span>每小时同步</span>
                                        </div>
                                    </div>
                                    <div class="document-menu">
                                        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                            <circle cx="8" cy="3" r="1.5"/>
                                            <circle cx="8" cy="8" r="1.5"/>
                                            <circle cx="8" cy="13" r="1.5"/>
                                        </svg>
                                    </div>
                                </div>
                                <div class="document-item">
                                    <div class="document-icon purple">📊</div>
                                    <div class="document-content">
                                        <div class="document-title">数据分析</div>
                                        <div class="document-meta">
                                            <span>生成每周使用报告</span>
                                            <span>·</span>
                                            <span class="tag tag-green">启用</span>
                                            <span>·</span>
                                            <span>每周一 09:00</span>
                                        </div>
                                    </div>
                                    <div class="document-menu">
                                        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                            <circle cx="8" cy="3" r="1.5"/>
                                            <circle cx="8" cy="8" r="1.5"/>
                                            <circle cx="8" cy="13" r="1.5"/>
                                        </svg>
                                    </div>
                                </div>
                                <div class="document-item">
                                    <div class="document-icon red">🔒</div>
                                    <div class="document-content">
                                        <div class="document-title">安全扫描</div>
                                        <div class="document-meta">
                                            <span>扫描敏感信息</span>
                                            <span>·</span>
                                            <span class="tag tag-green">启用</span>
                                            <span>·</span>
                                            <span>每天运行</span>
                                        </div>
                                    </div>
                                    <div class="document-menu">
                                        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                            <circle cx="8" cy="3" r="1.5"/>
                                            <circle cx="8" cy="8" r="1.5"/>
                                            <circle cx="8" cy="13" r="1.5"/>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="quick-access">
                            <div class="section-header">
                                <h2 class="section-title">推荐工作流</h2>
                                <a href="#" class="section-action">查看全部 →</a>
                            </div>
                            <div class="grid">
                                <div class="card">
                                    <div class="card-icon blue">📧</div>
                                    <div class="card-title">邮件同步</div>
                                    <div class="card-subtitle">自动同步重要邮件到知识库</div>
                                </div>
                                <div class="card">
                                    <div class="card-icon green">📅</div>
                                    <div class="card-title">日历集成</div>
                                    <div class="card-subtitle">自动创建会议记录文档</div>
                                </div>
                                <div class="card">
                                    <div class="card-icon orange">📝</div>
                                    <div class="card-title">内容转换</div>
                                    <div class="card-subtitle">自动转换文档格式</div>
                                </div>
                                <div class="card">
                                    <div class="card-icon purple">🔍</div>
                                    <div class="card-title">智能搜索</div>
                                    <div class="card-subtitle">增强搜索结果相关性</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 收藏夹页面 -->
                    <div class="search-page" id="favoritesPage" style="display: none;">
                        <div class="search-hero">
                            <div class="search-hero-icon">⭐</div>
                            <h1 class="search-hero-title">收藏夹</h1>
                            <p class="search-hero-subtitle">您标记的重要项目</p>
                        </div>

                        <div class="quick-access">
                            <div class="section-header">
                                <h2 class="section-title">收藏的项目</h2>
                            </div>
                            <div class="document-list">
                                <div class="document-item">
                                    <div class="document-icon">📄</div>
                                    <div class="document-content">
                                        <div class="document-title">产品需求文档 V2.0</div>
                                        <div class="document-meta">
                                            <span>工作项目</span>
                                            <span>·</span>
                                            <span class="tag tag-blue">重要</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="document-item">
                                    <div class="document-icon green">📝</div>
                                    <div class="document-content">
                                        <div class="document-title">技术方案 - React 组件优化</div>
                                        <div class="document-meta">
                                            <span>技术方案</span>
                                            <span>·</span>
                                            <span class="tag tag-orange">待处理</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="document-item">
                                    <div class="document-icon orange">🌐</div>
                                    <div class="document-content">
                                        <div class="document-title">GitHub</div>
                                        <div class="document-meta">
                                            <span>网站</span>
                                            <span>·</span>
                                            <span>www.github.com</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 回收站页面 -->
                    <div class="search-page" id="trashPage" style="display: none;">
                        <div class="search-hero">
                            <div class="search-hero-icon">🗑️</div>
                            <h1 class="search-hero-title">回收站</h1>
                            <p class="search-hero-subtitle">管理已删除的项目</p>
                        </div>

                        <div class="quick-access">
                            <div class="section-header">
                                <h2 class="section-title">已删除项目</h2>
                                <div class="flex gap-sm">
                                    <button class="btn btn-secondary btn-sm">恢复所有</button>
                                    <button class="btn btn-danger btn-sm">清空回收站</button>
                                </div>
                            </div>
                            <div class="document-list">
                                <div class="document-item">
                                    <div class="document-icon">📄</div>
                                    <div class="document-content">
                                        <div class="document-title">旧版产品需求文档</div>
                                        <div class="document-meta">
                                            <span>3 天前删除</span>
                                            <span>·</span>
                                            <span>工作项目</span>
                                        </div>
                                    </div>
                                    <div class="document-menu">
                                        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                            <circle cx="8" cy="3" r="1.5"/>
                                            <circle cx="8" cy="8" r="1.5"/>
                                            <circle cx="8" cy="13" r="1.5"/>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 统计页面 -->
                    <div class="search-page" id="statisticsPage" style="display: none;">
                        <div class="search-hero">
                            <div class="search-hero-icon">📊</div>
                            <h1 class="search-hero-title">数据统计</h1>
                            <p class="search-hero-subtitle">了解您的知识库使用情况</p>
                        </div>

                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-icon blue">📄</div>
                                <div class="stat-value">156</div>
                                <div class="stat-label">文档总数</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon green">📁</div>
                                <div class="stat-value">12</div>
                                <div class="stat-label">文件夹</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon orange">🏷️</div>
                                <div class="stat-value">28</div>
                                <div class="stat-label">标签</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon purple">📊</div>
                                <div class="stat-value">89K</div>
                                <div class="stat-label">总字数</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon red">🕒</div>
                                <div class="stat-value">120h</div>
                                <div class="stat-label">使用时长</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon indigo">📈</div>
                                <div class="stat-value">+15%</div>
                                <div class="stat-label">本月增长</div>
                            </div>
                        </div>

                        <!-- 统计控制面板 -->
                        <div class="stats-controls">
                            <div class="control-row">
                                <div class="control-group">
                                    <label>时间范围</label>
                                    <select class="control-select">
                                        <option>最近7天</option>
                                        <option selected>最近30天</option>
                                        <option>最近90天</option>
                                        <option>今年</option>
                                        <option>自定义</option>
                                    </select>
                                </div>
                                <div class="control-group">
                                    <label>数据类型</label>
                                    <select class="control-select">
                                        <option selected>全部数据</option>
                                        <option>文档</option>
                                        <option>标签</option>
                                        <option>网站</option>
                                        <option>应用</option>
                                    </select>
                                </div>
                                <div class="control-actions">
                                    <button class="btn btn-secondary">导出数据</button>
                                    <button class="btn btn-primary">刷新数据</button>
                                </div>
                            </div>
                        </div>

                        <!-- 核心数据概览 -->
                        <div class="core-metrics">
                            <div class="metric-card">
                                <div class="metric-header">
                                    <h3 class="metric-title">文档活跃度</h3>
                                    <span class="metric-change positive">+12%</span>
                                </div>
                                <div class="metric-content">
                                    <div class="metric-value">85%</div>
                                    <div class="metric-desc">过去30天文档编辑频率</div>
                                </div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-header">
                                    <h3 class="metric-title">知识增长</h3>
                                    <span class="metric-change positive">+24%</span>
                                </div>
                                <div class="metric-content">
                                    <div class="metric-value">1.2K</div>
                                    <div class="metric-desc">过去30天新增字数</div>
                                </div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-header">
                                    <h3 class="metric-title">使用效率</h3>
                                    <span class="metric-change positive">+8%</span>
                                </div>
                                <div class="metric-content">
                                    <div class="metric-value">7.2h</div>
                                    <div class="metric-desc">每周平均使用时长</div>
                                </div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-header">
                                    <h3 class="metric-title">标签覆盖</h3>
                                    <span class="metric-change negative">-3%</span>
                                </div>
                                <div class="metric-content">
                                    <div class="metric-value">68%</div>
                                    <div class="metric-desc">文档标签覆盖率</div>
                                </div>
                            </div>
                        </div>

                        <!-- 数据可视化区域 -->
                        <div class="data-visualization">
                            <!-- 使用趋势 -->
                            <div class="viz-section">
                                <div class="section-header">
                                    <h2 class="section-title">使用趋势</h2>
                                    <div class="section-actions">
                                        <button class="btn btn-sm">日</button>
                                        <button class="btn btn-sm btn-active">周</button>
                                        <button class="btn btn-sm">月</button>
                                    </div>
                                </div>
                                <div class="viz-card">
                                    <div class="chart-container">
                                        <svg class="trend-chart" width="100%" height="200" viewBox="0 0 800 200">
                                            <defs>
                                                <linearGradient id="trendGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                                                    <stop offset="0%" stop-color="var(--apple-blue)"/>
                                                    <stop offset="100%" stop-color="var(--apple-indigo)"/>
                                                </linearGradient>
                                            </defs>
                                            <g class="grid" stroke="var(--separator-transparent)" stroke-width="1">
                                                <line x1="50" y1="40" x2="750" y2="40"/>
                                                <line x1="50" y1="80" x2="750" y2="80"/>
                                                <line x1="50" y1="120" x2="750" y2="120"/>
                                                <line x1="50" y1="160" x2="750" y2="160"/>
                                                <line x1="50" y1="40" x2="50" y2="160"/>
                                            </g>
                                            <path d="M50,120 L150,90 L250,110 L350,70 L450,80 L550,60 L650,40 L750,50" 
                                                  stroke="url(#trendGradient)" 
                                                  stroke-width="2" 
                                                  fill="none" 
                                                  stroke-linecap="round" 
                                                  stroke-linejoin="round"/>
                                            <path d="M50,120 L150,90 L250,110 L350,70 L450,80 L550,60 L650,40 L750,50 L750,160 L50,160 Z" 
                                                  fill="url(#trendGradient)" 
                                                  fill-opacity="0.1"/>
                                        </svg>
                                    </div>
                                </div>
                            </div>

                            <!-- 知识结构分析 -->
                            <div class="viz-section">
                                <div class="section-header">
                                    <h2 class="section-title">知识结构分析</h2>
                                    <span class="section-subtitle">文档类型与标签分布</span>
                                </div>
                                <div class="structure-grid">
                                    <div class="structure-card">
                                        <h3>文档类型分布</h3>
                                        <div class="distribution-chart">
                                            <div class="distribution-item">
                                                <div class="distribution-bar" style="width: 45%; background: var(--apple-blue);"></div>
                                                <span>文本文档 (45%)</span>
                                            </div>
                                            <div class="distribution-item">
                                                <div class="distribution-bar" style="width: 25%; background: var(--apple-green);"></div>
                                                <span>Markdown (25%)</span>
                                            </div>
                                            <div class="distribution-item">
                                                <div class="distribution-bar" style="width: 15%; background: var(--apple-orange);"></div>
                                                <span>代码片段 (15%)</span>
                                            </div>
                                            <div class="distribution-item">
                                                <div class="distribution-bar" style="width: 15%; background: var(--apple-purple);"></div>
                                                <span>其他 (15%)</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="structure-card">
                                        <h3>热门标签</h3>
                                        <div class="tag-cloud">
                                            <span class="tag tag-large tag-blue">重要</span>
                                            <span class="tag tag-medium tag-green">工作</span>
                                            <span class="tag tag-large tag-orange">学习</span>
                                            <span class="tag tag-small tag-purple">创意</span>
                                            <span class="tag tag-medium tag-red">个人</span>
                                            <span class="tag tag-small tag-indigo">项目</span>
                                            <span class="tag tag-small tag-teal">研究</span>
                                            <span class="tag tag-medium tag-blue">计划</span>
                                            <span class="tag tag-small tag-green">资源</span>
                                            <span class="tag tag-large tag-orange">笔记</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- 智能洞察 -->
                            <div class="insights-section">
                                <div class="section-header">
                                    <h2 class="section-title">智能洞察</h2>
                                    <span class="section-subtitle">基于您的使用习惯</span>
                                </div>
                                <div class="insights-grid">
                                    <div class="insight-card">
                                        <div class="insight-icon positive">📈</div>
                                        <div class="insight-content">
                                            <h3>使用高峰期</h3>
                                            <p>您通常在工作日的 9:00-11:00 和 14:00-16:00 活跃度最高</p>
                                        </div>
                                    </div>
                                    <div class="insight-card">
                                        <div class="insight-icon neutral">📋</div>
                                        <div class="insight-content">
                                            <h3>未标记文档</h3>
                                            <p>您有 15 个文档尚未添加标签，建议添加标签以提高可搜索性</p>
                                        </div>
                                    </div>
                                    <div class="insight-card">
                                        <div class="insight-icon negative">⚠️</div>
                                        <div class="insight-content">
                                            <h3>备份提醒</h3>
                                            <p>您的知识库已有 14 天未备份，建议立即备份以确保数据安全</p>
                                        </div>
                                    </div>
                                    <div class="insight-card">
                                        <div class="insight-icon positive">💡</div>
                                        <div class="insight-content">
                                            <h3>知识建议</h3>
                                            <p>基于您的使用习惯，建议创建 "项目管理" 标签分类以更好地组织相关文档</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- 个性化建议 -->
                            <div class="recommendations-section">
                                <div class="section-header">
                                    <h2 class="section-title">个性化建议</h2>
                                    <span class="section-subtitle">提升知识库效率</span>
                                </div>
                                <div class="recommendation-grid">
                                    <div class="recommendation-card">
                                        <div class="recommendation-icon">📚</div>
                                        <h3>文档组织优化</h3>
                                        <p>使用文件夹和标签的组合来更好地组织您的文档</p>
                                        <button class="btn btn-sm btn-secondary">查看详情</button>
                                    </div>
                                    <div class="recommendation-card">
                                        <div class="recommendation-icon">⚡</div>
                                        <h3>工作流自动化</h3>
                                        <p>创建自动化工作流以提高重复性任务的效率</p>
                                        <button class="btn btn-sm btn-secondary">查看详情</button>
                                    </div>
                                    <div class="recommendation-card">
                                        <div class="recommendation-icon">🔗</div>
                                        <h3>文档关联</h3>
                                        <p>建立文档之间的关联关系，形成知识网络</p>
                                        <button class="btn btn-sm btn-secondary">查看详情</button>
                                    </div>
                                </div>
                            </div>

                            <!-- 分类分析 -->
                            <div class="categories-section">
                                <div class="section-header">
                                    <h2 class="section-title">分类分析</h2>
                                    <span class="section-subtitle">文件量最多的前10个分类</span>
                                </div>
                                <div class="categories-grid">
                                    <div class="category-card" onclick="openCategory('工作项目')">
                                        <div class="category-icon blue">💼</div>
                                        <div class="category-content">
                                            <h3>工作项目</h3>
                                            <p class="category-count">24 个文件</p>
                                        </div>
                                        <div class="category-action">
                                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
                                                <path d="M9 13l4-4-4-4M9 9l4 4-4 4"/>
                                            </svg>
                                        </div>
                                    </div>
                                    <div class="category-card" onclick="openCategory('学习资料')">
                                        <div class="category-icon green">📚</div>
                                        <div class="category-content">
                                            <h3>学习资料</h3>
                                            <p class="category-count">18 个文件</p>
                                        </div>
                                        <div class="category-action">
                                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
                                                <path d="M9 13l4-4-4-4M9 9l4 4-4 4"/>
                                            </svg>
                                        </div>
                                    </div>
                                    <div class="category-card" onclick="openCategory('个人笔记')">
                                        <div class="category-icon orange">📝</div>
                                        <div class="category-content">
                                            <h3>个人笔记</h3>
                                            <p class="category-count">15 个文件</p>
                                        </div>
                                        <div class="category-action">
                                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
                                                <path d="M9 13l4-4-4-4M9 9l4 4-4 4"/>
                                            </svg>
                                        </div>
                                    </div>
                                    <div class="category-card" onclick="openCategory('项目计划')">
                                        <div class="category-icon purple">🎯</div>
                                        <div class="category-content">
                                            <h3>项目计划</h3>
                                            <p class="category-count">12 个文件</p>
                                        </div>
                                        <div class="category-action">
                                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
                                                <path d="M9 13l4-4-4-4M9 9l4 4-4 4"/>
                                            </svg>
                                        </div>
                                    </div>
                                    <div class="category-card" onclick="openCategory('技术文档')">
                                        <div class="category-icon red">💻</div>
                                        <div class="category-content">
                                            <h3>技术文档</h3>
                                            <p class="category-count">10 个文件</p>
                                        </div>
                                        <div class="category-action">
                                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
                                                <path d="M9 13l4-4-4-4M9 9l4 4-4 4"/>
                                            </svg>
                                        </div>
                                    </div>
                                    <div class="category-card" onclick="openCategory('会议记录')">
                                        <div class="category-icon indigo">📋</div>
                                        <div class="category-content">
                                            <h3>会议记录</h3>
                                            <p class="category-count">8 个文件</p>
                                        </div>
                                        <div class="category-action">
                                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
                                                <path d="M9 13l4-4-4-4M9 9l4 4-4 4"/>
                                            </svg>
                                        </div>
                                    </div>
                                    <div class="category-card" onclick="openCategory('创意构思')">
                                        <div class="category-icon teal">💡</div>
                                        <div class="category-content">
                                            <h3>创意构思</h3>
                                            <p class="category-count">7 个文件</p>
                                        </div>
                                        <div class="category-action">
                                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
                                                <path d="M9 13l4-4-4-4M9 9l4 4-4 4"/>
                                            </svg>
                                        </div>
                                    </div>
                                    <div class="category-card" onclick="openCategory('资源收集')">
                                        <div class="category-icon blue">📦</div>
                                        <div class="category-content">
                                            <h3>资源收集</h3>
                                            <p class="category-count">6 个文件</p>
                                        </div>
                                        <div class="category-action">
                                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
                                                <path d="M9 13l4-4-4-4M9 9l4 4-4 4"/>
                                            </svg>
                                        </div>
                                    </div>
                                    <div class="category-card" onclick="openCategory('研究资料')">
                                        <div class="category-icon green">🔬</div>
                                        <div class="category-content">
                                            <h3>研究资料</h3>
                                            <p class="category-count">5 个文件</p>
                                        </div>
                                        <div class="category-action">
                                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
                                                <path d="M9 13l4-4-4-4M9 9l4 4-4 4"/>
                                            </svg>
                                        </div>
                                    </div>
                                    <div class="category-card" onclick="openCategory('健康管理')">
                                        <div class="category-icon orange">🏥</div>
                                        <div class="category-content">
                                            <h3>健康管理</h3>
                                            <p class="category-count">4 个文件</p>
                                        </div>
                                        <div class="category-action">
                                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
                                                <path d="M9 13l4-4-4-4M9 9l4 4-4 4"/>
                                            </svg>
                                        </div>
                                    </div>
                                </div>
                            </div>
                    </div>

                    <!-- 备份页面 -->
                    <div id="backupPage" style="display: none; width: 100%;">
                        <div class="search-hero">
                            <div class="search-hero-icon">💾</div>
                            <h1 class="search-hero-title">数据备份</h1>
                            <p class="search-hero-subtitle">保护您的重要数据，随时备份和恢复</p>
                        </div>

                        <!-- 备份统计卡片 -->
                        <div class="modules-grid" style="margin-bottom: var(--spacing-2xl);">
                            <div class="module">
                                <div class="module-content">
                                    <div class="module-title">现有备份</div>
                                    <div class="module-value" style="font-size: var(--font-size-title2); font-weight: var(--font-weight-bold); color: var(--apple-blue);">12</div>
                                    <div class="module-subtitle">个备份文件</div>
                                </div>
                            </div>
                            <div class="module">
                                <div class="module-content">
                                    <div class="module-title">备份总大小</div>
                                    <div class="module-value" style="font-size: var(--font-size-title2); font-weight: var(--font-weight-bold); color: var(--apple-green);">2.4 GB</div>
                                    <div class="module-subtitle">存储空间</div>
                                </div>
                            </div>
                            <div class="module">
                                <div class="module-content">
                                    <div class="module-title">上次备份</div>
                                    <div class="module-value" style="font-size: var(--font-size-title2); font-weight: var(--font-weight-bold); color: var(--apple-purple);">2小时前</div>
                                    <div class="module-subtitle">自动备份</div>
                                </div>
                            </div>
                            <div class="module">
                                <div class="module-content">
                                    <div class="module-title">备份状态</div>
                                    <div class="module-value" style="font-size: var(--font-size-title2); font-weight: var(--font-weight-bold); color: var(--apple-green);">正常</div>
                                    <div class="module-subtitle">自动备份已启用</div>
                                </div>
                            </div>
                        </div>

                        <!-- 备份操作区 -->
                        <div class="quick-access" style="margin-bottom: var(--spacing-2xl);">
                            <div class="section-header">
                                <h2 class="section-title">备份操作</h2>
                            </div>
                            <div style="display: flex; gap: var(--spacing-md); flex-wrap: wrap; margin-top: var(--spacing-lg);">
                                <button class="btn btn-primary" style="flex: 1; min-width: 200px;">
                                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
                                        <path d="M4 10v6a2 2 0 002 2h8a2 2 0 002-2v-6M9 2v10M12 2l-3 3-3-3"/>
                                    </svg>
                                    立即备份
                                </button>
                                <button class="btn btn-secondary" style="flex: 1; min-width: 200px;">
                                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
                                        <path d="M3 9l9-7 9 7v4a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"/>
                                        <polyline points="9 22 9 12 15 12 15 22"/>
                                    </svg>
                                    恢复备份
                                </button>
                                <button class="btn btn-secondary" style="flex: 1; min-width: 200px;">
                                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
                                        <rect x="3" y="3" width="10" height="10" rx="1"/>
                                        <path d="M8 3v2M8 11v2M3 8h2M11 8h2"/>
                                    </svg>
                                    备份设置
                                </button>
                            </div>
                        </div>

                        <!-- 备份历史 -->
                        <div class="quick-access">
                            <div class="section-header">
                                <h2 class="section-title">备份历史</h2>
                                <div style="display: flex; align-items: center; gap: var(--spacing-sm);">
                                    <select class="select" style="font-size: var(--font-size-caption1); padding: var(--spacing-xs) var(--spacing-sm);">
                                        <option>全部备份</option>
                                        <option>完整备份</option>
                                        <option>增量备份</option>
                                    </select>
                                    <button class="btn btn-secondary btn-sm">
                                        <svg width="14" height="14" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
                                            <circle cx="8" cy="8" r="4"/>
                                            <path d="M8 1v4M8 11v4M1 8h4M11 8h4"/>
                                        </svg>
                                        刷新
                                    </button>
                                </div>
                            </div>
                            <div class="document-list">
                                <!-- 备份项1 -->
                                <div class="document-item">
                                    <div class="document-icon blue">💾</div>
                                    <div class="document-content">
                                        <div class="document-title">完整备份 - 2026-02-02</div>
                                        <div class="document-meta">
                                            <span>今天 14:30</span>
                                            <span>·</span>
                                            <span>456 MB</span>
                                            <span>·</span>
                                            <span style="color: var(--apple-green);">成功</span>
                                        </div>
                                        <div class="document-subtitle">包含所有文档和设置</div>
                                    </div>
                                    <div class="document-menu">
                                        <div class="dropdown" style="position: relative;">
                                            <button class="btn btn-secondary btn-sm" style="padding: var(--spacing-xs); min-width: unset;">
                                                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                                    <circle cx="8" cy="3" r="1.5"/>
                                                    <circle cx="8" cy="8" r="1.5"/>
                                                    <circle cx="8" cy="13" r="1.5"/>
                                                </svg>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- 备份项2 -->
                                <div class="document-item">
                                    <div class="document-icon green">💾</div>
                                    <div class="document-content">
                                        <div class="document-title">增量备份 - 2026-02-02</div>
                                        <div class="document-meta">
                                            <span>今天 10:15</span>
                                            <span>·</span>
                                            <span>89 MB</span>
                                            <span>·</span>
                                            <span style="color: var(--apple-green);">成功</span>
                                        </div>
                                        <div class="document-subtitle">仅包含更改的文件</div>
                                    </div>
                                    <div class="document-menu">
                                        <button class="btn btn-secondary btn-sm" style="padding: var(--spacing-xs); min-width: unset;">
                                            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                                <circle cx="8" cy="3" r="1.5"/>
                                                <circle cx="8" cy="8" r="1.5"/>
                                                <circle cx="8" cy="13" r="1.5"/>
                                            </svg>
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- 备份项3 -->
                                <div class="document-item">
                                    <div class="document-icon blue">💾</div>
                                    <div class="document-content">
                                        <div class="document-title">完整备份 - 2026-02-01</div>
                                        <div class="document-meta">
                                            <span>昨天 20:00</span>
                                            <span>·</span>
                                            <span>432 MB</span>
                                            <span>·</span>
                                            <span style="color: var(--apple-green);">成功</span>
                                        </div>
                                        <div class="document-subtitle">包含所有文档和设置</div>
                                    </div>
                                    <div class="document-menu">
                                        <button class="btn btn-secondary btn-sm" style="padding: var(--spacing-xs); min-width: unset;">
                                            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                                <circle cx="8" cy="3" r="1.5"/>
                                                <circle cx="8" cy="8" r="1.5"/>
                                                <circle cx="8" cy="13" r="1.5"/>
                                            </svg>
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- 备份项4 -->
                                <div class="document-item">
                                    <div class="document-icon green">💾</div>
                                    <div class="document-content">
                                        <div class="document-title">增量备份 - 2026-02-01</div>
                                        <div class="document-meta">
                                            <span>昨天 12:00</span>
                                            <span>·</span>
                                            <span>67 MB</span>
                                            <span>·</span>
                                            <span style="color: var(--apple-green);">成功</span>
                                        </div>
                                        <div class="document-subtitle">仅包含更改的文件</div>
                                    </div>
                                    <div class="document-menu">
                                        <button class="btn btn-secondary btn-sm" style="padding: var(--spacing-xs); min-width: unset;">
                                            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                                <circle cx="8" cy="3" r="1.5"/>
                                                <circle cx="8" cy="8" r="1.5"/>
                                                <circle cx="8" cy="13" r="1.5"/>
                                            </svg>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 备份设置 -->
                        <div class="quick-access">
                            <div class="section-header">
                                <h2 class="section-title">备份设置</h2>
                                <button class="btn btn-secondary btn-sm">
                                    <svg width="14" height="14" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
                                        <path d="M4 10v6a2 2 0 002 2h8a2 2 0 002-2v-6M9 2v10M12 2l-3 3-3-3"/>
                                    </svg>
                                    保存设置
                                </button>
                            </div>
                            <div style="background: var(--bg-secondary); border-radius: var(--radius-lg); padding: var(--spacing-lg);">
                                <div class="setting-item" style="display: flex; align-items: center; justify-content: space-between; padding: var(--spacing-md) 0; border-bottom: 1px solid var(--separator-transparent);">
                                    <div>
                                        <div class="setting-label">自动备份</div>
                                        <div class="setting-description">定期自动创建备份</div>
                                    </div>
                                    <label class="toggle-switch">
                                        <input type="checkbox" checked>
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                                <div class="setting-item" style="display: flex; align-items: center; justify-content: space-between; padding: var(--spacing-md) 0; border-bottom: 1px solid var(--separator-transparent);">
                                    <div>
                                        <div class="setting-label">备份频率</div>
                                        <div class="setting-description">设置自动备份的时间间隔</div>
                                    </div>
                                    <select class="select">
                                        <option>每天</option>
                                        <option selected>每周</option>
                                        <option>每月</option>
                                        <option>自定义</option>
                                    </select>
                                </div>
                                <div class="setting-item" style="display: flex; align-items: center; justify-content: space-between; padding: var(--spacing-md) 0; border-bottom: 1px solid var(--separator-transparent);">
                                    <div>
                                        <div class="setting-label">备份保留时间</div>
                                        <div class="setting-description">自动删除旧备份的时间</div>
                                    </div>
                                    <select class="select">
                                        <option>7天</option>
                                        <option selected>30天</option>
                                        <option>90天</option>
                                        <option>永久</option>
                                    </select>
                                </div>
                                <div class="setting-item" style="display: flex; align-items: center; justify-content: space-between; padding: var(--spacing-md) 0; border-bottom: 1px solid var(--separator-transparent);">
                                    <div>
                                        <div class="setting-label">备份存储位置</div>
                                        <div class="setting-description">选择备份文件的存储位置</div>
                                    </div>
                                    <select class="select">
                                        <option selected>本地存储</option>
                                        <option>云存储</option>
                                        <option>外部存储</option>
                                    </select>
                                </div>
                                <div class="setting-item" style="display: flex; align-items: center; justify-content: space-between; padding: var(--spacing-md) 0;">
                                    <div>
                                        <div class="setting-label">备份通知</div>
                                        <div class="setting-description">备份完成时发送通知</div>
                                    </div>
                                    <label class="toggle-switch">
                                        <input type="checkbox" checked>
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 编辑器页面 -->
                    <div id="editorPage" style="display: none; height: 100%;">
                        <!-- 编辑器工具栏 -->
                        <div style="background: var(--bg-secondary); border-bottom: 1px solid var(--separator-transparent); padding: var(--spacing-sm) var(--spacing-lg); display: flex; align-items: center; gap: var(--spacing-md); flex-shrink: 0;">
                            <div style="display: flex; align-items: center; gap: var(--spacing-sm);">
                                <button class="btn btn-secondary btn-sm" title="保存"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M4 10v6a2 2 0 002 2h8a2 2 0 002-2v-6M9 2v10M12 2l-3 3-3-3"/></svg> 保存</button>
                                <button class="btn btn-secondary btn-sm" title="撤销"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M3 7v6a2 2 0 002 2h6"/><path d="M2 11h6a2 2 0 002-2V5a2 2 0 00-2-2H5"/><path d="M13.5 7a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"/></svg> 撤销</button>
                                <button class="btn btn-secondary btn-sm" title="重做"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M13 11V5a2 2 0 00-2-2H5"/><path d="M14 5H8a2 2 0 00-2 2v6a2 2 0 002 2h6"/><path d="M2.5 9a2.5 2.5 0 100 5 2.5 2.5 0 000-5z"/></svg> 重做</button>
                            </div>
                            <div style="border-left: 1px solid var(--separator-transparent); padding-left: var(--spacing-md); display: flex; align-items: center; gap: var(--spacing-xs);">
                                <button class="btn btn-secondary btn-sm" title="加粗 (Ctrl+B)" onclick="document.execCommand('bold', false, null);"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M6 4h8a2 2 0 012 2v4a2 2 0 01-2 2H6z"/><path d="M6 8h8"/></svg></button>
                                <button class="btn btn-secondary btn-sm" title="斜体 (Ctrl+I)" onclick="document.execCommand('italic', false, null);"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M11 4H6a2 2 0 00-2 2v4a2 2 0 002 2h5"/><path d="M14 10a2 2 0 002-2V6a2 2 0 00-2-2"/></svg></button>
                                <button class="btn btn-secondary btn-sm" title="下划线 (Ctrl+U)" onclick="document.execCommand('underline', false, null);"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M6 4h8a2 2 0 012 2v4a2 2 0 01-2 2H6"/><path d="M6 10h8"/></svg></button>
                                <button class="btn btn-secondary btn-sm" title="删除线" onclick="document.execCommand('strikeThrough', false, null);"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M6 4h8a2 2 0 012 2v4a2 2 0 01-2 2H6"/><path d="M6 8h8"/><path d="M8 6h4"/></svg></button>
                            </div>
                            <div style="border-left: 1px solid var(--separator-transparent); padding-left: var(--spacing-md); display: flex; align-items: center; gap: var(--spacing-xs);">
                                <button class="btn btn-secondary btn-sm" title="无序列表" onclick="document.execCommand('insertUnorderedList', false, null);"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M2 6h12"/><path d="M2 10h12"/><path d="M2 14h12"/></svg></button>
                                <button class="btn btn-secondary btn-sm" title="有序列表" onclick="document.execCommand('insertOrderedList', false, null);"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M2 6h12"/><path d="M2 10h12"/><path d="M2 14h12"/><path d="M6 6V4"/><path d="M6 10V4"/><path d="M6 14V4"/></svg></button>
                                <button class="btn btn-secondary btn-sm" title="缩进" onclick="document.execCommand('indent', false, null);"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 4h4"/><path d="M12 8h4"/><path d="M12 12h4"/><path d="M4 4H2a2 2 0 00-2 2v8a2 2 0 002 2h2"/><path d="M8 4v12"/></svg></button>
                                <button class="btn btn-secondary btn-sm" title="减少缩进" onclick="document.execCommand('outdent', false, null);"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M4 4h4"/><path d="M4 8h4"/><path d="M4 12h4"/><path d="M12 4h2a2 2 0 012 2v8a2 2 0 01-2 2h-2"/><path d="M8 4v12"/></svg></button>
                            </div>
                            <div style="border-left: 1px solid var(--separator-transparent); padding-left: var(--spacing-md); display: flex; align-items: center; gap: var(--spacing-xs);">
                                <button class="btn btn-secondary btn-sm" title="链接 (Ctrl+K)" onclick="insertLink();"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M8 16V9"/><path d="M8 7V0"/><path d="M14 10a5 5 0 00-7.5-4.3"/><path d="M2 10a5 5 0 007.5-4.3"/></svg></button>
                                <button class="btn btn-secondary btn-sm" title="图片" onclick="insertImage();"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="3" width="10" height="10" rx="1"/><circle cx="8" cy="8" r="2"/><path d="M12 12h.01"/></svg></button>
                                <button class="btn btn-secondary btn-sm" title="代码" onclick="document.execCommand('formatBlock', false, 'pre');"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M14 3H2a1 1 0 00-1 1v8a1 1 0 001 1h12a1 1 0 001-1V4a1 1 0 00-1-1z"/><path d="M9 7h3M9 11h3"/></svg></button>
                                <button class="btn btn-secondary btn-sm" title="表格" onclick="insertTable();"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="2" y="2" width="12" height="12" rx="1"/><path d="M8 2v12M2 8h12"/></svg></button>
                            </div>
                            <div style="flex: 1;"></div>
                            <div style="display: flex; align-items: center; gap: var(--spacing-sm);">
                                <span style="font-size: var(--font-size-caption1); color: var(--text-tertiary);">自动保存: 已启用</span>
                            </div>
                        </div>

                        <!-- 编辑区域 -->
                        <div class="editor-content" style="flex: 1; display: flex; height: calc(100% - 56px);">
                            <!-- 左侧编辑区 -->
                            <div style="flex: 1; padding: var(--spacing-2xl); overflow-y: auto;">
                                <input type="text" id="documentTitle" style="width: 100%; border: none; background: transparent; font-size: var(--font-size-title1); font-weight: var(--font-weight-semibold); color: var(--text-primary); margin-bottom: var(--spacing-xl); padding: var(--spacing-sm); outline: none;" placeholder="输入文档标题..." value="无标题文档">
                                <div id="editorContent" contenteditable="true" style="min-height: 600px; line-height: var(--line-height-relaxed); color: var(--text-primary); outline: none;">
                                    <p style="margin-bottom: var(--spacing-lg);">开始编辑您的文档...</p>
                                    <p style="margin-bottom: var(--spacing-lg);">这是一个支持富文本编辑的区域，您可以：</p>
                                    <ul style="margin-bottom: var(--spacing-lg); padding-left: var(--spacing-2xl);">
                                        <li style="margin-bottom: var(--spacing-sm);">输入文本</li>
                                        <li style="margin-bottom: var(--spacing-sm);">使用 <strong>粗体</strong>、<em>斜体</em>、<u>下划线</u> 等格式</li>
                                        <li style="margin-bottom: var(--spacing-sm);">创建列表</li>
                                        <li style="margin-bottom: var(--spacing-sm);">添加链接</li>
                                        <li style="margin-bottom: var(--spacing-sm);">插入图片</li>
                                        <li style="margin-bottom: var(--spacing-sm);">创建表格</li>
                                        <li style="margin-bottom: var(--spacing-sm);">添加代码块</li>
                                    </ul>
                                    <p style="margin-bottom: var(--spacing-lg);">快捷键：</p>
                                    <ul style="margin-bottom: var(--spacing-lg); padding-left: var(--spacing-2xl);">
                                        <li style="margin-bottom: var(--spacing-sm);">Ctrl+B: 加粗</li>
                                        <li style="margin-bottom: var(--spacing-sm);">Ctrl+I: 斜体</li>
                                        <li style="margin-bottom: var(--spacing-sm);">Ctrl+U: 下划线</li>
                                        <li style="margin-bottom: var(--spacing-sm);">Ctrl+K: 插入链接</li>
                                        <li style="margin-bottom: var(--spacing-sm);">Ctrl+S: 保存</li>
                                    </ul>
                                </div>
                            </div>

                            <!-- 右侧预览区 -->
                            <div style="width: 400px; border-left: 1px solid var(--separator-transparent); background: var(--bg-secondary); padding: var(--spacing-xl); overflow-y: auto;">
                                <h3 style="font-size: var(--font-size-headline); font-weight: var(--font-weight-semibold); margin-bottom: var(--spacing-lg); color: var(--text-primary);">预览</h3>
                                <div id="previewContent" style="color: var(--text-primary);">
                                    <h1 style="font-size: var(--font-size-title2); margin-bottom: var(--spacing-lg);">无标题文档</h1>
                                    <p style="margin-bottom: var(--spacing-lg);">开始编辑您的文档...</p>
                                    <p style="margin-bottom: var(--spacing-lg);">这是一个支持富文本编辑的区域，您可以：</p>
                                    <ul style="margin-bottom: var(--spacing-lg); padding-left: var(--spacing-2xl);">
                                        <li style="margin-bottom: var(--spacing-sm);">输入文本</li>
                                        <li style="margin-bottom: var(--spacing-sm);">使用 <strong>粗体</strong>、<em>斜体</em>、<u>下划线</u> 等格式</li>
                                        <li style="margin-bottom: var(--spacing-sm);">创建列表</li>
                                        <li style="margin-bottom: var(--spacing-sm);">添加链接</li>
                                        <li style="margin-bottom: var(--spacing-sm);">插入图片</li>
                                        <li style="margin-bottom: var(--spacing-sm);">创建表格</li>
                                        <li style="margin-bottom: var(--spacing-sm);">添加代码块</li>
                                    </ul>
                                    <p style="margin-bottom: var(--spacing-lg);">快捷键：</p>
                                    <ul style="margin-bottom: var(--spacing-lg); padding-left: var(--spacing-2xl);">
                                        <li style="margin-bottom: var(--spacing-sm);">Ctrl+B: 加粗</li>
                                        <li style="margin-bottom: var(--spacing-sm);">Ctrl+I: 斜体</li>
                                        <li style="margin-bottom: var(--spacing-sm);">Ctrl+U: 下划线</li>
                                        <li style="margin-bottom: var(--spacing-sm);">Ctrl+K: 插入链接</li>
                                        <li style="margin-bottom: var(--spacing-sm);">Ctrl+S: 保存</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 命令面板模态框 -->
    <div class="modal-overlay" id="commandPalette">
        <div class="command-palette">
            <div class="command-input-wrapper">
                <svg class="command-icon" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
                    <circle cx="7" cy="7" r="5"/>
                    <path d="M11 11l3 3"/>
                </svg>
                <input type="text" class="command-input" placeholder="输入命令或搜索...">
                <span class="command-shortcut">ESC 关闭</span>
            </div>
            <div class="command-list">
                <div class="command-section">
                    <div class="command-section-title">基础操作</div>
                    <div class="command-item" data-action="newDocument">
                        <div class="command-item-icon">➕</div>
                        <div class="command-item-content">
                            <div class="command-item-title">新建文档</div>
                            <div class="command-item-subtitle">创建一个新的 Markdown 文档</div>
                        </div>
                        <span class="command-shortcut">⌘N</span>
                    </div>
                    <div class="command-item" data-action="search">
                        <div class="command-item-icon">🔍</div>
                        <div class="command-item-content">
                            <div class="command-item-title">搜索文档</div>
                            <div class="command-item-subtitle">在所有数据库中搜索</div>
                        </div>
                        <span class="command-shortcut">⌘F</span>
                    </div>
                    <div class="command-item" data-action="newFolder">
                        <div class="command-item-icon">📁</div>
                        <div class="command-item-content">
                            <div class="command-item-title">新建文件夹</div>
                            <div class="command-item-subtitle">创建一个新的文件夹</div>
                        </div>
                        <span class="command-shortcut">⌘⇧N</span>
                    </div>
                    <div class="command-item" data-action="import">
                        <div class="command-item-icon">📤</div>
                        <div class="command-item-content">
                            <div class="command-item-title">导入内容</div>
                            <div class="command-item-subtitle">从其他应用导入文档和数据</div>
                        </div>
                    </div>
                    <div class="command-item" data-action="export">
                        <div class="command-item-icon">📥</div>
                        <div class="command-item-content">
                            <div class="command-item-title">导出内容</div>
                            <div class="command-item-subtitle">将文档导出为其他格式</div>
                        </div>
                    </div>
                </div>
                <div class="command-section">
                    <div class="command-section-title">导航</div>
                    <div class="command-item" data-action="home">
                        <div class="command-item-icon">🏠</div>
                        <div class="command-item-content">
                            <div class="command-item-title">前往主页</div>
                            <div class="command-item-subtitle">返回搜索页面</div>
                        </div>
                        <span class="command-shortcut">⌘D</span>
                    </div>
                    <div class="command-item" data-action="history">
                        <div class="command-item-icon">🕒</div>
                        <div class="command-item-content">
                            <div class="command-item-title">查看历史</div>
                            <div class="command-item-subtitle">浏览最近访问的文档</div>
                        </div>
                    </div>
                    <div class="command-item" data-action="templates">
                        <div class="command-item-icon">📋</div>
                        <div class="command-item-content">
                            <div class="command-item-title">文档模板</div>
                            <div class="command-item-subtitle">使用预设模板快速创建文档</div>
                        </div>
                    </div>
                    <div class="command-item" data-action="documents">
                        <div class="command-item-icon">📄</div>
                        <div class="command-item-content">
                            <div class="command-item-title">所有文档</div>
                            <div class="command-item-subtitle">管理您的文档库</div>
                        </div>
                    </div>
                    <div class="command-item" data-action="tags">
                        <div class="command-item-icon">🏷️</div>
                        <div class="command-item-content">
                            <div class="command-item-title">标签管理</div>
                            <div class="command-item-subtitle">组织和管理您的标签</div>
                        </div>
                    </div>
                    <div class="command-item" data-action="websites">
                        <div class="command-item-icon">🌐</div>
                        <div class="command-item-content">
                            <div class="command-item-title">网站收藏</div>
                            <div class="command-item-subtitle">管理您的书签和常用网站</div>
                        </div>
                    </div>
                    <div class="command-item" data-action="apps">
                        <div class="command-item-icon">📱</div>
                        <div class="command-item-content">
                            <div class="command-item-title">集成应用</div>
                            <div class="command-item-subtitle">连接第三方服务</div>
                        </div>
                    </div>
                    <div class="command-item" data-action="graph">
                        <div class="command-item-icon">🔗</div>
                        <div class="command-item-content">
                            <div class="command-item-title">知识图谱</div>
                            <div class="command-item-subtitle">可视化您的知识网络</div>
                        </div>
                    </div>
                    <div class="command-item" data-action="workflow">
                        <div class="command-item-icon">⚙️</div>
                        <div class="command-item-content">
                            <div class="command-item-title">工作流</div>
                            <div class="command-item-subtitle">自动化您的知识管理流程</div>
                        </div>
                    </div>
                    <div class="command-item" data-action="favorites">
                        <div class="command-item-icon">⭐</div>
                        <div class="command-item-content">
                            <div class="command-item-title">收藏夹</div>
                            <div class="command-item-subtitle">您标记的重要项目</div>
                        </div>
                        <span class="command-shortcut">⌘B</span>
                    </div>
                    <div class="command-item" data-action="trash">
                        <div class="command-item-icon">🗑️</div>
                        <div class="command-item-content">
                            <div class="command-item-title">回收站</div>
                            <div class="command-item-subtitle">管理已删除的项目</div>
                        </div>
                    </div>
                    <div class="command-item" data-action="statistics">
                        <div class="command-item-icon">📊</div>
                        <div class="command-item-content">
                            <div class="command-item-title">数据统计</div>
                            <div class="command-item-subtitle">了解您的知识库使用情况</div>
                        </div>
                    </div>
                    <div class="command-item" data-action="backup">
                        <div class="command-item-icon">💾</div>
                        <div class="command-item-content">
                            <div class="command-item-title">数据备份</div>
                            <div class="command-item-subtitle">保护您的重要数据</div>
                        </div>
                    </div>
                </div>
                <div class="command-section">
                    <div class="command-section-title">设置</div>
                    <div class="command-item" data-action="settings">
                        <div class="command-item-icon">⚙️</div>
                        <div class="command-item-content">
                            <div class="command-item-title">打开设置</div>
                            <div class="command-item-subtitle">管理应用设置和偏好</div>
                        </div>
                        <span class="command-shortcut">⌘,</span>
                    </div>
                    <div class="command-item" data-action="toggleTheme">
                        <div class="command-item-icon">🎨</div>
                        <div class="command-item-content">
                            <div class="command-item-title">切换主题</div>
                            <div class="command-item-subtitle">在浅色和深色模式间切换</div>
                        </div>
                        <span class="command-shortcut">⌘⇧T</span>
                    </div>
                    <div class="command-item" data-action="sidebarToggle">
                        <div class="command-item-icon">📐</div>
                        <div class="command-item-content">
                            <div class="command-item-title">切换侧边栏</div>
                            <div class="command-item-subtitle">显示或隐藏侧边栏</div>
                        </div>
                        <span class="command-shortcut">⌘⇧S</span>
                    </div>
                </div>
                <div class="command-section">
                    <div class="command-section-title">编辑器</div>
                    <div class="command-item" data-action="save">
                        <div class="command-item-icon">💾</div>
                        <div class="command-item-content">
                            <div class="command-item-title">保存文档</div>
                            <div class="command-item-subtitle">手动保存当前文档</div>
                        </div>
                        <span class="command-shortcut">⌘S</span>
                    </div>
                    <div class="command-item" data-action="undo">
                        <div class="command-item-icon">↩️</div>
                        <div class="command-item-content">
                            <div class="command-item-title">撤销</div>
                            <div class="command-item-subtitle">撤销上一步操作</div>
                        </div>
                        <span class="command-shortcut">⌘Z</span>
                    </div>
                    <div class="command-item" data-action="redo">
                        <div class="command-item-icon">↪️</div>
                        <div class="command-item-content">
                            <div class="command-item-title">重做</div>
                            <div class="command-item-subtitle">重做上一步操作</div>
                        </div>
                        <span class="command-shortcut">⌘Y</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // === 主题管理 ===
        let currentTheme = localStorage.getItem('theme') || 'light';
        setTheme(currentTheme);

        function setTheme(theme) {
            document.body.setAttribute('data-theme', theme);
            localStorage.setItem('theme', theme);
            currentTheme = theme;

            const sunIcon = document.querySelector('.sun-icon');
            const moonIcon = document.querySelector('.moon-icon');
            const darkModeToggle = document.getElementById('darkModeToggle');

            if (theme === 'dark') {
                sunIcon.style.display = 'none';
                moonIcon.style.display = 'block';
                if (darkModeToggle) darkModeToggle.classList.add('active');
            } else {
                sunIcon.style.display = 'block';
                moonIcon.style.display = 'none';
                if (darkModeToggle) darkModeToggle.classList.remove('active');
            }
        }

        function toggleTheme() {
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            setTheme(newTheme);
        }

        // 主题切换按钮
        document.getElementById('themeToggle').addEventListener('click', toggleTheme);

        // === 搜索建议 ===
        const searchInput = document.getElementById('mainSearchInput');
        const searchSuggestions = document.getElementById('searchSuggestions');
        const searchScope = document.getElementById('searchScope');

        if (searchInput) {
            searchInput.addEventListener('focus', () => {
                searchSuggestions.classList.add('visible');
            });

            searchInput.addEventListener('blur', () => {
                setTimeout(() => {
                    searchSuggestions.classList.remove('visible');
                }, 150);
            });
        }

        // === 搜索范围选择 ===
        if (searchScope) {
            searchScope.addEventListener('change', (e) => {
                const selectedScope = e.target.value;
                console.log('搜索范围已切换为:', selectedScope);
                // 这里可以添加根据选择的范围执行不同搜索逻辑的代码
            });
        }

        // === 时间感知问候语 ===
        function updateGreeting() {
            const now = new Date();
            const hour = now.getHours();
            const greetingElement = document.getElementById('heroGreeting');
            
            if (greetingElement) {
                if (hour >= 5 && hour < 12) {
                    greetingElement.textContent = '早上好';
                } else if (hour >= 12 && hour < 18) {
                    greetingElement.textContent = '下午好';
                } else if (hour >= 18 && hour < 22) {
                    greetingElement.textContent = '晚上好';
                } else {
                    greetingElement.textContent = '夜深了';
                }
            }
        }

        // 页面加载时更新问候语
        updateGreeting();

        // 每分钟更新一次问候语
        setInterval(updateGreeting, 60000);

        // === 模块交互功能 ===
        function initModules() {
            const modules = document.querySelectorAll('.module');
            const modulesGrid = document.querySelector('.modules-grid');
            
            // 点击事件
            modules.forEach(module => {
                module.addEventListener('click', function(e) {
                    // 如果点击的是控制元素，不执行模块操作
                    if (e.target.closest('.module-controls')) {
                        return;
                    }
                    
                    const moduleTitle = this.querySelector('.module-title').textContent;
                    
                    // 添加点击动画
                    this.style.transform = 'translateY(0) scale(0.98)';
                    setTimeout(() => {
                        this.style.transform = '';
                    }, 150);
                    
                    // 根据模块标题执行相应操作
                    switch(moduleTitle) {
                        case '最近文档':
                            showPage('documents');
                            break;
                        case '工作流':
                            showPage('workflow');
                            break;
                        case '常用网站':
                            showPage('websites');
                            break;
                        case '应用':
                            showPage('apps');
                            break;
                        case '知识统计':
                            showPage('statistics');
                            break;
                        case '日历':
                            alert('日历功能即将上线');
                            break;
                        case '待办事项':
                            alert('待办事项功能即将上线');
                            break;
                        default:
                            console.log('点击了模块:', moduleTitle);
                    }
                });
            });
            
            // 拖拽排序功能
            let draggedModule = null;
            
            modules.forEach(module => {
                // 开始拖拽
                module.addEventListener('dragstart', function(e) {
                    draggedModule = this;
                    this.style.opacity = '0.5';
                    this.style.transform = 'scale(1.02)';
                    e.dataTransfer.effectAllowed = 'move';
                });
                
                // 拖拽结束
                module.addEventListener('dragend', function() {
                    this.style.opacity = '';
                    this.style.transform = '';
                    draggedModule = null;
                    
                    // 移除所有占位符
                    const placeholders = document.querySelectorAll('.module-placeholder');
                    placeholders.forEach(placeholder => placeholder.remove());
                });
                
                // 拖拽经过
                module.addEventListener('dragover', function(e) {
                    e.preventDefault();
                    e.dataTransfer.dropEffect = 'move';
                    
                    if (draggedModule !== this) {
                        // 计算放置位置
                        const rect = this.getBoundingClientRect();
                        const y = e.clientY - rect.top;
                        const x = e.clientX - rect.left;
                        
                        // 根据鼠标位置决定插入方向
                        if (y < rect.height / 2 && x < rect.width / 2) {
                            // 左上角
                            modulesGrid.insertBefore(draggedModule, this);
                        } else if (y < rect.height / 2 && x >= rect.width / 2) {
                            // 右上角
                            modulesGrid.insertBefore(draggedModule, this.nextSibling);
                        } else if (y >= rect.height / 2 && x < rect.width / 2) {
                            // 左下角
                            modulesGrid.insertBefore(draggedModule, this);
                        } else {
                            // 右下角
                            modulesGrid.insertBefore(draggedModule, this.nextSibling);
                        }
                    }
                });
                
                // 大小调整功能
                const resizeButton = module.querySelector('.module-resize');
                if (resizeButton) {
                    resizeButton.addEventListener('click', function(e) {
                        e.stopPropagation();
                        
                        const currentModule = this.closest('.module');
                        
                        // 移除所有大小类
                        currentModule.classList.remove('module-standard', 'module-double', 'module-full');
                        
                        // 切换大小
                        if (currentModule.classList.contains('module-standard')) {
                            currentModule.classList.add('module-double');
                        } else if (currentModule.classList.contains('module-double')) {
                            currentModule.classList.add('module-full');
                        } else {
                            currentModule.classList.add('module-standard');
                        }
                        
                        // 添加调整动画
                        currentModule.style.transform = 'scale(0.95)';
                        setTimeout(() => {
                            currentModule.style.transform = '';
                        }, 200);
                    });
                }
            });
        }

        // 初始化模块交互
        initModules();

        // === 智能推荐功能 ===
        function initRecommendations() {
            // 推荐内容数据
            const recommendationData = [
                {
                    id: 'recent-docs',
                    title: '最近文档',
                    subtitle: '快速访问最近编辑的文档',
                    icon: '📄',
                    color: 'var(--gradient-blue)',
                    reason: '常用',
                    action: () => showPage('documents'),
                    timeSlots: [9, 10, 11, 14, 15, 16, 17]
                },
                {
                    id: 'workflow',
                    title: '工作流',
                    subtitle: '自动化您的工作流程',
                    icon: '🔄',
                    color: 'var(--gradient-green)',
                    reason: '高效',
                    action: () => showPage('workflow'),
                    timeSlots: [9, 10, 11, 14, 15, 16]
                },
                {
                    id: 'websites',
                    title: '常用网站',
                    subtitle: '快速访问收藏的网站',
                    icon: '🌐',
                    color: 'var(--gradient-orange)',
                    reason: '快捷',
                    action: () => showPage('websites'),
                    timeSlots: [9, 10, 11, 12, 14, 15, 16, 17]
                },
                {
                    id: 'apps',
                    title: '应用',
                    subtitle: '集成第三方应用',
                    icon: '📱',
                    color: 'var(--gradient-purple)',
                    reason: '便捷',
                    action: () => showPage('apps'),
                    timeSlots: [9, 10, 11, 12, 14, 15, 16, 17]
                },
                {
                    id: 'statistics',
                    title: '知识统计',
                    subtitle: '分析您的知识库使用情况',
                    icon: '📊',
                    color: 'var(--gradient-indigo)',
                    reason: '洞察',
                    action: () => showPage('statistics'),
                    timeSlots: [17, 18, 19]
                },
                {
                    id: 'templates',
                    title: '模板',
                    subtitle: '使用预设模板快速创建文档',
                    icon: '📋',
                    color: 'var(--gradient-red)',
                    reason: '快速',
                    action: () => showPage('templates'),
                    timeSlots: [9, 10, 11, 14, 15]
                }
            ];

            // 生成推荐
            function generateRecommendations() {
                const now = new Date();
                const hour = now.getHours();
                const recommendationsGrid = document.getElementById('recommendationsGrid');
                
                if (!recommendationsGrid) return;
                
                // 清空现有推荐
                recommendationsGrid.innerHTML = '';
                
                // 根据时间和使用习惯筛选推荐
                const filteredRecommendations = recommendationData
                    .filter(item => item.timeSlots.includes(hour))
                    .slice(0, 4); // 最多显示4个推荐
                
                // 如果没有符合时间条件的推荐，随机选择4个
                if (filteredRecommendations.length === 0) {
                    const shuffled = [...recommendationData].sort(() => 0.5 - Math.random());
                    filteredRecommendations.push(...shuffled.slice(0, 4));
                }
                
                // 创建推荐卡片
                filteredRecommendations.forEach((item, index) => {
                    const card = document.createElement('div');
                    card.className = 'recommendation-card';
                    card.style.animationDelay = `${index * 0.1}s`;
                    
                    card.innerHTML = `
                        <div class="recommendation-reason">${item.reason}</div>
                        <div class="recommendation-icon" style="background: ${item.color}; color: white;">
                            ${item.icon}
                        </div>
                        <h3 class="recommendation-title">${item.title}</h3>
                        <p class="recommendation-subtitle">${item.subtitle}</p>
                    `;
                    
                    // 添加点击事件
                    card.addEventListener('click', function() {
                        // 添加点击动画
                        this.style.transform = 'translateY(0) scale(0.98)';
                        setTimeout(() => {
                            this.style.transform = '';
                        }, 150);
                        
                        // 执行推荐操作
                        item.action();
                    });
                    
                    recommendationsGrid.appendChild(card);
                });
            }

            // 初始生成推荐
            generateRecommendations();

            // 绑定刷新按钮
            const refreshButton = document.querySelector('.recommendations-section .section-action');
            if (refreshButton) {
                refreshButton.addEventListener('click', function(e) {
                    e.preventDefault();
                    generateRecommendations();
                    
                    // 添加刷新动画
                    this.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        this.style.transform = '';
                    }, 150);
                });
            }

            // 每小时更新推荐
            setInterval(generateRecommendations, 3600000);
        }

        // 初始化智能推荐
        initRecommendations();

        // === 编辑器功能 ===
        function insertLink() {
            const url = prompt('请输入链接地址:');
            if (url) {
                const text = window.getSelection().toString() || url;
                document.execCommand('createLink', false, url);
            }
        }

        function insertImage() {
            const url = prompt('请输入图片地址:');
            if (url) {
                document.execCommand('insertImage', false, url);
            }
        }

        function insertTable() {
            const table = document.createElement('table');
            table.style.borderCollapse = 'collapse';
            table.style.width = '100%';
            table.style.margin = '16px 0';
            
            // 创建 3x3 表格
            for (let i = 0; i < 3; i++) {
                const row = table.insertRow();
                for (let j = 0; j < 3; j++) {
                    const cell = row.insertCell();
                    cell.style.border = '1px solid var(--separator-transparent)';
                    cell.style.padding = '8px';
                    cell.contentEditable = 'true';
                    cell.innerHTML = '&nbsp;';
                }
            }
            
            const editor = document.getElementById('editorContent');
            if (editor) {
                const selection = window.getSelection();
                if (selection.rangeCount > 0) {
                    const range = selection.getRangeAt(0);
                    range.deleteContents();
                    range.insertNode(table);
                    // 在表格后插入一个空段落
                    const p = document.createElement('p');
                    p.innerHTML = '<br>';
                    table.parentNode.insertBefore(p, table.nextSibling);
                } else {
                    editor.appendChild(table);
                    const p = document.createElement('p');
                    p.innerHTML = '<br>';
                    editor.appendChild(p);
                }
            }
        }

        // 编辑器预览同步


        // === 命令面板 ===
        document.addEventListener('keydown', (e) => {
            // Cmd/Ctrl + K 打开命令面板
            if ((e.metaKey || e.ctrlKey) && e.key === 'k') {
                e.preventDefault();
                toggleCommandPalette();
            }
            // Cmd/Ctrl + , 打开设置
            if ((e.metaKey || e.ctrlKey) && e.key === ',') {
                e.preventDefault();
                showPage('settings');
            }
            // Cmd/Ctrl + Shift + T 切换主题
            if ((e.metaKey || e.ctrlKey) && e.shiftKey && e.key === 'T') {
                e.preventDefault();
                toggleTheme();
            }
            // ESC 关闭
            if (e.key === 'Escape') {
                document.getElementById('commandPalette').classList.remove('visible');
                // 关闭搜索建议
                const searchSuggestions = document.getElementById('searchSuggestions');
                if (searchSuggestions) searchSuggestions.classList.remove('visible');
            }
            // Cmd/Ctrl + Shift + S 切换侧边栏
            if ((e.metaKey || e.ctrlKey) && e.shiftKey && e.key === 's') {
                e.preventDefault();
                toggleSidebar();
            }
            // Cmd/Ctrl + H 打开主页
            if ((e.metaKey || e.ctrlKey) && e.key === 'h') {
                e.preventDefault();
                showPage('home');
            }
            // Cmd/Ctrl + P 打开搜索
            if ((e.metaKey || e.ctrlKey) && e.key === 'p') {
                e.preventDefault();
                showPage('search');
            }
            // Cmd/Ctrl + N 新建文档
            if ((e.metaKey || e.ctrlKey) && e.key === 'n') {
                e.preventDefault();
                showPage('editor');
            }
            // Cmd/Ctrl + O 打开文档
            if ((e.metaKey || e.ctrlKey) && e.key === 'o') {
                e.preventDefault();
                showPage('documents');
            }
            // Cmd/Ctrl + Shift + D 打开文档
            if ((e.metaKey || e.ctrlKey) && e.shiftKey && e.key === 'd') {
                e.preventDefault();
                showPage('documents');
            }
            // Cmd/Ctrl + Shift + F 打开收藏夹
            if ((e.metaKey || e.ctrlKey) && e.shiftKey && e.key === 'f') {
                e.preventDefault();
                showPage('favorites');
            }
            // Cmd/Ctrl + Shift + H 打开历史
            if ((e.metaKey || e.ctrlKey) && e.shiftKey && e.key === 'h') {
                e.preventDefault();
                showPage('history');
            }
            // Cmd/Ctrl + Shift + I 打开导入
            if ((e.metaKey || e.ctrlKey) && e.shiftKey && e.key === 'i') {
                e.preventDefault();
                showPage('import');
            }
            // Cmd/Ctrl + Shift + M 打开模板
            if ((e.metaKey || e.ctrlKey) && e.shiftKey && e.key === 'm') {
                e.preventDefault();
                showPage('templates');
            }
            // 编辑器快捷键
            if (document.getElementById('editorPage').style.display !== 'none') {
                // Ctrl+B 加粗
                if ((e.metaKey || e.ctrlKey) && e.key === 'b') {
                    e.preventDefault();
                    document.execCommand('bold', false, null);
                }
                // Ctrl+I 斜体
                if ((e.metaKey || e.ctrlKey) && e.key === 'i') {
                    e.preventDefault();
                    document.execCommand('italic', false, null);
                }
                // Ctrl+U 下划线
                if ((e.metaKey || e.ctrlKey) && e.key === 'u') {
                    e.preventDefault();
                    document.execCommand('underline', false, null);
                }
                // Ctrl+K 插入链接
                if ((e.metaKey || e.ctrlKey) && e.key === 'k') {
                    e.preventDefault();
                    insertLink();
                }
                // Ctrl+S 保存
                if ((e.metaKey || e.ctrlKey) && e.key === 's') {
                    e.preventDefault();
                    // 保存文档
                    console.log('文档已保存');
                }
            }
        });

        function toggleCommandPalette() {
            const palette = document.getElementById('commandPalette');
            palette.classList.toggle('visible');
            if (palette.classList.contains('visible')) {
                document.querySelector('.command-input').focus();
            }
        }

        // 命令面板搜索和执行
        function initCommandPalette() {
            const commandInput = document.querySelector('.command-input');
            const commandItems = document.querySelectorAll('.command-item');
            const commandPalette = document.getElementById('commandPalette');
            let selectedIndex = -1;

            if (commandInput) {
                // 搜索功能
                commandInput.addEventListener('input', (e) => {
                    const searchTerm = e.target.value.toLowerCase();
                    selectedIndex = -1;
                    
                    commandItems.forEach(item => {
                        const title = item.querySelector('.command-item-title').textContent.toLowerCase();
                        const subtitle = item.querySelector('.command-item-subtitle').textContent.toLowerCase();
                        
                        if (title.includes(searchTerm) || subtitle.includes(searchTerm)) {
                            item.style.display = 'flex';
                        } else {
                            item.style.display = 'none';
                        }
                    });
                    
                    // 重置选择状态
                    updateCommandSelection();
                });

                // 键盘导航
                commandInput.addEventListener('keydown', (e) => {
                    const visibleItems = Array.from(commandItems).filter(item => item.style.display !== 'none');
                    
                    switch (e.key) {
                        case 'ArrowDown':
                            e.preventDefault();
                            selectedIndex = (selectedIndex + 1) % visibleItems.length;
                            updateCommandSelection(visibleItems);
                            break;
                        case 'ArrowUp':
                            e.preventDefault();
                            selectedIndex = (selectedIndex - 1 + visibleItems.length) % visibleItems.length;
                            updateCommandSelection(visibleItems);
                            break;
                        case 'Enter':
                            e.preventDefault();
                            if (selectedIndex >= 0 && selectedIndex < visibleItems.length) {
                                const action = visibleItems[selectedIndex].getAttribute('data-action');
                                executeCommand(action);
                                commandPalette.classList.remove('visible');
                            }
                            break;
                    }
                });
            }

            // 命令执行
            commandItems.forEach(item => {
                item.addEventListener('click', () => {
                    const action = item.getAttribute('data-action');
                    executeCommand(action);
                    commandPalette.classList.remove('visible');
                });
            });

            // 更新命令选择状态
            function updateCommandSelection(visibleItems = Array.from(commandItems).filter(item => item.style.display !== 'none')) {
                visibleItems.forEach((item, index) => {
                    if (index === selectedIndex) {
                        item.style.background = 'var(--fill-secondary)';
                        item.style.borderRadius = 'var(--radius-md)';
                        item.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                    } else {
                        item.style.background = 'transparent';
                    }
                });
            }

            // 重置选择
            function resetSelection() {
                selectedIndex = -1;
                updateCommandSelection();
            }

            // 监听命令面板显示/隐藏
            commandPalette.addEventListener('transitionend', () => {
                if (!commandPalette.classList.contains('visible')) {
                    resetSelection();
                }
            });

            // 执行命令
            function executeCommand(action) {
                switch (action) {
                    case 'newDocument':
                        showPage('editor');
                        break;
                    case 'search':
                        showPage('search');
                        break;
                    case 'newFolder':
                        console.log('新建文件夹');
                        break;
                    case 'import':
                        showPage('import');
                        break;
                    case 'export':
                        console.log('导出内容');
                        break;
                    case 'home':
                        showPage('home');
                        break;
                    case 'history':
                        showPage('history');
                        break;
                    case 'templates':
                        showPage('templates');
                        break;
                    case 'documents':
                        showPage('documents');
                        break;
                    case 'tags':
                        showPage('tags');
                        break;
                    case 'websites':
                        showPage('websites');
                        break;
                    case 'apps':
                        showPage('apps');
                        break;
                    case 'graph':
                        showPage('graph');
                        break;
                    case 'workflow':
                        showPage('workflow');
                        break;
                    case 'favorites':
                        showPage('favorites');
                        break;
                    case 'trash':
                        showPage('trash');
                        break;
                    case 'statistics':
                        showPage('statistics');
                        break;
                    case 'backup':
                        showPage('backup');
                        break;
                    case 'settings':
                        showPage('settings');
                        break;
                    case 'toggleTheme':
                        toggleTheme();
                        break;
                    case 'sidebarToggle':
                        toggleSidebar();
                        break;
                    case 'save':
                        console.log('保存文档');
                        break;
                    case 'undo':
                        console.log('撤销操作');
                        break;
                    case 'redo':
                        console.log('重做操作');
                        break;
                    default:
                        console.log('执行命令:', action);
                }
            }
        }

        // 切换侧边栏
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const sidebarToggle = document.getElementById('sidebarToggle');
            if (sidebar) {
                sidebar.classList.toggle('collapsed');
                const isCollapsed = sidebar.classList.contains('collapsed');
                if (sidebarToggle) {
                    sidebarToggle.innerHTML = isCollapsed ? `
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
                            <rect x="3" y="3" width="10" height="10" rx="2"/>
                            <path d="M8 8l4 4M8 8l-4 4"/>
                        </svg>
                        展开侧边栏
                    ` : `
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
                            <rect x="3" y="3" width="10" height="10" rx="2"/>
                            <path d="M3 8h10"/>
                        </svg>
                        收起侧边栏
                    `;
                }
            }
        }

        // 初始化命令面板
        initCommandPalette();



        // === 数据库切换 ===
        const databaseSelector = document.getElementById('databaseSelector');
        if (databaseSelector) {
            databaseSelector.addEventListener('change', (e) => {
                const selectedDb = e.target.value;
                console.log('切换到数据库:', selectedDb);
                // 这里可以添加切换数据库的逻辑
            });
        }

        // === 导航项 ===
        const navItems = document.querySelectorAll('.nav-item');
        navItems.forEach(item => {
            item.addEventListener('click', (e) => {
                // 阻止默认行为，避免重复执行
                e.preventDefault();
                e.stopPropagation();
                
                // 切换active状态
                navItems.forEach(i => i.classList.remove('active'));
                item.classList.add('active');
                
                // 获取页面名称并显示对应页面
                const onclickAttr = item.getAttribute('onclick');
                if (onclickAttr) {
                    const pageNameMatch = onclickAttr.match(/showPage\('([^']+)'\)/);
                    if (pageNameMatch) {
                        const pageName = pageNameMatch[1];
                        showPage(pageName);
                    }
                }
            });
        });

        // === 标签页 ===
        const tabs = document.querySelectorAll('.tab');
        tabs.forEach(tab => {
            tab.addEventListener('click', (e) => {
                if (!e.target.closest('.tab-close')) {
                    tabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');

                    const page = tab.getAttribute('data-page');
                    if (page) showPage(page);
                }
            });
        });

        const tabCloses = document.querySelectorAll('.tab-close');
        tabCloses.forEach(close => {
            close.addEventListener('click', (e) => {
                e.stopPropagation();
                const tab = close.closest('.tab');
                if (!tab.classList.contains('pinned')) {
                    tab.remove();
                }
            });
        });

        // === 页面切换 ===
        function showPage(pageName) {
            console.log('显示页面:', pageName);
            
            // 隐藏所有页面
            const pages = ['searchPage', 'settingsPage', 'homePage', 'historyPage', 'importPage', 'templatesPage', 'documentsPage', 'tagsPage', 'websitesPage', 'appsPage', 'graphPage', 'workflowPage', 'favoritesPage', 'trashPage', 'statisticsPage', 'backupPage', 'editorPage'];
            pages.forEach(pageId => {
                const page = document.getElementById(pageId);
                if (page) {
                    page.style.opacity = '0';
                    page.style.transform = 'translateY(20px) scale(0.95)';
                    page.style.transition = 'all var(--duration-medium) var(--ease-in)';
                }
            });

            // 短暂延迟后显示目标页面
            setTimeout(() => {
                // 先隐藏所有页面
                pages.forEach(pageId => {
                    const page = document.getElementById(pageId);
                    if (page) {
                        page.style.display = 'none';
                    }
                });

                // 显示对应页面
                let targetPage = document.getElementById(pageName + 'Page');
                let isBackupPage = false;
                
                // 特殊处理编辑器页面
                if (pageName === 'editor') {
                    targetPage = document.getElementById('editorPage');
                    if (targetPage) {
                        targetPage.style.display = 'flex';
                        targetPage.style.flexDirection = 'column';
                    }
                } else if (pageName === 'backup') {
                    // 特殊处理备份页面
                    targetPage = document.getElementById('backupPage');
                    isBackupPage = true;
                    if (targetPage) {
                        console.log('找到备份页面:', targetPage);
                        console.log('备份页面内容长度:', targetPage.innerHTML.length);
                        targetPage.style.display = 'block';
                        targetPage.style.width = '100%';
                    }
                } else if (!targetPage) {
                    // 默认显示搜索页面
                    targetPage = document.getElementById('searchPage');
                    if (targetPage) {
                        targetPage.style.display = 'block';
                    }
                } else {
                    targetPage.style.display = 'block';
                }
                
                // 应用动画效果
                if (targetPage) {
                    console.log('找到页面:', targetPage.id);
                    if (isBackupPage) {
                        // 对于备份页面，直接显示，不使用动画
                        targetPage.style.opacity = '1';
                        targetPage.style.transform = 'translateY(0) scale(1)';
                        targetPage.style.transition = 'none';
                    } else {
                        // 对于其他页面，使用动画效果
                        targetPage.style.opacity = '0';
                        targetPage.style.transform = 'translateY(20px) scale(0.95)';
                        targetPage.style.transition = 'all var(--duration-medium) var(--ease-out)';
                        
                        // 强制重排
                        targetPage.offsetHeight;
                        
                        targetPage.style.opacity = '1';
                        targetPage.style.transform = 'translateY(0) scale(1)';
                    }
                } else {
                    console.error('未找到页面:', pageName);
                    // 显示搜索页面作为默认
                    const searchPage = document.getElementById('searchPage');
                    if (searchPage) {
                        searchPage.style.display = 'block';
                        searchPage.style.opacity = '1';
                        searchPage.style.transform = 'translateY(0) scale(1)';
                    }
                }
            }, 100);
        }

        // === 开关控件 ===
        const toggles = document.querySelectorAll('.toggle');
        toggles.forEach(toggle => {
            toggle.addEventListener('click', function() {
                this.classList.toggle('active');
            });
        });

        // === 颜色选择 ===
        const colorOptions = document.querySelectorAll('.color-option');
        colorOptions.forEach(option => {
            option.addEventListener('click', () => {
                colorOptions.forEach(o => o.classList.remove('active'));
                option.classList.add('active');
            });
        });

        // === 滑块 ===
        const sidebarWidthSlider = document.getElementById('sidebarWidthSlider');
        const sidebarWidthValue = document.getElementById('sidebarWidthValue');
        if (sidebarWidthSlider) {
            sidebarWidthSlider.addEventListener('input', (e) => {
                const value = e.target.value;
                sidebarWidthValue.textContent = value + 'px';
                sidebar.style.width = value + 'px';
            });
        }

        const fontSizeSlider = document.getElementById('fontSizeSlider');
        const fontSizeValue = document.getElementById('fontSizeValue');
        if (fontSizeSlider) {
            fontSizeSlider.addEventListener('input', (e) => {
                const value = e.target.value;
                fontSizeValue.textContent = value + 'px';
                document.documentElement.style.setProperty('--font-size-body', value + 'px');
            });
        }

        // === 卡片效果 ===
        const cards = document.querySelectorAll('.card');
        cards.forEach(card => {
            card.addEventListener('mouseenter', () => {
                card.style.transform = 'translateY(-4px)';
            });
            card.addEventListener('mouseleave', () => {
                card.style.transform = '';
            });
        });

        // === 文档项 ===
        const documentItems = document.querySelectorAll('.document-item');
        documentItems.forEach(item => {
            item.addEventListener('click', () => {
                console.log('打开文档:', item.querySelector('.document-title').textContent);
            });
        });

        // === 系统主题检测 ===
        if (window.matchMedia && !localStorage.getItem('theme')) {
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            setTheme(prefersDark ? 'dark' : 'light');

            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
                if (!localStorage.getItem('theme')) {
                    setTheme(e.matches ? 'dark' : 'light');
                }
            });
        }

        // === 编辑器功能 ===
        function initEditor() {
            const editorPage = document.getElementById('editorPage');
            if (!editorPage) return;

            const contentEditable = document.getElementById('editorContent');
            const titleInput = document.getElementById('documentTitle');
            const previewContent = document.getElementById('previewContent');
            const previewArea = editorPage.querySelector('.quick-access:last-child');

            // 基本编辑器功能
            if (titleInput && previewContent) {
                titleInput.addEventListener('input', () => {
                    const previewTitle = previewContent.querySelector('h1');
                    if (previewTitle) {
                        previewTitle.textContent = titleInput.value || '无标题文档';
                    }
                });
            }
            
            if (contentEditable && previewContent) {
                contentEditable.addEventListener('input', () => {
                    // 简单的预览同步
                    const content = contentEditable.innerHTML;
                    const previewBody = document.createElement('div');
                    previewBody.innerHTML = content;
                    
                    // 替换预览内容
                    while (previewContent.firstChild) {
                        previewContent.removeChild(previewContent.firstChild);
                    }
                    
                    const title = document.createElement('h1');
                    title.style.fontSize = 'var(--font-size-title2)';
                    title.style.marginBottom = 'var(--spacing-lg)';
                    title.textContent = titleInput ? (titleInput.value || '无标题文档') : '无标题文档';
                    
                    previewContent.appendChild(title);
                    previewContent.appendChild(previewBody);
                });
            }

            // 快捷键支持
            if (contentEditable) {
                contentEditable.addEventListener('keydown', (e) => {
                    // Ctrl+B 加粗
                    if ((e.ctrlKey || e.metaKey) && e.key === 'b') {
                        e.preventDefault();
                        document.execCommand('bold', false, null);
                    }
                    // Ctrl+I 斜体
                    if ((e.ctrlKey || e.metaKey) && e.key === 'i') {
                        e.preventDefault();
                        document.execCommand('italic', false, null);
                    }
                    // Ctrl+U 下划线
                    if ((e.ctrlKey || e.metaKey) && e.key === 'u') {
                        e.preventDefault();
                        document.execCommand('underline', false, null);
                    }
                    // Ctrl+Z 撤销
                    if ((e.ctrlKey || e.metaKey) && e.key === 'z') {
                        e.preventDefault();
                        document.execCommand('undo', false, null);
                    }
                    // Ctrl+Y 重做
                    if ((e.ctrlKey || e.metaKey) && e.key === 'y') {
                        e.preventDefault();
                        document.execCommand('redo', false, null);
                    }
                });
            }

            // 自动保存模拟
            let saveTimeout;
            function autoSave() {
                clearTimeout(saveTimeout);
                saveTimeout = setTimeout(() => {
                    console.log('自动保存文档');
                    // 这里可以添加实际的保存逻辑
                }, 1000);
            }

            if (contentEditable) {
                contentEditable.addEventListener('input', autoSave);
            }
            if (titleInput) {
                titleInput.addEventListener('input', autoSave);
            }

            // 保存按钮
            const saveBtn = editorPage.querySelector('.btn[title="保存"]');
            if (saveBtn) {
                saveBtn.addEventListener('click', () => {
                    console.log('手动保存文档');
                    // 这里可以添加实际的保存逻辑
                });
            }
        }

        // 初始化编辑器
        initEditor();

        console.log('M1 知识库 V4.0 - UI Demo 已加载');
        console.log('快捷键: Cmd+K (命令面板), Cmd+, (设置), Cmd+Shift+T (切换主题)');
        console.log('编辑器快捷键: Ctrl+B (加粗), Ctrl+I (斜体), Ctrl+U (下划线), Ctrl+Z (撤销), Ctrl+Y (重做)');
        console.log('点击标签页可切换到编辑器页面');
        console.log('点击导航项可切换到对应功能页面');

        // === 分类操作 ===
        function openCategory(categoryName) {
            console.log('打开分类:', categoryName);
            // 这里可以添加打开分类文件夹的逻辑
            
            // 模拟打开分类的动画效果
            const categoryCard = event.currentTarget;
            categoryCard.style.transform = 'translateY(0) scale(0.98)';
            setTimeout(() => {
                categoryCard.style.transform = '';
            }, 150);
            
            // 显示分类内容（模拟）
            alert(`已打开分类: ${categoryName}\n\n文件数量: ${categoryCard.querySelector('.category-count').textContent}`);
        }

        // === 备份页面测试脚本 ===
        function testBackupPageDisplay() {
            console.log('=== 测试备份页面显示 ===');
            
            try {
                // 检查备份页面元素
                const backupPage = document.getElementById('backupPage');
                if (backupPage) {
                    console.log('✓ 找到备份页面元素');
                    console.log('✓ 备份页面ID:', backupPage.id);
                    console.log('✓ 备份页面类名:', backupPage.className);
                    console.log('✓ 备份页面内容长度:', backupPage.innerHTML.length);
                    console.log('✓ 备份页面当前display:', backupPage.style.display);
                    
                    // 隐藏所有其他页面
                    const pages = ['searchPage', 'settingsPage', 'homePage', 'historyPage', 'importPage', 'templatesPage', 'documentsPage', 'tagsPage', 'websitesPage', 'appsPage', 'graphPage', 'workflowPage', 'favoritesPage', 'trashPage', 'statisticsPage', 'editorPage'];
                    pages.forEach(pageId => {
                        const page = document.getElementById(pageId);
                        if (page) {
                            page.style.display = 'none';
                        }
                    });
                    
                    // 强制显示备份页面
                    backupPage.style.display = 'block';
                    backupPage.style.opacity = '1';
                    backupPage.style.transform = 'translateY(0) scale(1)';
                    backupPage.style.transition = 'none';
                    backupPage.style.visibility = 'visible';
                    backupPage.style.position = 'static';
                    backupPage.style.width = '100%';
                    backupPage.style.height = 'auto';
                    
                    console.log('✓ 备份页面已设置为可见');
                    console.log('✓ 备份页面新的display:', backupPage.style.display);
                    
                    // 检查备份页面是否真的可见
                    const computedStyle = window.getComputedStyle(backupPage);
                    console.log('✓ 备份页面计算样式display:', computedStyle.display);
                    console.log('✓ 备份页面计算样式visibility:', computedStyle.visibility);
                    console.log('✓ 备份页面计算样式.opacity:', computedStyle.opacity);
                    
                    alert('备份页面测试完成！请检查浏览器控制台查看详细信息。');
                } else {
                    console.error('✗ 未找到备份页面元素');
                    alert('错误：未找到备份页面元素');
                }
            } catch (error) {
                console.error('✗ 测试过程中出错:', error);
                alert('错误：' + error.message);
            }
        }
        
        // 为了方便测试，将测试函数添加到全局对象
        window.testBackupPage = testBackupPageDisplay;
        console.log('备份页面测试函数已添加到全局对象');
        console.log('在控制台中执行 testBackupPage() 来测试备份页面显示');
    </script>
</body>
</html>
